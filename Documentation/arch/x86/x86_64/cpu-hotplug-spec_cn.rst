... SPDX 许可证标识符: GPL-2.0

===================================================
Linux/x86-64 下的 CPU 热插拔固件支持
===================================================

Linux/x86-64 现在支持 CPU 热插拔。由于各种原因，Linux 需要在启动前预先知道可以插入系统的最大 CPU 数量。当前 ACPI 3.0 没有官方的方法从固件向操作系统提供这些信息。
在 ACPI 中，每个 CPU 在 MADT 表中都需要一个 LAPIC 对象（参见 ACPI 3.0 规范的 5.2.11.5 节）。ACPI 已经具备了通过将 LAPIC 对象中的 Enabled 位设置为零来表示禁用的 LAPIC 的概念。
对于 CPU 热插拔，Linux/x86-64 现在期望所有可能的未来热插拔 CPU 已经在 MADT 中可用。如果 CPU 尚未可用，则应将其 LAPIC 的 Enabled 位设置为 0。Linux 将使用禁用的 LAPIC 数量来计算未来的最大 CPU 数量。
在最坏的情况下，用户可以通过命令行选项（additional_cpus=...）覆盖此选择，但建议在 MADT 中提供正确的数量（或合理的估计值，倾向于多而不是少），以避免手动配置。
