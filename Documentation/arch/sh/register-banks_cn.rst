### SPDX 许可证标识符: GPL-2.0

==========================================
关于内核中寄存器组使用的说明
==========================================

#### 引言
------------

SH-3 和 SH-4 CPU 系列传统上包含一个部分寄存器组（由 SR.RB 选择，仅 r0...r7 被分组），而其他系列可能具有更全面的分组功能或根本就没有这种能力。
SR.RB 分组
-------------

在这种类型的分组中，当 SR.RB 设置为我们感兴趣的分组时，分组寄存器直接映射到 r0...r7。否则，即使在另一个分组的上下文中，也可以使用 ldc/stc 来引用这些分组寄存器（作为 r0_bank...r7_bank）。显然，编写利用这些分组寄存器的代码时，开发人员必须考虑 SR.RB 的值。用户空间也无法访问 bank1 的值，因此内核可以有效地将它们用作临时寄存器。
目前内核使用了以下一些寄存器：
- r0_bank, r1_bank（被引用为 k0 和 k1，在处理异常时作为临时寄存器使用）
- r2_bank（用于追踪 EXPEVT/INTEVT 代码）

    - 在 do_IRQ() 及其相关函数中用于基于中断异常向量跳转表偏移量进行中断映射

- r6_bank（全局中断屏蔽寄存器）

    - SR.IMASK 中断处理器使用此寄存器来设置中断优先级级别（由 local_irq_enable() 使用）

- r7_bank（当前寄存器）
