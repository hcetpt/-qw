统一可扩展固件接口 (UEFI)
=================================

UEFI，即统一可扩展固件接口，是一种规范，用于管理兼容的固件接口的行为。它由UEFI论坛维护 —— http://www.uefi.org/
UEFI是其前身“EFI”的演进版本，因此在本文档及相关源代码中，“EFI”和“UEFI”这两个术语有时被互换使用。通常来说，所有新的特性都使用“UEFI”，而“EFI”则指代遗留代码或规范。
Linux中的UEFI支持
=====================

在符合UEFI规范的固件平台上启动，使得内核能够支持以下附加功能：

- UEFI运行时服务
- 通过UEFI配置表的标准接口获取各种配置信息（例如ACPI、SMBIOS等）。

为了实际启用[U]EFI支持，请启用以下选项：

- CONFIG_EFI=y
- CONFIG_EFIVAR_FS=y 或者 m

实现依赖于接收关于UEFI环境的信息并将其放入扁平设备树（FDT）中——因此仅当CONFIG_OF被启用时可用。
UEFI stub
=========

“stub”是一个特性，将Image/zImage扩展为有效的UEFI PE/COFF可执行文件，包括一个加载程序，使其可以从UEFI shell、引导菜单或者像Gummiboot或rEFInd这样的轻量级引导加载器直接加载内核。
带有stub支持构建的内核映像仍然可以在非UEFI环境中作为有效的内核映像进行引导。
ARM架构上的UEFI内核支持
==========================

在ARM架构（arm和arm64）上，UEFI内核支持仅在通过stub引导时可用。
在UEFI模式下引导时，stub会从提供的设备树（DT）中删除任何内存节点。
相反，内核读取UEFI内存映射。
stub填充FDT /chosen节点（并且内核扫描这些参数），具体如下：

==========================  ======   ===========================================
名称                        类型     描述
==========================  ======   ===========================================
linux,uefi-system-table     64位    UEFI系统表的物理地址
linux,uefi-mmap-start       64位    UEFI内存映射的起始物理地址，
                                     由UEFI GetMemoryMap()调用填充
下面是提供的英文描述及其对应的中文翻译：

| 描述                           | 类型   | 说明                                                         |
|------------------------------|------|------------------------------------------------------------|
| `linux,uefi-mmap-size`       | 32位  | 指向前一个条目中所指向的UEFI内存映射的字节大小。                 |
| `linux,uefi-mmap-desc-size`  | 32位  | UEFI内存映射中每个条目的字节大小。                              |
| `linux,uefi-mmap-desc-ver`   | 32位  | 内存映射描述符格式的版本。                                      |
| `kaslr-seed`                 | 64位  | 用于随机化内核镜像基地址位置的熵值。                             |
| `bootargs`                   | 字符串 | 内核命令行参数。                                               |
