======================
OMAP HDQ/1 线模块的内核驱动
======================

支持的芯片：
=============
TI OMAP 2430/3430 平台上的 HDQ/1 线控制器
关于 HDQ 基础的一个有用链接：
================================
http://focus.ti.com/lit/an/slua408a/slua408a.pdf

描述：
======
TI OMAP2430/3430 平台上的 HDQ/1-线模块实现了 Benchmark HDQ 和 Dallas Semiconductor 1-线协议中的主功能硬件协议。这些协议使用单根线进行主设备（HDQ/1-线控制器）与从设备（符合 HDQ/1-线标准的外部设备）之间的通信。
HDQ/1-线模块的一个典型应用是与电池监控（气体计量）集成电路的通信。
该控制器同时支持 HDQ 模式和 1-线模式的运行。HDQ 模式与 1-线模式之间最重要的区别在于从设备对初始化脉冲的响应方式。在 HDQ 模式下，固件不需要主机向从设备创建一个初始化脉冲。然而，可以使用初始化脉冲（也称为断脉冲）来重置从设备。从设备不会像 1-线协议中那样通过发送存在脉冲来响应。
备注：
======
驱动程序（drivers/w1/masters/omap_hdq.c）支持控制器的 HDQ 模式。在这种模式下，由于无法读取遵循 W1 规范（家族：ID：CRC）的 ID，可以通过传递给驱动程序的模块参数来计算 CRC，并将相应的从设备 ID 反馈给 W1 核心。
默认情况下，主驱动程序和 BQ 从接口驱动程序（drivers/w1/slaves/w1_bq27000.c）将 ID 设置为 1。
如果需要，请注意用不同的 ID 加载这两个模块，但请注意用于加载主驱动程序和从驱动程序的 ID 必须相同。例如：

```
insmod omap_hdq.ko W1_ID=2
insmod w1_bq27000.ko F_ID=2
```

驱动程序还支持 1-线模式。在这种模式下，无需作为参数传递从设备 ID。驱动程序将使用 SEARCH_ROM 过程自动检测连接到总线的从设备。可以通过在设备树 (DT) 中将 "ti,mode" 属性设置为 "1w" 来选择 1-线模式（请参阅 Documentation/devicetree/bindings/w1/omap-hdq.txt 获取更多详细信息）。
默认情况下，驱动程序处于 HDQ 模式。
