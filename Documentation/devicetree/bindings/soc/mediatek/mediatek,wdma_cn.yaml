# SPDX-许可证标识符: (GPL-2.0-only 或 BSD-2-Clause)
%YAML 1.2
---
$id: http://devicetree.org/schemas/soc/mediatek/mediatek,wdma.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

标题: MediaTek 写直接内存访问

维护者:
  - Matthias Brugger <matthias.bgg@gmail.com>
  - Moudy Ho <moudy.ho@mediatek.com>

描述: |
  MediaTek 写直接内存访问(WDMA)组件用于将数据写入 DMA。

属性:
  compatible:
    项目:
      - 枚举:
          - mediatek,mt8183-mdp3-wdma

  reg:
    最大项数: 1

  mediatek,gce-client-reg:
    $ref: /schemas/types.yaml#/definitions/phandle-array
    项目:
      项目:
        - 描述: GCE 的 phandle
        - 描述: GCE 子系统 ID
        - 描述: 寄存器偏移量
        - 描述: 寄存器大小
    描述: 客户端驱动程序的寄存器可以通过 GCE 和此属性中定义的 4 个参数进行配置。每个 GCE 子系统 ID 都映射到头文件 include/dt-bindings/gce/<chip>-gce.h 中定义的一个客户端。
  mediatek,gce-events:
    描述:
      映射到特定硬件事件信号到 GCE 的事件 ID。事件 ID 在各芯片的 GCE 头文件 include/dt-bindings/gce/<chip>-gce.h 中定义。
    $ref: /schemas/types.yaml#/definitions/uint32-array

  power-domains:
    最大项数: 1

  clocks:
    最少项数: 1

  iommus:
    最大项数: 1

必需:
  - compatible
  - reg
  - mediatek,gce-client-reg
  - mediatek,gce-events
  - power-domains
  - clocks
  - iommus

额外属性: false

示例:
  - |
    #include <dt-bindings/clock/mt8183-clk.h>
    #include <dt-bindings/gce/mt8183-gce.h>
    #include <dt-bindings/power/mt8183-power.h>
    #include <dt-bindings/memory/mt8183-larb-port.h>

    mdp3_wdma: mdp3-wdma@14006000 {
      compatible = "mediatek,mt8183-mdp3-wdma";
      reg = <0x14006000 0x1000>;
      mediatek,gce-client-reg = <&gce SUBSYS_1400XXXX 0x6000 0x1000>;
      mediatek,gce-events = <CMDQ_EVENT_MDP_WDMA0_SOF>,
                            <CMDQ_EVENT_MDP_WDMA0_EOF>;
      power-domains = <&spm MT8183_POWER_DOMAIN_DISP>;
      clocks = <&mmsys CLK_MM_MDP_WDMA0>;
      iommus = <&iommu>;
    };
