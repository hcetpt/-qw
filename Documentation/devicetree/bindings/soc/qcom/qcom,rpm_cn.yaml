# SPDX-许可证标识符: (GPL-2.0 或 BSD-2-Clause)
%YAML 1.2
---
$id: http://devicetree.org/schemas/soc/qcom/qcom,rpm.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

标题: 高通资源电源管理器 (RPM)

描述:
  此驱动程序用于与在各种高通平台中发现的资源电源管理器 (RPM) 进行接口。RPM允许系统中的每个组件对系统资源（如时钟、稳压器和总线频率）的状态进行投票。
维护者:
  - Bjorn Andersson <andersson@kernel.org>

属性:
  compatible:
    枚举:
      - qcom,rpm-apq8064
      - qcom,rpm-msm8660
      - qcom,rpm-msm8960
      - qcom,rpm-ipq8064
      - qcom,rpm-mdm9615

  reg:
    最大项目数: 1

  interrupts:
    最大项目数: 3

  interrupt-names:
    项目:
      - 常量: ack
      - 常量: err
      - 常量: wakeup

  qcom,ipc:
    $ref: /schemas/types.yaml#/definitions/phandle-array
    项目:
      - 项目:
          - 描述: 指向表示APCS寄存器的syscon节点的phandle
          - 描述: 表示在syscon内的寄存器偏移的u32
          - 描述: 表示寄存器中的ipc位的u32
    描述:
      三个条目指定了用于向RPM发送信号的传出ipc位
模式属性:
  "^regulators(-[01])?$":
    类型: 对象
    $ref: /schemas/regulator/qcom,rpm-regulator.yaml#
    未评估属性: false

必需:
  - compatible
  - reg
  - interrupts
  - interrupt-names
  - qcom,ipc

附加属性: false

示例:
  - |
    #include <dt-bindings/interrupt-controller/arm-gic.h>
    #include <dt-bindings/interrupt-controller/irq.h>
    #include <dt-bindings/mfd/qcom-rpm.h>

    rpm@108000 {
      compatible = "qcom,rpm-msm8960";
      reg = <0x108000 0x1000>;
      qcom,ipc = <&apcs 0x8 2>;

      interrupts = <GIC_SPI 19 IRQ_TYPE_NONE>, <GIC_SPI 21 IRQ_TYPE_NONE>, <GIC_SPI 22 IRQ_TYPE_NONE>;
      interrupt-names = "ack", "err", "wakeup";

      regulators {
        compatible = "qcom,rpm-pm8921-regulators";
        vdd_l1_l2_l12_l18-supply = <&pm8921_s4>;

        s1 {
          regulator-min-microvolt = <1225000>;
          regulator-max-microvolt = <1225000>;

          bias-pull-down;

          qcom,switch-mode-frequency = <3200000>;
        };

        pm8921_s4: s4 {
          regulator-min-microvolt = <1800000>;
          regulator-max-microvolt = <1800000>;

          qcom,switch-mode-frequency = <1600000>;
          bias-pull-down;

          qcom,force-mode = <QCOM_RPM_FORCE_MODE_AUTO>;
        };
      };
    };
