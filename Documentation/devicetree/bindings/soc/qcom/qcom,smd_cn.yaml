# SPDX-许可证标识符: GPL-2.0-only 或 BSD-2-Clause
%YAML 1.2
---
$id: http://devicetree.org/schemas/soc/qcom/qcom,smd.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

标题: 高通共享内存驱动程序

维护者:
  - Andy Gross <agross@kernel.org>
  - Bjorn Andersson <bjorn.andersson@linaro.org>
  - Krzysztof Kozlowski <krzysztof.kozlowski@linaro.org>

描述:
  高通共享内存驱动程序是一个基于FIFO的通信通道，用于在高通平台中的各个子系统之间发送数据。
  使用顶级SMD节点已废弃。相反，SMD边缘现在直接定义在代表相应远程子系统或远程处理器的设备节点下。
废弃: true

属性:
  compatible:
    常量: qcom,smd

模式属性:
  "^smd-edge|rpm$":
    $ref: /schemas/remoteproc/qcom,smd-edge.yaml#
    unevaluatedProperties: false
    描述:
      SMD节点的每个子节点代表一个远程子系统或某种形式的远程处理器 - 或用SMD语言来说是“边缘”。边缘的名称并不重要。
必需:
  - compatible

额外属性: false

示例:
  # 下面的例子表示一个SMD节点，其中一个边缘代表了"rpm"子系统。对于"rpm"子系统，我们有一个与"rpm_request"通道相关的设备。
  # 注意: 这种表示方法已废弃，应使用"qcom,rpm-proc"来表示RPM。
- |
    #include <dt-bindings/interrupt-controller/arm-gic.h>

    shared-memory {
        compatible = "qcom,smd";

        rpm {
            interrupts = <GIC_SPI 168 IRQ_TYPE_EDGE_RISING>;
            qcom,ipc = <&apcs 8 0>;
            qcom,smd-edge = <15>;

            rpm-requests {
                compatible = "qcom,rpm-msm8974";
                qcom,smd-channels = "rpm_requests";

                clock-controller {
                    compatible = "qcom,rpmcc-msm8974", "qcom,rpmcc";
                    #clock-cells = <1>;
                };

            };
        };
    };
