# SPDX-许可证标识符: (GPL-2.0-only 或 BSD-2-Clause)
%YAML 1.2
---
$id: http://devicetree.org/schemas/soc/fsl/cpm_qe/fsl,qe.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

标题: Freescale QUICC Engine 模块 (QE)

维护者:
  - Frank Li <Frank.Li@nxp.com>

描述: |
  这表示安装在 PowerQUICC II Pro 上的 QE 模块。
注意: 这是一个临时绑定；文档后面部分中应根据 CPM 绑定进行更新。
基本上，它是一个设备总线，可以或多或少作为一个完整的实体来运行（例如 UCC、USB 等）。所有这些都应该作为“根”qe 节点的同级节点存在，并使用那里的通用属性。
以下描述适用于 MPC8360 的 QE，
未来将扩展更多的节点和属性。
属性:
  compatible:
    items:
      - const: fsl,qe
      - const: simple-bus

  reg:
    maxItems: 1

  ranges:
    maxItems: 1

  model:
    $ref: /schemas/types.yaml#/definitions/string
    enum: [QE, CPM, CPM2]

  bus-frequency:
    $ref: /schemas/types.yaml#/definitions/uint32
    描述: QUICC Engine 的时钟频率
  fsl,qe-num-riscs:
    $ref: /schemas/types.yaml#/definitions/uint32
    描述: 定义 QE 拥有的 RISC 引擎数量
  fsl,qe-snums:
    $ref: /schemas/types.yaml#/definitions/uint8-array
    maxItems: 28
    描述:
      定义虚拟线程的串行号 (SNUM) 值数组
  fsl,firmware-phandle:
    $ref: /schemas/types.yaml#/definitions/phandle
    描述: |
      如果没有 fsl,qe-firmware 子节点，则为必需。

      指向一个固件节点（参见下面的“QE 固件节点”）
      包含应为此 QE 加载的固件
对于固件节点的 compatible 属性应该声明为,
      "fsl,qe-firmware"
  brg-frequency:
    $ref: /schemas/types.yaml#/definitions/uint32
    描述:
      波特率生成器内部时钟源频率（以赫兹为单位）
这段文本定义了一个设备树片段，描述了特定硬件配置。以下是翻译后的中文版本：

`fsl,qe-num-snums`:
    `$ref`: `/schemas/types.yaml#/definitions/uint32`
    `deprecated`: `true`
    `description`: |
      定义QE可以为线程使用多少个序列号（SNUM）。建议使用`fsl,qe-snums`来不仅指定SNUM的数量，还指定它们的值。

`patternProperties`:
  `'^muram@[a-f0-9]+$'`:
    `$ref`: `fsl,qe-muram.yaml`

  `'^interrupt-controller@[a-f0-9]+$'`:
    `$ref`: `fsl,qe-ic.yaml`

  `'^si@[a-f0-9]+$'`:
    `$ref`: `fsl,qe-si.yaml`

  `'^siram@[a-f0-9]+$'`:
    `$ref`: `fsl,qe-siram.yaml`

`required`:
  - `compatible`
  - `reg`
  - `bus-frequency`

`allOf`:
  - `$ref`: `/schemas/simple-bus.yaml#`

`unevaluatedProperties`: `false`

`examples`:
  - |
    `qe-bus@e0100000` {
        `compatible` = `"fsl,qe"`, `"simple-bus"`;
        `reg` = `<0xe0100000 0x480>`;
        `ranges` = `<0 0xe0100000 0x00100000>`;
        `#address-cells` = `<1>`;
        `#size-cells` = `<1>`;
        `brg-frequency` = `<0>`;
        `bus-frequency` = `<0x179a7b00>`;
        `fsl,qe-snums` = `/bits/ 8` `<
            0x04 0x05 0x0c 0x0d 0x14 0x15 0x1c 0x1d
            0x24 0x25 0x2c 0x2d 0x34 0x35 0x88 0x89
            0x98 0x99 0xa8 0xa9 0xb8 0xb9 0xc8 0xc9
            0xd8 0xd9 0xe8 0xe9>`;

        `interrupt-controller@80` {
            `compatible` = `"fsl,qe-ic"`;
            `reg` = `<0x80 0x80>`;
            `#interrupt-cells` = `<1>`;
            `interrupt-controller`;
            `interrupts` = `<95 2 0 0  94 2 0 0>`;
        };

        `si@700` {
            `compatible` = `"fsl,t1040-qe-si"`;
            `reg` = `<0x700 0x80>`;
        };

        `siram@1000` {
          `compatible` = `"fsl,t1040-qe-siram"`;
          `reg` = `<0x1000 0x800>`;
        };

        `muram@10000` {
            `compatible` = `"fsl,qe-muram"`, `"fsl,cpm-muram"`;
            `ranges` = `<0 0x00010000 0x0000c000>`;
            `#address-cells` = `<1>`;
            `#size-cells` = `<1>`;

              `data-only@0` {
                  `compatible` = `"fsl,qe-muram-data"`,
                              `"fsl,cpm-muram-data"`;
                  `reg` = `<0 0xc000>`;
              };
        };
    };

请注意，这里的翻译保持了原有的格式和语法结构，并尽量贴近原文的表述方式。
