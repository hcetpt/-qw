# SPDX-许可证标识符: (GPL-2.0-only 或 BSD-2-Clause)
%YAML 1.2
---
$id: http://devicetree.org/schemas/soc/fsl/fsl,qman-fqd.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

标题: QMan 私有内存节点

维护者:
  - Frank Li <Frank.Li@nxp.com>

描述: |
  QMan 需要两段连续的物理内存范围，用于 QMan 帧队列描述符 (FQD) 和打包帧描述符记录 (PFDR) 的支持存储。
  这部分内存作为节点在 `/reserved-memory` 节点下保留/分配。
  BMan 需要一段连续的物理内存范围，用于 BMan 空闲缓冲区代理记录 (FBPR) 的支持存储。
  这部分内存也作为节点在 `/reserved-memory` 节点下保留/分配。
  QMan FQD 内存节点必须命名为 "qman-fqd"。
  QMan PFDR 内存节点必须命名为 "qman-pfdr"。
  BMan FBPR 内存节点必须命名为 "bman-fbpr"。

  下面这些约束与 FQD 和 PFDR 的私有内存相关：
    - 大小必须为 2^(大小 + 1)，其中大小 = 11..29。即 4 KiB 到 1 GiB。
    - 对齐必须是内存大小的倍数。

  FQD 和 PFDR 的大小必须根据通过重置配置字 (RCW) 配置的硬件特性以及针对特定板卡的相关特性来选择（例如，引出的 MAC 数量、离线/主机命令 FMan 端口的数量等）。
  在设备树中配置的大小必须反映硬件能力，而不是特定应用的具体需求。

  关于保留内存区域的更多详细信息，请参阅 dtschema 项目中的 `reserved-memory/reserved-memory.yaml`

属性:
  $nodename:
    模式: '^(qman-fqd|qman-pfdr|bman-fbpr)+$'

  compatible:
    枚举:
      - fsl,qman-fqd
      - fsl,qman-pfdr
      - fsl,bman-fbpr

必需:
  - compatible

allOf:
  - $ref: reserved-memory.yaml

未评估属性: false

示例:
  - |
    reserved-memory {
        #address-cells = <2>;
        #size-cells = <2>;

        qman-fqd {
            compatible = "shared-dma-pool";
            size = <0 0x400000>;
            alignment = <0 0x400000>;
            no-map;
        };
    };
