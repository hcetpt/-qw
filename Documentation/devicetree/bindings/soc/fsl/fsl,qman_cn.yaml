# SPDX-许可证标识符: (GPL-2.0-only 或 BSD-2-Clause)
%YAML 1.2
---
$id: http://devicetree.org/schemas/soc/fsl/fsl,qman.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

标题: QorIQ DPAA 队列管理器

维护者:
  - Frank Li <Frank.Li@nxp.com>

描述:
  队列管理器是数据路径加速架构（DPAA）的一部分。QMan 支持将帧队列化并进行 QoS 调度至 CPU、网络接口以及 DPAA 逻辑模块，并保持流内数据包的顺序。除了提供基于流级别的队列外，还负责诸如 RED/WRED、拥塞通知和尾部丢弃等拥塞管理功能。此绑定涵盖了 CCSR 空间编程模型。

属性:
  compatible:
    oneOf:
      - const: fsl,qman
      - items:
          - enum:
              - fsl,ls1043a-qman
              - fsl,ls1046a-qman
          - const: fsl,qman
  reg:
    items:
      - 描述: |
          在 CCSR 地址空间内的寄存器区域

          QMan 的版本信息位于 QMAN_IP_REV_1/2 寄存器中，这些寄存器位于偏移地址 0xbf8 和 0xbfc 处

  interrupts:
    items:
      - 描述: 错误中断

  fsl,qman-portals:
    $ref: /schemas/types.yaml#/definitions/phandle
    描述: 参见 fsl,qman-port.yaml

  fsl,liodn:
    $ref: /schemas/types.yaml#/definitions/uint32-array
    描述:
      参见 pamu.txt，PAMU 属性用于静态 LIODN 分配

  fsl,iommu-parent:
    $ref: /schemas/types.yaml#/definitions/phandle
    描述:
      参见 pamu.txt，PAMU 属性用于动态 LIODN 分配

  clocks:
    maxItems: 1
    描述:
      输入时钟参考。其频率为平台时钟的一半

  memory-region:
    maxItems: 2
    描述:
      引用 QMan 私有内存节点的句柄列表（如下所述）。qman-fqd 节点必须首先出现，然后是 qman-pfdr 节点。
仅在通过直接连接端口 (DCP) 连接到 QMan 实例的 ARM 设备上使用
      DCP 必须链接到相应的 QMan 实例
fsl,qman:
    $ref: /schemas/types.yaml#/definitions/uint32-array
    描述:
      列表包含指向 QMan 实例的句柄和 DCP 索引对，该实例通过 DCP 与该设备相连

必需项:
  - compatible
  - reg
  - interrupts

附加属性: false

示例:
  - |
    #include <dt-bindings/interrupt-controller/irq.h>

    qman: qman@318000 {
        compatible = "fsl,qman";
        reg = <0x318000 0x1000>;
        interrupts = <16 IRQ_TYPE_EDGE_FALLING 1 3>;
        fsl,liodn = <0x16>;
        fsl,qman-portals = <&qportals>;
        memory-region = <&qman_fqd &qman_pfdr>;
        clocks = <&platform_pll 1>;
    };
