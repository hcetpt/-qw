# SPDX-许可证标识符: (GPL-2.0-only 或 BSD-2-Clause)
%YAML 1.2
---
$id: http://devicetree.org/schemas/i2c/qcom,i2c-geni-qcom.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

标题: Qualcomm 基于Geni的QUP I2C控制器

维护者:
  - Andy Gross <agross@kernel.org>
  - Bjorn Andersson <bjorn.andersson@linaro.org>

属性:
  compatible:
    枚举:
      - qcom,geni-i2c
      - qcom,geni-i2c-master-hub

  clocks:
    最少项目数: 1
    最大项目数: 2

  clock-names:
    最少项目数: 1
    最大项目数: 2

  clock-frequency:
    默认值: 100000

  dmas:
    最大项目数: 2

  dma-names:
    项目:
      - 常量: tx
      - 常量: rx

  interconnects:
    最少项目数: 2
    最大项目数: 3

  interconnect-names:
    最少项目数: 2
    最大项目数: 3

  interrupts:
    最大项目数: 1

  operating-points-v2: 真

  pinctrl-0: 真
  pinctrl-1: 真

  pinctrl-names:
    最少项目数: 1
    项目:
      - 常量: default
      - 常量: sleep

  power-domains:
    最大项目数: 1

  reg:
    最大项目数: 1

  required-opps:
    最大项目数: 1

必需:
  - compatible
  - interrupts
  - clocks
  - clock-names
  - reg

allOf:
  - $ref: /schemas/i2c/i2c-controller.yaml#
  - 如果:
      属性:
        compatible:
          包含:
            常量: qcom,geni-i2c-master-hub
    那么:
      属性:
        clocks:
          最少项目数: 2

        clock-names:
          项目:
            - 常量: se
            - 常量: core

        dmas: 假
        dma-names: 假

        interconnects:
          最大项目数: 2

        interconnect-names:
          项目:
            - 常量: qup-core
            - 常量: qup-config
    否则:
      属性:
        clocks:
          最大项目数: 1

        clock-names:
          常量: se

        interconnects:
          最少项目数: 3

        interconnect-names:
          项目:
            - 常量: qup-core
            - 常量: qup-config
            - 常量: qup-memory

未评估属性: 假

示例:
  - |
    #include <dt-bindings/interrupt-controller/arm-gic.h>
    #include <dt-bindings/clock/qcom,gcc-sc7180.h>
    #include <dt-bindings/interconnect/qcom,sc7180.h>
    #include <dt-bindings/power/qcom-rpmpd.h>

    i2c@88000 {
        compatible = "qcom,geni-i2c";
        reg = <0x00880000 0x4000>;
        clock-names = "se";
        clocks = <&gcc GCC_QUPV3_WRAP0_S0_CLK>;
        pinctrl-names = "default";
        pinctrl-0 = <&qup_i2c0_default>;
        interrupts = <GIC_SPI 601 IRQ_TYPE_LEVEL_HIGH>;
        #address-cells = <1>;
        #size-cells = <0>;
        interconnects = <&qup_virt MASTER_QUP_CORE_0 0 &qup_virt SLAVE_QUP_CORE_0 0>,
                        <&gem_noc MASTER_APPSS_PROC 0 &config_noc SLAVE_QUP_0 0>,
                        <&aggre1_noc MASTER_QUP_0 0 &mc_virt SLAVE_EBI1 0>;
        interconnect-names = "qup-core", "qup-config", "qup-memory";
        power-domains = <&rpmhpd SC7180_CX>;
        required-opps = <&rpmhpd_opp_low_svs>;
    };
