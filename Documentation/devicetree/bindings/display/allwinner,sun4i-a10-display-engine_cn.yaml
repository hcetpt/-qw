# SPDX-许可证标识符: GPL-2.0
%YAML 1.2
---
$id: http://devicetree.org/schemas/display/allwinner,sun4i-a10-display-engine.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

标题: Allwinner A10 显示引擎管道

维护者:
  - 陈宇蔡 <wens@csie.org>
  - 马克西姆·里帕德 <mripard@kernel.org>

描述: |
  显示引擎管道（及其入口点，因为它可以是后端或前端）表示为一个额外的节点。
  Allwinner A10 显示管道由以下几个组件组成，这些将在下面进行说明：

  对于显示管道中直至TCON的所有组件之间的连接，在同一层级有多个相同类型的组件时，
  本地终点ID必须与远程组件的索引相同。例如，如果远程终点是前端1，则本地终点ID必须是1。
  前端 0  [0] ------- [0]  后端 0  [0] ------- [0]  TCON 0
              [1] --   -- [1]             [1] --   -- [1]
                    \ /                         \ /
                     X                           X
                    / \                         / \
              [0] --   -- [0]             [0] --   -- [0]
  前端 1  [1] ------- [1]  后端 1  [1] ------- [1]  TCON 1

  对于上述所示的双管道系统，线条代表组件间的连接，而方括号内的数字对应于本地终点的ID。
  DE 2.0 混合器-TCON 连接也遵循同样的规则：

  混合器 0  [0] ----------- [0]  TCON 0
           [1] ----   ---- [1]
                   \ /
                    X
                   / \
           [0] ----   ---- [0]
  混合器 1  [1] ----------- [1]  TCON 1

属性:
  compatible:
    枚举:
      - allwinner,sun4i-a10-display-engine
      - allwinner,sun5i-a10s-display-engine
      - allwinner,sun5i-a13-display-engine
      - allwinner,sun6i-a31-display-engine
      - allwinner,sun6i-a31s-display-engine
      - allwinner,sun7i-a20-display-engine
      - allwinner,sun8i-a23-display-engine
      - allwinner,sun8i-a33-display-engine
      - allwinner,sun8i-a83t-display-engine
      - allwinner,sun8i-h3-display-engine
      - allwinner,sun8i-r40-display-engine
      - allwinner,sun8i-v3s-display-engine
      - allwinner,sun9i-a80-display-engine
      - allwinner,sun20i-d1-display-engine
      - allwinner,sun50i-a64-display-engine
      - allwinner,sun50i-h6-display-engine

  allwinner,pipelines:
    $ref: /schemas/types.yaml#/definitions/phandle-array
    minItems: 1
    maxItems: 2
    items:
      maxItems: 1
    描述: |
      可用的显示引擎前端（DE 1.0）或混合器（DE 2.0/3.0）

必需:
  - compatible
  - allwinner,pipelines

其他属性: false

如果:
  属性:
    compatible:
      包含:
        枚举:
          - allwinner,sun4i-a10-display-engine
          - allwinner,sun6i-a31-display-engine
          - allwinner,sun6i-a31s-display-engine
          - allwinner,sun7i-a20-display-engine
          - allwinner,sun8i-a83t-display-engine
          - allwinner,sun8i-r40-display-engine
          - allwinner,sun9i-a80-display-engine
          - allwinner,sun20i-d1-display-engine
          - allwinner,sun50i-a64-display-engine

那么:
  属性:
    allwinner,pipelines:
      minItems: 2

否则:
  属性:
    allwinner,pipelines:
      maxItems: 1

示例:
  - |
      de: display-engine {
          compatible = "allwinner,sun4i-a10-display-engine";
          allwinner,pipelines = <&fe0>, <&fe1>;
      };
