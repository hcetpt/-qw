# SPDX-文件许可人: (GPL-2.0 或 BSD-2-Clause)
# 版权所有 2019 NXP
%YAML 1.2
---
$id: http://devicetree.org/schemas/display/imx/nxp,imx8mq-dcss.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

标题: iMX8MQ 显示控制器子系统 (DCSS)

维护者:
  - Laurentiu Palcu <laurentiu.palcu@nxp.com>

描述:

  DCSS (显示控制器子系统) 用于生成最多三个显示缓冲区，组合这些缓冲区，并使用 HDMI 2.0a（带 HDCP 2.2）或 MIPI-DSI 驱动显示器。DCSS 支持高达 4kp60 的显示器。包括 HDR10 图像处理功能以提供能够驱动下一代高动态范围显示器的解决方案。

属性:
  compatible:
    常量: nxp,imx8mq-dcss

  reg:
    项目:
      - 描述: DCSS 基地址和大小，直到 IRQ 路由开始
      - 描述: DCSS BLKCTL 基地址和大小

  interrupts:
    项目:
      - 描述: 上下文加载器完成和错误中断
      - 描述: DTG 中断用于触发上下文加载器的时间点
      - 描述: DTG 中断用于 Vblank

  interrupt-names:
    项目:
      - 常量: ctxld
      - 常量: ctxld_kick
      - 常量: vblank

  clocks:
    项目:
      - 描述: 显示 APB 时钟，用于所有外围 PIO 访问接口
      - 描述: 显示 AXI 时钟，用于 DPR、Scaler 和 RTRAM_CTRL
      - 描述: RTRAM 时钟
      - 描述: 像素时钟，可以由 HDMI 物理层时钟或 MIPI 驱动
      - 描述: DTRC 时钟，视频解压缩器所需

  clock-names:
    项目:
      - 常量: apb
      - 常量: axi
      - 常量: rtrm
      - 常量: pix
      - 常量: dtrc

  assigned-clocks:
    项目:
      - 描述: IMX8MQ_CLK_DISP_AXI_ROOT 的句柄和时钟标识符
      - 描述: IMX8MQ_CLK_DISP_RTRM 的句柄和时钟标识符
      - 描述: IMX8MQ_VIDEO2_PLL1_REF_SEL 或 IMX8MQ_VIDEO_PLL1_REF_SEL 的句柄和时钟标识符

  assigned-clock-parents:
    项目:
      - 描述: IMX8MQ_SYS1_PLL_800M 的句柄和时钟标识符
      - 描述: IMX8MQ_SYS1_PLL_800M 的句柄和时钟标识符
      - 描述: IMX8MQ_CLK_27M 的句柄和时钟标识符

  assigned-clock-rates:
    项目:
      - 描述: 必须为 800 MHz
      - 描述: 必须为 400 MHz

  port:
    $ref: /schemas/graph.yaml#/properties/port
    描述:
      指向 HDMI/DP 或 MIPI 显示桥接器输入端口的端口节点

additionalProperties: false

示例:
  - |
    #include <dt-bindings/clock/imx8mq-clock.h>
    dcss: display-controller@32e00000 {
        compatible = "nxp,imx8mq-dcss";
        reg = <0x32e00000 0x2d000>, <0x32e2f000 0x1000>;
        interrupts = <6>, <8>, <9>;
        interrupt-names = "ctxld", "ctxld_kick", "vblank";
        interrupt-parent = <&irqsteer>;
        clocks = <&clk IMX8MQ_CLK_DISP_APB_ROOT>, <&clk IMX8MQ_CLK_DISP_AXI_ROOT>,
                 <&clk IMX8MQ_CLK_DISP_RTRM_ROOT>, <&clk IMX8MQ_VIDEO2_PLL_OUT>,
                 <&clk IMX8MQ_CLK_DISP_DTRC>;
        clock-names = "apb", "axi", "rtrm", "pix", "dtrc";
        assigned-clocks = <&clk IMX8MQ_CLK_DISP_AXI>, <&clk IMX8MQ_CLK_DISP_RTRM>,
                          <&clk IMX8MQ_VIDEO2_PLL1_REF_SEL>;
        assigned-clock-parents = <&clk IMX8MQ_SYS1_PLL_800M>, <&clk IMX8MQ_SYS1_PLL_800M>,
                                 <&clk IMX8MQ_CLK_27M>;
        assigned-clock-rates = <800000000>,
                               <400000000>;
        port {
            dcss_out: endpoint {
                remote-endpoint = <&hdmi_in>;
            };
        };
    };
