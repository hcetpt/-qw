# SPDX-许可证标识符: GPL-2.0
%YAML 1.2
---
$id: http://devicetree.org/schemas/display/allwinner,sun6i-a31-mipi-dsi.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

标题: Allwinner A31 MIPI-DSI 控制器

维护者:
  - 陈宇蔡 <wens@csie.org>
  - 马克西姆·里帕德 <mripard@kernel.org>

属性:
  compatible:
    oneOf:
      - 枚举:
          - allwinner,sun6i-a31-mipi-dsi
          - allwinner,sun50i-a64-mipi-dsi
          - allwinner,sun50i-a100-mipi-dsi
      - items:
          - 常量: allwinner,sun20i-d1-mipi-dsi
          - 常量: allwinner,sun50i-a100-mipi-dsi

  reg:
    最大项数: 1

  interrupts:
    最大项数: 1

  clocks:
    最小项数: 1
    items:
      - 描述: 总线时钟
      - 描述: 模块时钟

  clock-names:
    items:
      - 常量: bus
      - 常量: mod

  resets:
    最大项数: 1

  vcc-dsi-supply:
    描述: DSI 编码器的 VCC-DSI 电源供应

  phys:
    最大项数: 1

  phy-names:
    常量: dphy

  port:
    $ref: /schemas/graph.yaml#/properties/port
    描述:
      端口应该是输入端点，通常来自关联的 TCON。

必需:
  - compatible
  - reg
  - interrupts
  - clocks
  - phys
  - phy-names
  - resets
  - port

全部:
  - $ref: dsi-controller.yaml#
  - 如果:
      属性:
        compatible:
          包含:
            枚举:
              - allwinner,sun6i-a31-mipi-dsi
              - allwinner,sun50i-a100-mipi-dsi

    那么:
      属性:
        clocks:
          最小项数: 2

      必需:
        - clock-names

    否则:
      属性:
        clocks:
          最大项数: 1

  - 如果:
      属性:
        compatible:
          包含:
            枚举:
              - allwinner,sun6i-a31-mipi-dsi
              - allwinner,sun50i-a64-mipi-dsi

    那么:
      必需:
        - vcc-dsi-supply

未评估属性: false

示例:
  - |
    dsi0: dsi@1ca0000 {
        compatible = "allwinner,sun6i-a31-mipi-dsi";
        reg = <0x01ca0000 0x1000>;
        interrupts = <0 89 4>;
        clocks = <&ccu 23>, <&ccu 96>;
        clock-names = "bus", "mod";
        resets = <&ccu 4>;
        phys = <&dphy0>;
        phy-names = "dphy";
        vcc-dsi-supply = <&reg_dcdc1>;
        #address-cells = <1>;
        #size-cells = <0>;

        panel@0 {
                compatible = "bananapi,lhr050h41", "ilitek,ili9881c";
                reg = <0>;
                power-supply = <&reg_display>;
                reset-gpios = <&r_pio 0 5 1>; /* PL05 */
                backlight = <&pwm_bl>;
        };

        port {
            dsi0_in_tcon0: endpoint {
                remote-endpoint = <&tcon0_out_dsi0>;
            };
        };
    };
