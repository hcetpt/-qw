# SPDX-许可证标识符: GPL-2.0-only
%YAML 1.2
---
$id: http://devicetree.org/schemas/display/samsung/samsung,exynos-hdmi.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

标题: Samsung Exynos 系统芯片 HDMI

维护者:
  - Inki Dae <inki.dae@samsung.com>
  - Seung-Woo Kim <sw0312.kim@samsung.com>
  - Kyungmin Park <kyungmin.park@samsung.com>
  - Krzysztof Kozlowski <krzk@kernel.org>

属性:
  compatible:
    枚举:
      - samsung,exynos4210-hdmi
      - samsung,exynos4212-hdmi
      - samsung,exynos5420-hdmi
      - samsung,exynos5433-hdmi

  clocks:
    最小项目数: 5
    最大项目数: 10

  clock-names:
    最小项目数: 5
    最大项目数: 10

  ddc:
    $ref: /schemas/types.yaml#/definitions/phandle
    描述:
      HDMI DDC 节点的 phandle
hdmi-en-supply:
    描述:
      提供 HDMI 连接器上的 DCC 线路电压源。当没有为 DDC EEPROM 提供电源时，某些电视机不会拉起 HPD（热插拔检测）线，这会导致 HDMI 块保持关闭状态。如果提供此电源调节器，则允许电视机正确地发出 HPD 事件信号。
hpd-gpios:
    最大项目数: 1
    描述:
      连接到 HPD 的 GPIO 线

  interrupts:
    最大项目数: 1

  phy:
    $ref: /schemas/types.yaml#/definitions/phandle
    描述: HDMI PHY 节点的 phandle
ports:
    $ref: /schemas/graph.yaml#/properties/ports
    描述:
      包含一个连接到麦克风节点的端口
power-domains:
    最大项目数: 1

  reg:
    最大项目数: 1

  samsung,syscon-phandle:
    $ref: /schemas/types.yaml#/definitions/phandle
    描述:
      PMU 系统控制器节点的 phandle
samsung,sysreg-phandle:
    $ref: /schemas/types.yaml#/definitions/phandle
    描述:
      DISP 系统控制器接口的 phandle
'#sound-dai-cells':
    常量: 0

  vdd-supply:
    描述:
      VDD 1.0V HDMI TX
vdd_osc-supply:
    描述:
      VDD 1.8V HDMI OSC
vdd_pll-supply:
    描述:
      VDD 1.0V HDMI PLL
这段文本包含了特定硬件组件的配置描述，主要用于定义与Samsung Exynos 5433 HDMI相关的设备树属性。下面是翻译成中文的内容：

所需属性:
  - compatible（兼容性）
  - clocks（时钟）
  - clock-names（时钟名称）
  - ddc（数字显示通道）
  - hpd-gpios（热插拔检测GPIOs）
  - interrupts（中断）
  - phy（物理层）
  - reg（寄存器）
  - samsung,syscon-phandle（Samsung系统控制句柄）
  - `#sound-dai-cells`（音频DAI单元格数量）
  - vdd-supply（VDD电源供应）
  - vdd_osc-supply（VDD_Osc电源供应）
  - vdd_pll-supply（VDD_PLL电源供应）

全部包含:
  - 如果:
      属性:
        compatible（兼容性）:
          包含:
            常量: samsung,exynos5433-hdmi
    那么:
      属性:
        clocks（时钟）:
          项:
            - 描述: HDMI IP APB总线的门控时钟
            - 描述: HDMI-PHY IP APB总线的门控时钟
            - 描述: HDMI TMDS时钟的门控时钟
            - 描述: HDMI像素时钟的门控时钟
            - 描述: 由HDMI-PHY产生的TMDS时钟
            - 描述: 在HDMI-PHY关闭和运行时分别用于切换oscclk和tmds_clko的多路复用器
            - 描述: 由HDMI-PHY产生的像素时钟
            - 描述: 在HDMI-PHY关闭和运行时分别用于切换oscclk和pixel_clko的多路复用器
            - 描述: 振荡器时钟，在HDMI-PHY不运行的情况下作为*_user时钟的父时钟
            - 描述: HDMI SPDIF时钟的门控时钟
This DT (Device Tree) snippet configures an HDMI controller for the Exynos5433 SoC (System on Chip). Below is a translation and explanation of the provided code into Chinese, along with explanations of the key components.

### 配置说明:

```yaml
# 如果存在 samsung,sysreg-phandle 属性
clocks:
  items:
    - const: hdmi_pclk # HDMI PCLK (Pixel Clock)
    - const: hdmi_i_pclk # HDMI I PCLK (Internal Pixel Clock)
    - const: i_tmds_clk # TMDS (Transition Minimized Differential Signaling) Clock Input
    - const: i_pixel_clk # Pixel Clock Input (one of the possible inputs for the HDMI clock multiplexer)
    - const: tmds_clko # TMDS Clock Output (one of the two possible inputs for the HDMI clock multiplexer)
    - const: tmds_clko_user # User TMDS Clock Output
    - const: pixel_clko # Pixel Clock Output
    - const: pixel_clko_user # User Pixel Clock Output
    - const: oscclk # Oscillator Clock
    - const: i_spdif_clk # SPDIF (Sony/Philips Digital Interface) Clock Input
clock-names:
  items:
    - const: hdmi
    - const: sclk_hdmi # HDMI Special Clock
    - const: sclk_pixel # Pixel Special Clock
    - const: sclk_hdmiphy # HDMI PHY Clock
    - const: mout_hdmi # HDMI MOUT (Multiplexer Output)

# 如果不存在 samsung,sysreg-phandle 属性，则不需要上述配置
additionalProperties: false
```

### 示例代码:
```yaml
- |
  #include <dt-bindings/clock/exynos5433.h>
  #include <dt-bindings/gpio/gpio.h>
  #include <dt-bindings/interrupt-controller/arm-gic.h>

  hdmi@13970000 { # HDMI 控制器的设备树节点
      compatible = "samsung,exynos5433-hdmi"; # 兼容性声明
      reg = <0x13970000 0x70000>; # 寄存器基地址和大小
      interrupts = <GIC_SPI 208 IRQ_TYPE_LEVEL_HIGH>; # 中断配置
      clocks = <&cmu_disp CLK_PCLK_HDMI>, # HDMI IP Bus Clock
               <&cmu_disp CLK_PCLK_HDMIPHY>, # HDMI PHY Bus Clock
               <&cmu_disp CLK_PHYCLK_HDMIPHY_TMDS_CLKO>, # HDMI PHY TMDS Clock Output
               <&cmu_disp CLK_PHYCLK_HDMI_PIXEL>, # HDMI Pixel Clock
               <&cmu_disp CLK_PHYCLK_HDMIPHY_TMDS_CLKO_PHY>, # HDMI PHY TMDS Clock Output for PHY
               <&cmu_disp CLK_MOUT_PHYCLK_HDMIPHY_TMDS_CLKO_USER>, # User TMDS Clock Output for PHY
               <&cmu_disp CLK_PHYCLK_HDMIPHY_PIXEL_CLKO_PHY>, # HDMI PHY Pixel Clock Output for PHY
               <&cmu_disp CLK_MOUT_PHYCLK_HDMIPHY_PIXEL_CLKO_USER>, # User Pixel Clock Output for PHY
               <&xxti>, # Oscillator Clock
               <&cmu_disp CLK_SCLK_HDMI_SPDIF>; # SPDIF Clock
      clock-names = "hdmi_pclk", # HDMI PCLK (Pixel Clock)
                     "hdmi_i_pclk", # HDMI I PCLK (Internal Pixel Clock)
                     "i_tmds_clk", # TMDS (Transition Minimized Differential Signaling) Clock Input
                     "i_pixel_clk", # Pixel Clock Input (one of the possible inputs for the HDMI clock multiplexer)
                     "tmds_clko", # TMDS Clock Output (one of the two possible inputs for the HDMI clock multiplexer)
                     "tmds_clko_user", # User TMDS Clock Output
                     "pixel_clko", # Pixel Clock Output
                     "pixel_clko_user", # User Pixel Clock Output
                     "oscclk", # Oscillator Clock
                     "i_spdif_clk"; # SPDIF (Sony/Philips Digital Interface) Clock Input
      phy = <&hdmiphy>; # HDMI PHY 设备树节点
      ddc = <&hsi2c_11>; # DDC (Display Data Channel) 设备树节点
      samsung,syscon-phandle = <&syscon_disp>; # System Control 设备树节点
      samsung,sysreg-phandle = <&pmu_system_controller>; # Power Management Unit System Controller 设备树节点
      #sound-dai-cells = <0>; # 不使用音频设备抽象接口 (D-AI)

      hpd-gpios = <&gpa3 0 GPIO_ACTIVE_HIGH>; # HDMI 热插拔检测 (HPD) GPIO 配置
      vdd-supply = <&ldo6_reg>; # VDD (Power Supply) 配置
      vdd_osc-supply = <&ldo7_reg>; # VDD_OSC (Oscillator Power Supply) 配置
      vdd_pll-supply = <&ldo6_reg>; # VDD_PLL (Phase-Locked Loop Power Supply) 配置

      ports { # HDMI 端口配置
          #address-cells = <1>;
          #size-cells = <0>;

          port@0 { # 第一个端口配置
              reg = <0>;
              hdmi_to_tv: endpoint { # HDMI 到 TV 的连接点
                  remote-endpoint = <&tv_to_hdmi>; # 远程端点，TV 到 HDMI
              };
          };

          port@1 { # 第二个端口配置
              reg = <1>;
              hdmi_to_mhl: endpoint { # HDMI 到 MHL (Mobile High-Definition Link) 的连接点
                  remote-endpoint = <&mhl_to_hdmi>; # 远程端点，MHL 到 HDMI
              };
          };
      };
  };
```

此示例配置了一个基于Exynos5433的HDMI控制器，并详细指定了其所需的时钟、GPIO、电源管理等配置。
