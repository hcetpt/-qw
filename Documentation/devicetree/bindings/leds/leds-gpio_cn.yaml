# SPDX-许可证标识符: GPL-2.0-only
%YAML 1.2
---
$id: http://devicetree.org/schemas/leds/leds-gpio.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

标题: 连接到GPIO线的LED

维护者:
  - Jacek Anaszewski <jacek.anaszewski@gmail.com>
  - Pavel Machek <pavel@ucw.cz>

描述:
  每个LED都作为gpio-leds设备的一个子节点表示。每个节点的名字代表了相应的LED的名字。
属性:
  compatible:
    常量: gpio-leds

模式属性:
  # 首选的形式是以下这种，但也可以退回到在节点名称中的任何位置仅使用'led'，以至少捕获一些子节点
"^(led-[0-9a-f]$|led)":
    类型: 对象
    $ref: common.yaml#
    不评估的属性: false

    属性:
      gpios:
        最大项数: 1

      retain-state-suspended:
        描述:
          暂停状态可以被保留。例如充电LED的GPIO
类型: 布尔值

      retain-state-shutdown:
        描述:
          在关机时保留LED的状态。对于BMC系统很有用，例如当主机仍然运行而BMC重启时
类型: 布尔值

    必需:
      - gpios

额外属性: false

示例:
  - |

    #include <dt-bindings/gpio/gpio.h>
    #include <dt-bindings/leds/common.h>

    leds {
        compatible = "gpio-leds";
        led-0 {
            gpios = <&mcu_pio 0 GPIO_ACTIVE_LOW>;
            linux,default-trigger = "disk-activity";
            function = LED_FUNCTION_DISK;
        };

        led-1 {
            gpios = <&mcu_pio 1 GPIO_ACTIVE_HIGH>;
            /* 如果BIOS检测到硬件故障，则保持LED亮起 */
            default-state = "keep";
            function = LED_FUNCTION_FAULT;
        };
    };

    run-control {
        compatible = "gpio-leds";
        led-0 {
            gpios = <&mpc8572 6 GPIO_ACTIVE_HIGH>;
            color = <LED_COLOR_ID_RED>;
            default-state = "off";
        };
        led-1 {
            gpios = <&mpc8572 7 GPIO_ACTIVE_HIGH>;
            color = <LED_COLOR_ID_GREEN>;
            default-state = "on";
        };
    };
