# SPDX-许可证标识符: GPL-2.0-only 或 BSD-2-Clause
%YAML 1.2
---
$id: http://devicetree.org/schemas/leds/allwinner,sun50i-a100-ledc.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

标题: Allwinner A100 LED 控制器

维护者:
  - Samuel Holland <samuel@sholland.org>

描述:
  在 Allwinner sunxi 系统级芯片(SoC)中找到的 LED 控制器使用单线串行接口来驱动最多 1024 个 RGB LED。
属性:
  compatible:
    oneOf:
      - const: allwinner,sun50i-a100-ledc
      - items:
          - enum:
              - allwinner,sun20i-d1-ledc
              - allwinner,sun50i-r329-ledc
          - const: allwinner,sun50i-a100-ledc

  reg:
    maxItems: 1

  "#address-cells":
    const: 1

  "#size-cells":
    const: 0

  interrupts:
    maxItems: 1

  clocks:
    items:
      - description: 总线时钟
      - description: 模块时钟

  clock-names:
    items:
      - const: bus
      - const: mod

  resets:
    maxItems: 1

  dmas:
    maxItems: 1
    description: 发送 DMA 通道

  dma-names:
    const: tx

  allwinner,pixel-format:
    description: 像素格式（子像素传输顺序），默认为 "grb"
    enum:
      - bgr
      - brg
      - gbr
      - grb
      - rbg
      - rgb

  allwinner,t0h-ns:
    default: 336
    description: 发送 "0" 位时高脉冲的长度

  allwinner,t0l-ns:
    default: 840
    description: 发送 "0" 位时低脉冲的长度

  allwinner,t1h-ns:
    default: 882
    description: 发送 "1" 位时高脉冲的长度

  allwinner,t1l-ns:
    default: 294
    description: 发送 "1" 位时低脉冲的长度

  allwinner,treset-ns:
    default: 300000
    description: 传输帧之间的最小延迟

模式匹配属性:
  "^multi-led@[0-9a-f]+$":
    type: object
    $ref: leds-class-multicolor.yaml#
    unevaluatedProperties: false
    properties:
      reg:
        minimum: 0
        maximum: 1023
        description: LED 在序列中的索引（必须是连续的）

    required:
      - reg

必需:
  - compatible
  - reg
  - interrupts
  - clocks
  - clock-names
  - resets

additionalProperties: false

示例:
  - |
    #include <dt-bindings/interrupt-controller/irq.h>
    #include <dt-bindings/leds/common.h>

    ledc: led-controller@2008000 {
      compatible = "allwinner,sun20i-d1-ledc",
                   "allwinner,sun50i-a100-ledc";
      reg = <0x2008000 0x400>;
      interrupts = <36 IRQ_TYPE_LEVEL_HIGH>;
      clocks = <&ccu 12>, <&ccu 34>;
      clock-names = "bus", "mod";
      resets = <&ccu 12>;
      dmas = <&dma 42>;
      dma-names = "tx";
      #address-cells = <1>;
      #size-cells = <0>;

      multi-led@0 {
        reg = <0x0>;
        color = <LED_COLOR_ID_RGB>;
        function = LED_FUNCTION_INDICATOR;
      };
    };

..
