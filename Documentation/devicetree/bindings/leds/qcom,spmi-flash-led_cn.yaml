# SPDX-文件许可人: (GPL-2.0-only 或 BSD-2-Clause)
%YAML 1.2
---
$id: http://devicetree.org/schemas/leds/qcom,spmi-flash-led.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

标题: 高通技术公司 PMIC 内部的闪光灯 LED 设备

维护者:
  - 吴丰林 <quic_fenglinw@quicinc.com>

描述: |
  闪光灯 LED 控制器存在于某些高通技术公司的电源管理集成电路(PMIC)中。
  闪光灯 LED 模块可以支持不同数量的 LED 通道，例如 3 或 4 个。它们之间有一些不同的寄存器，
  但都可以支持每个通道最大 1.5A 的电流，并且还支持将两个通道组合在一起以提供最大 2A 的电流。
  电流会在每个通道上对称分配，并且会同时启用和禁用。

属性:
  compatible:
    items:
      - 枚举:
          - qcom,pm6150l-flash-led
          - qcom,pm8150c-flash-led
          - qcom,pm8150l-flash-led
          - qcom,pm8350c-flash-led
          - qcom,pm8550-flash-led
          - qcom,pmi8998-flash-led
      - 常量: qcom,spmi-flash-led

  reg:
    maxItems: 1

模式属性:
  "^led-[0-3]$":
    类型: 对象
    $ref: common.yaml#
    不评估属性: false
    描述:
      表示连接到闪光灯 LED 通道输出的实际 LED 组件

属性:
      led-sources:
        描述:
          连接到实际 LED 的闪光灯 LED 通道的硬件索引
        全部:
          - 最小项: 1
            最大项: 2
            项:
              枚举: [1, 2, 3, 4]

      led-max-microamp:
        任一:
          - 最小值: 5000
            最大值: 500000
            倍数: 5000
          - 最小值: 10000
            最大值: 1000000
            倍数: 10000

      flash-max-microamp:
        任一:
          - 最小值: 12500
            最大值: 1500000
            倍数: 12500
          - 最小值: 25000
            最大值: 2000000
            倍数: 25000

      flash-max-timeout-us:
        最小值: 10000
        最大值: 1280000
        倍数: 10000

    必需:
      - led-sources
      - led-max-microamp

必需:
  - compatible
  - reg

额外属性: false

示例:
  - |
    #include <dt-bindings/leds/common.h>

    pmic {
        #address-cells = <1>;
        #size-cells = <0>;

        led-controller@ee00 {
            compatible = "qcom,pm8350c-flash-led", "qcom,spmi-flash-led";
            reg = <0xee00>;

            led-0 {
                function = LED_FUNCTION_FLASH;
                color = <LED_COLOR_ID_WHITE>;
                led-sources = <1>, <4>;
                led-max-microamp = <300000>;
                flash-max-microamp = <2000000>;
                flash-max-timeout-us = <1280000>;
                function-enumerator = <0>;
            };

            led-1 {
                function = LED_FUNCTION_FLASH;
                color = <LED_COLOR_ID_YELLOW>;
                led-sources = <2>, <3>;
                led-max-microamp = <300000>;
                flash-max-microamp = <2000000>;
                flash-max-timeout-us = <1280000>;
                function-enumerator = <1>;
            };
        };
    };
