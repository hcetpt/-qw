# SPDX-许可证标识符: (GPL-2.0-only 或 BSD-2-Clause)
%YAML 1.2
---
$id: http://devicetree.org/schemas/leds/register-bit-led.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

标题: 注册位 LED

维护者:
  - Linus Walleij <linus.walleij@linaro.org>

描述: |+
  注册位 LED 用于与 syscon 多功能设备一起工作，在特定寄存器中的单个位可以打开/关闭一个 LED。注册位 LED 作为 syscon 设备的子节点出现，并带有正确的兼容字符串。
关于 syscon 绑定，请参阅：
  文档/devicetree/bindings/mfd/syscon.yaml

allOf:
  - $ref: /schemas/leds/common.yaml#

属性:
  $nodename:
    描述:
      单元地址形式为 @<寄存器地址>,<位偏移>
    模式: '^led@[0-9a-f]+,[0-9a-f]{1,2}$'

  compatible:
    常量: register-bit-led

  reg:
    描述:
      寄存器地址和大小
    最大项数: 1

  mask:
    描述:
      控制此 LED 的寄存器中该位的掩码
    $ref: /schemas/types.yaml#/definitions/uint32
    枚举:
      [ 0x1, 0x2, 0x4, 0x8, 0x10, 0x20, 0x40, 0x80, 0x100, 0x200, 0x400, 0x800,
        0x1000, 0x2000, 0x4000, 0x8000, 0x10000, 0x20000, 0x40000, 0x80000,
        0x100000, 0x200000, 0x400000, 0x800000, 0x1000000, 0x2000000, 0x4000000,
        0x8000000, 0x10000000, 0x20000000, 0x40000000, 0x80000000 ]

  offset:
    描述:
      控制此 LED 的寄存器的偏移量
    $ref: /schemas/types.yaml#/definitions/uint32
    过时: true

必需:
  - compatible
  - mask
  - reg

未评估属性: false

示例:
  - |

    syscon@10000000 {
        compatible = "arm,realview-pb1176-syscon", "syscon", "simple-mfd";
        reg = <0x10000000 0x1000>;
        #address-cells = <1>;
        #size-cells = <1>;
        ranges = <0x0 0x10000000 0x1000>;

        led@8,0 {
            compatible = "register-bit-led";
            reg = <0x08 0x04>;
            offset = <0x08>;
            mask = <0x01>;
            label = "versatile:0";
            linux,default-trigger = "heartbeat";
            default-state = "on";
        };
        led@8,1 {
            compatible = "register-bit-led";
            reg = <0x08 0x04>;
            offset = <0x08>;
            mask = <0x02>;
            label = "versatile:1";
            default-state = "off";
        };
        led@8,2 {
            compatible = "register-bit-led";
            reg = <0x08 0x04>;
            offset = <0x08>;
            mask = <0x04>;
            label = "versatile:2";
            default-state = "off";
        };
    };
..
