# SPDX-License-Identifier: (GPL-2.0-only OR BSD-2-Clause)
%YAML 1.2
---
$id: http://devicetree.org/schemas/power/reset/atmel,at91sam9260-shdwc.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: Microchip AT91 SHDWC 断电控制器

maintainers:
  - Claudiu Beznea <claudiu.beznea@microchip.com>

description: |
  Microchip AT91 SHDWC 断电控制器控制电源供应 VDDIO 和 VDDCORE，以及在去抖输入线上检测唤醒。

properties:
  compatible:
    enum:
      - atmel,at91sam9260-shdwc
      - atmel,at91sam9rl-shdwc
      - atmel,at91sam9x5-shdwc

  reg:
    maxItems: 1

  clocks:
    maxItems: 1

  atmel,wakeup-mode:
    description: 唤醒模式的操作模式
    $ref: /schemas/types.yaml#/definitions/string
    enum: [ none, high, low, any ]

  atmel,wakeup-counter:
    description: 唤醒 0 上的计数器
    $ref: /schemas/types.yaml#/definitions/uint32
    minimum: 0
    maximum: 15

  atmel,wakeup-rtt-timer:
    description: 启用实时定时器唤醒
    type: boolean

  atmel,wakeup-rtc-timer:
    description: 启用实时时钟唤醒
    type: boolean

required:
  - compatible
  - reg
  - clocks

allOf:
  - if:
      properties:
        compatible:
          contains:
            const: atmel,at91sam9x5-shdwc
    then:
      properties:
        atmel,wakeup-rtt-timer: false

  - if:
      properties:
        compatible:
          contains:
            const: atmel,at91sam9260-shdwc
    then:
      properties:
        atmel,wakeup-rtc-timer: false

additionalProperties: false

examples:
  - |
    shdwc: poweroff@fffffd10 {
        compatible = "atmel,at91sam9260-shdwc";
        reg = <0xfffffd10 0x10>;
        clocks = <&clk32k>;
    };
