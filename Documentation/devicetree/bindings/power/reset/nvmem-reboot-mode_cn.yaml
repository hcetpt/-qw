# SPDX-许可证标识符: (GPL-2.0-only 或 BSD-2-Clause)
%YAML 1.2
---
$id: http://devicetree.org/schemas/power/reset/nvmem-reboot-mode.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: 通用 NVMEM 重启模式

maintainers:
  - Bartosz Golaszewski <bartosz.golaszewski@linaro.org>

description:
  该驱动程序从重启模式驱动程序获取重启模式的魔法值，并将其存储在名为 "reboot-mode" 的 NVMEM 单元中。然后，引导加载程序可以读取它，并根据该值采取不同的行动。

properties:
  compatible:
    const: nvmem-reboot-mode

  nvmem-cells:
    description:
      指向存储表示重启模式的供应商特定魔法值的 nvmem-cells 节点的 phandle
maxItems: 1

  nvmem-cell-names:
    items:
      - const: reboot-mode

allOf:
  - $ref: reboot-mode.yaml#

required:
  - compatible
  - nvmem-cells
  - nvmem-cell-names

unevaluatedProperties: false

examples:
  - |
    reboot-mode {
        compatible = "nvmem-reboot-mode";
        nvmem-cells = <&reboot_reason>;
        nvmem-cell-names = "reboot-mode";
        mode-recovery = <0x01>;
        mode-bootloader = <0x02>;
    };
