# SPDX-License-Identifier: (GPL-2.0-only OR BSD-2-Clause)
%YAML 1.2
---
$id: http://devicetree.org/schemas/power/reset/gpio-restart.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

标题: 由GPIO控制的重启

维护者:
  - Sebastian Reichel <sre@kernel.org>

描述: >
  驱动一个GPIO线，该线可以从重启处理程序中用来重启系统。
此绑定支持电平触发和边沿触发的重启。在驱动加载时，驱动会请求给定的GPIO线并安装重启处理程序。如果可选属性
  'open-source' 不存在，则GPIO线将被置于非活动状态。否则，在发起重启之前不会驱动它。
当系统重启时，将按照优先级顺序调用重启处理程序。GPIO配置为输出，并被驱动至活动状态，触发电平触发的重启条件。
这也将导致非活动到活动的边沿条件，从而触发正边沿触发的重启。在指定的active-delay之后，
GPIO被设置为非活动状态，从而触发负边沿触发的重启。在指定的inactive-delay之后，GPIO再次被驱动至活动状态。
在指定的wait-delay之后，重启处理程序完成，允许尝试其他重启处理程序。

allOf:
  - $ref: restart-handler.yaml#

属性:
  compatible:
    常量: gpio-restart

  gpios:
    描述: 要设置为高或低的GPIO，参见 "gpios 属性" 在
      文档/devicetree/bindings/gpio/gpio.txt。如果要通过使引脚处于低电平来重启板子，请将其设置为 "Active Low"，
      否则将GPIO设置为 "Active High"。

  open-source:
    $ref: /schemas/types.yaml#/definitions/flag
    描述: 将GPIO视为开路源，并推迟到重启开始时才进行驱动。如果没有指定这个可选属性，
      则GPIO将以非活动状态初始化为输出。

  priority:
    默认值: 129

  active-delay:
    $ref: /schemas/types.yaml#/definitions/uint32
    描述: 驱动GPIO至活动状态后的延迟（默认100）[毫秒]
    默认值: 100

  inactive-delay:
    $ref: /schemas/types.yaml#/definitions/uint32
    描述: 驱动GPIO至非活动状态后的延迟（默认100）[毫秒]
    默认值: 100

  wait-delay:
    $ref: /schemas/types.yaml#/definitions/uint32
    描述: 完成重启序列后的等待延迟（默认3000）[毫秒]
    默认值: 3000

其他属性: false

必需:
  - compatible
  - gpios

示例:
  - |
    gpio-restart {
      compatible = "gpio-restart";
      gpios = <&gpio 4 0>;
      priority = <128>;
      active-delay = <100>;
      inactive-delay = <100>;
      wait-delay = <3000>;
    };
