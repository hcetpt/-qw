# SPDX-文件许可人: GPL-2.0
%YAML 1.2
---
$id: http://devicetree.org/schemas/power/supply/twl4030-charger.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: TWL4030 BCI (电池充电器接口)

description: |
  电池充电器需要与USB PHY交互以确定何时允许充电，以及何时发生连接或断开。
  PHY的选择不能在硬件级别进行配置，因此在设备树中明确配置没有意义。
  如果BCI节点有一个兼容"ti,twl4030-usb"的同级节点，则使用该节点来判断何时以及如何使用USB电源进行充电。
maintainers:
  - Sebastian Reichel <sre@kernel.org>

allOf:
  - $ref: power-supply.yaml#

properties:
  compatible:
    const: ti,twl4030-bci

  interrupts:
    minItems: 2
    maxItems: 2

  ti,bb-uvolt:
    $ref: /schemas/types.yaml#/definitions/uint32
    description: 用于为备用电池充电的微伏特数

  ti,bb-uamp:
    $ref: /schemas/types.yaml#/definitions/uint32
    description: 用于为备用电池充电的微安培数

  io-channels:
    items:
      - description: 辅助充电电压通道

  io-channel-names:
    items:
      - const: vac

  bci3v1-supply:
    description: 3.1V USB 稳压器

required:
  - compatible
  - interrupts

additionalProperties: false

examples:
  - |
    pmic {
      charger {
        compatible = "ti,twl4030-bci";
        interrupts = <9>, <2>;
        ti,bb-uvolt = <3200000>;
        ti,bb-uamp = <150>;
        io-channels = <&twl_madc 11>;
        io-channel-names = "vac";
      };
    };
