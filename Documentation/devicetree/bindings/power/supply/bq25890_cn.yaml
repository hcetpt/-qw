# SPDX-许可证标识符: GPL-2.0
# 版权 (C) 2021 Sebastian Reichel
%YAML 1.2
---
$id: http://devicetree.org/schemas/power/supply/bq25890.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: Bq25890、bq25892、bq25895 和 bq25896 锂离子充电器

maintainers:
  - Sebastian Reichel <sre@kernel.org>

allOf:
  - $ref: power-supply.yaml#

properties:
  compatible:
    oneOf:
      - enum:
          - ti,bq25890
      - items:
          - enum:
              - ti,bq25892
              - ti,bq25895
              - ti,bq25896
          - const: ti,bq25890

  reg:
    maxItems: 1

  interrupts:
    maxItems: 1

  ti,battery-regulation-voltage:
    $ref: /schemas/types.yaml#/definitions/uint32
    description: 最大充电电压（以微伏为单位）

  ti,charge-current:
    $ref: /schemas/types.yaml#/definitions/uint32
    description: 最大充电电流（以微安为单位）

  ti,termination-current:
    $ref: /schemas/types.yaml#/definitions/uint32
    description: |
      当恒压阶段的电流降至此值以下时，充电将终止（以微安为单位）

  ti,precharge-current:
    $ref: /schemas/types.yaml#/definitions/uint32
    description: 预充阶段的最大充电电流（以微安为单位）

  ti,minimum-sys-voltage:
    $ref: /schemas/types.yaml#/definitions/uint32
    description: |
      当电池正在充电且低于最小系统电压时，
      系统将被调节至高于最小-sys-voltage 设置（以微伏为单位）

  ti,boost-voltage:
    $ref: /schemas/types.yaml#/definitions/uint32
    description: 提升模式下的 VBUS 电压水平（以微伏为单位）

  ti,boost-max-current:
    $ref: /schemas/types.yaml#/definitions/uint32
    description: 提升模式下允许的最大电流（以微安为单位）

  ti,boost-low-freq:
    description: 提升模式频率将为 500kHz，否则为 1.5MHz
    type: 布尔值

  ti,use-ilim-pin:
    description: |
      将使用 ILIM 电阻器，并且输入电流将是电阻器设置和 IINLIM 寄存器设置中较低的一个
    type: 布尔值

  ti,thermal-regulation-threshold:
    $ref: /schemas/types.yaml#/definitions/uint32
    description: |
      充电电流降低以避免过热的温度阈值（以摄氏度为单位）。
      如果省略，则使用默认设置（120 度）

  ti,ibatcomp-micro-ohms:
    description: 与电池串联的电阻器的值（以微欧姆为单位）

  ti,ibatcomp-clamp-microvolt:
    description: 由于预期在串联电阻器上的电压降而产生的最大充电电压调整

required:
  - compatible
  - reg
  - interrupts
  - ti,battery-regulation-voltage
  - ti,charge-current
  - ti,termination-current
  - ti,precharge-current
  - ti,minimum-sys-voltage
  - ti,boost-voltage
  - ti,boost-max-current

unevaluatedProperties: false

examples:
  - |
    #include <dt-bindings/interrupt-controller/irq.h>
    i2c {
      #address-cells = <1>;
      #size-cells = <0>;

      charger@6a {
        compatible = "ti,bq25890";
        reg = <0x6a>;

        interrupt-parent = <&gpio1>;
        interrupts = <16 IRQ_TYPE_EDGE_FALLING>;

        ti,battery-regulation-voltage = <4200000>;
        ti,charge-current = <1000000>;
        ti,termination-current = <50000>;
        ti,precharge-current = <128000>;
        ti,minimum-sys-voltage = <3600000>;
        ti,boost-voltage = <5000000>;
        ti,boost-max-current = <1000000>;

        ti,use-ilim-pin;
        ti,thermal-regulation-threshold = <120>;
      };
    };
