# SPDX-文件许可人: (GPL-2.0 或 BSD-2-Clause)
%YAML 1.2
---
$id: http://devicetree.org/schemas/power/supply/richtek,rt5033-charger.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: Richtek RT5033 PMIC 电池充电器

maintainers:
  - Jakob Hauser <jahau@rocketmail.com>

description:
  多功能设备 RT5033 的电池充电器需要以如下格式在名为 "charger" 的子节点下实例化。
properties:
  compatible:
    const: richtek,rt5033-charger

  monitored-battery:
    $ref: /schemas/types.yaml#/definitions/phandle
    description: |
      根据 battery.yaml 中定义的被监控电池的句柄。电池节点需要包含五个参数：
      
      precharge-current-microamp:
        预充模式下的电流。预充电流级别范围是 350 毫安到 650 毫安，通过 I2C 每 100 毫安进行编程。
      
      constant-charge-current-max-microamp:
        快速充电模式下的电流。快速充电电流级别范围是 700 毫安到 2000 毫安，通过 I2C 每 100 毫安进行编程。
      
      charge-term-current-microamp:
        此属性为充电结束时的电流。其级别范围从 150 毫安到 600 毫安。在 150 毫安和 300 毫安之间，每 50 毫安一个步进；在 300 毫安和 600 毫安之间，每 100 毫安一个步进。
      
      precharge-upper-limit-microvolt:
        预充模式下的电压。如果电池电压低于预充阈值电压，则充电器处于预充模式，并使用预充电流。其级别范围是 2.3 伏到 3.8 伏，通过 I2C 每 0.1 伏进行编程。
      
      constant-charge-voltage-max-microvolt:
        恒压模式下的电池调节电压。此电压级别范围是从 3.65 伏到 4.4 伏，通过 I2C 每 0.025 伏进行编程。
      
      richtek,usb-connector:
        $ref: /schemas/types.yaml#/definitions/phandle
        description:
          根据 usb-connector.yaml 定义的 USB 连接器的句柄。该连接器应为 extcon 设备的子项。
required:
  - monitored-battery

additionalProperties: false

examples:
  - |
    charger {
        compatible = "richtek,rt5033-charger";
        monitored-battery = <&battery>;
        richtek,usb-connector = <&usb_con>;
    };
