# SPDX-许可证标识符: (GPL-2.0 或 BSD-2-Clause)
%YAML 1.2
---
$id: http://devicetree.org/schemas/interconnect/qcom,bcm-voter.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

标题: 高通 BCM-Voter 互连

维护者:
  - Georgi Djakov <georgi.djakov@linaro.org>

描述: |
  总线时钟管理器（BCM）是一个专用的硬件加速器，通过聚合来自多个资源状态协调器（RSC）的请求来管理共享系统资源。互连提供者能够通过它们各自的 RSC 通信来投票选择消费者汇总的阈值。
属性:
  compatible:
    枚举:
      - qcom,bcm-voter

  qcom,tcs-wait:
    描述: |
      可选的触发命令集（TCS）掩码，在触发时等待完成。如果未指定，则默认AMC和WAKE集合等待完成。掩码位在 QCOM_ICC_TAG_* 定义中可用。
      当调用 icc_set_bw() 时，AMC TCS 立即被触发。当 RSC 在活动模式和睡眠模式之间转换时触发 WAKE/SLEEP TCS。
      在大多数情况下，需要在 AMC 和 WAKE 集合中等待以确保使用前资源可用。如果特定的 RSC 及其使用案例可以通过其他方式确保足够的延迟，则可以覆盖此设置以减少延迟。
$ref: /schemas/types.yaml#/definitions/uint32

必需:
  - compatible

附加属性: false

示例:
  # 示例 1: 在 SDM845 SoC 上的应用程序 bcm_voter 应该定义在 &apps_rsc 节点内，
  # 如 Documentation/devicetree/bindings/soc/qcom/qcom,rpmh-rsc.yaml 中所定义
  - |

    apps_bcm_voter: bcm-voter {
        compatible = "qcom,bcm-voter";
    };

  # 示例 2: 在 SDM845 上的显示 bcm_voter 应该定义在 &disp_rsc 节点内，
  # 如 Documentation/devicetree/bindings/soc/qcom/qcom,rpmh-rsc.yaml 中所定义
  - |

    #include <dt-bindings/interconnect/qcom,icc.h>

    disp_bcm_voter: bcm-voter {
        compatible = "qcom,bcm-voter";
        qcom,tcs-wait = <QCOM_ICC_TAG_AMC>;
    };
..
