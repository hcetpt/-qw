# SPDX-文件许可人: (GPL-2.0-only 或 BSD-2-Clause)
%YAML 1.2
---
$id: http://devicetree.org/schemas/thermal/qoriq-thermal.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

标题: Freescale QorIQ 系统芯片上的热监控单元 (TMU)

维护者:
  - Shawn Guo <shawnguo@kernel.org>
  - Sascha Hauer <s.hauer@pengutronix.de>
  - Fabio Estevam <festevam@gmail.com>

$ref: thermal-sensor.yaml#

属性:
  compatible:
    描述: |
      设备的版本由位于偏移量 0x0BF8 的 TMU IP 块修订寄存器 (IPBRR0) 确定。
      IPBRR0 值与示例芯片之间的对应表：
            值           芯片
            ----------  -----
            0x01900102   T1040
    枚举:
      - fsl,qoriq-tmu
      - fsl,imx8mq-tmu

  reg:
    maxItems: 1

  interrupts:
    maxItems: 1

  fsl,tmu-range:
    $ref: /schemas/types.yaml#/definitions/uint32-array
    描述: |
      根据系统芯片参考手册，要编程到 TTRnCR 中的值。第一个单元格是 TTR0CR，第二个是 TTR1CR，依此类推。
    minItems: 2
    maxItems: 7

  fsl,tmu-calibration:
    $ref: /schemas/types.yaml#/definitions/uint32-matrix
    描述: |
      包含温度校准数据的单元对列表，根据系统芯片参考手册指定。每对中的第一个单元是要写入 TTCFGR 的值，第二个是要写入 TSCFGR 的值。
    items:
      items:
        - 描述: TTCFGR 的值
        - 描述: TSCFGR 的值
    minItems: 1
    maxItems: 64

  little-endian:
    描述: |
      布尔值，如果存在，则 TMU 寄存器为小端模式。如果不存在，默认为大端模式。
    类型: 布尔值

  clocks:
    maxItems: 1

  "#thermal-sensor-cells":
    常量: 1

必需项:
  - compatible
  - reg
  - interrupts
  - fsl,tmu-range
  - fsl,tmu-calibration

未评估属性: false

示例:
  - |
    tmu@f0000 {
        compatible = "fsl,qoriq-tmu";
        reg = <0xf0000 0x1000>;
        interrupts = <18 2 0 0>;
        fsl,tmu-range = <0x000a0000 0x00090026 0x0008004a 0x0001006a>;
        fsl,tmu-calibration = <0x00000000 0x00000025>,
                              <0x00000001 0x00000028>,
                              <0x00000002 0x0000002d>,
                              <0x00000003 0x00000031>,
                              <0x00000004 0x00000036>,
                              <0x00000005 0x0000003a>,
                              <0x00000006 0x00000040>,
                              <0x00000007 0x00000044>,
                              <0x00000008 0x0000004a>,
                              <0x00000009 0x0000004f>,
                              <0x0000000a 0x00000054>,
                              <0x00010000 0x0000000d>,
                              <0x00010001 0x00000013>,
                              <0x00010002 0x00000019>,
                              <0x00010003 0x0000001f>,
                              <0x00010004 0x00000025>,
                              <0x00010005 0x0000002d>,
                              <0x00010006 0x00000033>,
                              <0x00010007 0x00000043>,
                              <0x00010008 0x0000004b>,
                              <0x00010009 0x00000053>,
                              <0x00020000 0x00000010>,
                              <0x00020001 0x00000017>,
                              <0x00020002 0x0000001f>,
                              <0x00020003 0x00000029>,
                              <0x00020004 0x00000031>,
                              <0x00020005 0x0000003c>,
                              <0x00020006 0x00000042>,
                              <0x00020007 0x0000004d>,
                              <0x00020008 0x00000056>,
                              <0x00030000 0x00000012>,
                              <0x00030001 0x0000001d>;
        #thermal-sensor-cells = <1>;
    };
