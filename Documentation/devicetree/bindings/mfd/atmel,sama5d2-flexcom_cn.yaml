# SPDX-许可证标识符: (GPL-2.0-only 或 BSD-2-Clause)
%YAML 1.2
---
$id: http://devicetree.org/schemas/mfd/atmel,sama5d2-flexcom.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

标题: Microchip Flexcom (灵活串行通信单元)

维护者:
  - Kavyasree Kotagiri <kavyasree.kotagiri@microchip.com>

描述:
  Microchip Flexcom 实质上是一个封装了 SPI 控制器、I2C 控制器和 USART 的封装。每次只能使用一个功能，并且根据设备树在启动时选择。
属性:
  compatible:
    oneOf:
      - const: atmel,sama5d2-flexcom
      - items:
          - const: microchip,sam9x7-flexcom
          - const: atmel,sama5d2-flexcom
      - items:
          - const: microchip,sama7g5-flexcom
          - const: atmel,sama5d2-flexcom

  reg:
    maxItems: 1

  clocks:
    maxItems: 1

  "#address-cells":
    const: 1

  "#size-cells":
    const: 1

  ranges:
    描述:
      对于整个 I/O 寄存器区域的一个范围。（包括 USART、TWI 和 SPI 寄存器）
    items:
      maxItems: 3

  atmel,flexcom-mode:
    描述: |
      指定 Flexcom 模式如下：
      1: USART
      2: SPI
      3: I2C
    $ref: /schemas/types.yaml#/definitions/uint32
    enum: [1, 2, 3]

模式匹配属性:
  "^serial@[0-9a-f]+$":
    类型: object
    描述:
      描述 USART 的子节点。有关 USART 绑定的详细信息，请参阅 atmel-usart.txt
"^spi@[0-9a-f]+$":
    类型: object
    描述:
      描述 SPI 的子节点。有关 SPI 绑定的详细信息，请参阅 ../spi/spi_atmel.txt
"^i2c@[0-9a-f]+$":
    $ref: /schemas/i2c/atmel,at91sam-i2c.yaml
    描述:
      描述 I2C 的子节点

必需:
  - compatible
  - reg
  - clocks
  - "#address-cells"
  - "#size-cells"
  - ranges
  - atmel,flexcom-mode

额外属性: false

示例:
  - |
    #include <dt-bindings/interrupt-controller/arm-gic.h>

    flx0: flexcom@f8034000 {
        compatible = "atmel,sama5d2-flexcom";
        reg = <0xf8034000 0x200>;
        clocks = <&flx0_clk>;
        #address-cells = <1>;
        #size-cells = <1>;
        ranges = <0x0 0xf8034000 0x800>;
        atmel,flexcom-mode = <2>;
    };
..
