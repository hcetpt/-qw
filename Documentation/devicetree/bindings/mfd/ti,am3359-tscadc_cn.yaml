# SPDX-许可证标识符: (GPL-2.0-only 或 BSD-2-Clause)
%YAML 1.2
---
$id: http://devicetree.org/schemas/mfd/ti,am3359-tscadc.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: TI AM3359 触摸屏控制器/模数转换器

maintainers:
  - Miquel Raynal <miquel.raynal@bootlin.com>

properties:
  compatible:
    oneOf:
      - const: ti,am3359-tscadc
      - items:
          - const: ti,am654-tscadc
          - const: ti,am3359-tscadc
      - const: ti,am4372-magadc

  reg:
    maxItems: 1

  interrupts:
    maxItems: 1

  clocks:
    maxItems: 1

  clock-names:
    const: fck

  dmas:
    items:
      - description: DMA 控制器 phandle 和 FIFO0 的请求线
      - description: DMA 控制器 phandle 和 FIFO1 的请求线

  dma-names:
    items:
      - const: fifo0
      - const: fifo1

  adc:
    type: object
    description: 模数转换器子节点

  tsc:
    type: object
    description: 触摸屏控制器子节点

  mag:
    type: object
    description: 磁性读取器

  power-domains:
    maxItems: 1

required:
  - compatible
  - reg
  - interrupts
  - clocks
  - clock-names

additionalProperties: false

examples:
  - |
    #include <dt-bindings/interrupt-controller/arm-gic.h>

    tscadc@0 {
        compatible = "ti,am3359-tscadc";
        reg = <0x0 0x1000>;
        interrupts = <GIC_SPI 16 IRQ_TYPE_LEVEL_HIGH>;
        clocks = <&adc_tsc_fck>;
        clock-names = "fck";
        dmas = <&edma 53 0>, <&edma 57 0>;
        dma-names = "fifo0", "fifo1";

        tsc {
        };

        adc {
        };
    };
