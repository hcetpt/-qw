# SPDX-许可证标识符: GPL-2.0
%YAML 1.2
---
$id: http://devicetree.org/schemas/mfd/max77650.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

标题: 来自Maxim Integrated的MAX77650超低功耗电源管理集成电路（PMIC）
维护者:
  - Bartosz Golaszewski <bgolaszewski@baylibre.com>

描述: |
  MAX77650 是一款超低功耗PMIC，为低功耗IoT和可穿戴设备提供电池充电和电源供应。
  GPIO控制器模块作为顶级PMIC节点的一部分表示。该设备暴露一条GPIO线。
  对于其他子模块（稳压器、电源、LED和按键）的设备树绑定，请参阅相应子系统目录下的绑定文档。
属性:
  compatible:
    常量: maxim,max77650

  reg:
    描述:
      I2C设备地址
    最大项数: 1

  interrupts:
    最大项数: 1

  interrupt-controller: true

  "#interrupt-cells":
    常量: 2
    描述:
      第一个单元是IRQ编号，第二个单元是触发类型
  gpio-controller: true

  "#gpio-cells":
    常量: 2
    描述:
      第一个单元是引脚编号，第二个单元用于指定GPIO活动状态
  gpio-line-names:
    最大项数: 1
    描述:
      包含GPIO线名称的单个字符串
  regulators:
    $ref: /schemas/regulator/max77650-regulator.yaml

  charger:
    $ref: /schemas/power/supply/max77650-charger.yaml

  leds:
    $ref: /schemas/leds/leds-max77650.yaml

  onkey:
    $ref: /schemas/input/max77650-onkey.yaml

必需:
  - compatible
  - reg
  - interrupts
  - interrupt-controller
  - "#interrupt-cells"
  - gpio-controller
  - "#gpio-cells"

额外属性: false

示例:
  - |
    #include <dt-bindings/interrupt-controller/irq.h>
    #include <dt-bindings/input/linux-event-codes.h>
    i2c {
        #address-cells = <1>;
        #size-cells = <0>;

        pmic@48 {
            compatible = "maxim,max77650";
            reg = <0x48>;

            interrupt-controller;
            interrupt-parent = <&gpio2>;
            #interrupt-cells = <2>;
            interrupts = <3 IRQ_TYPE_LEVEL_LOW>;

            gpio-controller;
            #gpio-cells = <2>;
            gpio-line-names = "max77650-charger";

            regulators {
                compatible = "maxim,max77650-regulator";

                max77650_ldo: regulator-ldo {
                    regulator-name = "max77650-ldo";
                    regulator-min-microvolt = <1350000>;
                    regulator-max-microvolt = <2937500>;
                };

                max77650_sbb0: regulator-sbb0 {
                    regulator-name = "max77650-sbb0";
                    regulator-min-microvolt = <800000>;
                    regulator-max-microvolt = <1587500>;
                };
            };

            charger {
                compatible = "maxim,max77650-charger";
                input-voltage-min-microvolt = <4200000>;
                input-current-limit-microamp = <285000>;
            };

            leds {
                compatible = "maxim,max77650-led";
                #address-cells = <1>;
                #size-cells = <0>;

                led@0 {
                    reg = <0>;
                    label = "blue:usr0";
                };

                led@1 {
                    reg = <1>;
                    label = "red:usr1";
                    linux,default-trigger = "heartbeat";
                };

                led@2 {
                    reg = <2>;
                    label = "green:usr2";
                };
            };

            onkey {
                compatible = "maxim,max77650-onkey";
                linux,code = <KEY_END>;
                maxim,onkey-slide;
            };
        };
    };
