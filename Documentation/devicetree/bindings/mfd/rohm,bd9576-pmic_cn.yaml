# SPDX-许可证标识符: GPL-2.0-only 或 BSD-2-Clause
%YAML 1.2
---
$id: http://devicetree.org/schemas/mfd/rohm,bd9576-pmic.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

标题: ROHM BD9576MUF 和 BD9573MUF 电源管理集成芯片

维护者:
  - Matti Vaittinen <mazziesaccount@gmail.com>

描述: |
  BD9576MUF 和 BD9573MUF 是主要用于为 R-Car 系列处理器供电的电源管理 IC。
  该 IC 提供了 6 路可配置序列和安全监控的电源输出。还包含了具有慢速脉冲/窗口模式的看门狗逻辑。
属性:
  compatible:
    枚举:
      - rohm,bd9576
      - rohm,bd9573

  reg:
    描述:
      I2C 从设备地址
最大项数: 1

  interrupts:
    最大项数: 1

  rohm,vout1-en-low:
    描述:
      BD9576 和 BD9573 的 VOUT1 稳压器启用状态可以通过一个 GPIO 进行单独控制。
      这是由 PMIC 启动期间 vout1-en 引脚的状态决定的。如果在 PMIC 启动期间 vout1-en 为低电平，
      则 VOUT1 启用状态将通过此引脚进行控制。如果 vout1-en 在 PMIC 启动时被拉低，请设置此属性。
类型: 布尔值

  rohm,vout1-en-gpios:
    描述:
      GPIO 规定以指定与 vout1-en 连接的 GPIO，用于控制 vout1 的开/关状态
最大项数: 1

  rohm,ddr-sel-low:
    描述:
      BD9576 和 BD9573 对于 DDR 的输出电压可以通过设置 ddr-sel 引脚为低电平或高电平来选择。
      如果 ddr-sel 被接地，请设置此属性。
类型: 布尔值

  rohm,watchdog-enable-gpios:
    描述: 用于启用看门狗的 GPIO 线
最大项数: 1

  rohm,watchdog-ping-gpios:
    描述: 用于向看门狗发送脉冲的 GPIO 线
最大项数: 1

  rohm,hw-timeout-ms:
    最大项数: 2
    描述:
      看门狗超时时间（毫秒）。如果给出单个值，则是最大超时时间。
      例如，如果在此时间内未完成向看门狗发送脉冲，则将触发看门狗。
      如果给出了两个值，则将配置看门狗为“窗口模式”。此时第一个值是短脉冲的限制。
      例如，如果看门狗被更早地脉冲，则将触发看门狗。当给出两个值时，第二个值是最大超时时间。
```yaml
# (硬件) 短超时时间的最小值为 2 毫秒，最大值为 220 毫秒
# (硬件) 最大超时时间的最小值为 4 毫秒，最大值为 4416 毫秒
regulators:
    $ref: /schemas/regulator/rohm,bd9576-regulator.yaml
    description:
      规定了描述稳压器的子节点列表
required:
  - compatible
  - reg
  - regulators

additionalProperties: false

examples:
  - |
    #include <dt-bindings/gpio/gpio.h>
    #include <dt-bindings/leds/common.h>
    i2c {
        #address-cells = <1>;
        #size-cells = <0>;
        pmic: pmic@30 {
            compatible = "rohm,bd9576";
            reg = <0x30>;
            rohm,vout1-en-low;
            rohm,vout1-en-gpios = <&gpio2 6 GPIO_ACTIVE_HIGH>;
            rohm,ddr-sel-low;
            rohm,watchdog-enable-gpios = <&gpio2 6 GPIO_ACTIVE_HIGH>;
            rohm,watchdog-ping-gpios = <&gpio2 7 GPIO_ACTIVE_HIGH>;
            rohm,hw-timeout-ms = <150>, <2300>;

            regulators {
                boost1: regulator-vd50 {
                    regulator-name = "VD50";
                };
                buck1: regulator-vd18 {
                    regulator-name = "VD18";
                };
                buck2: regulator-vdddr {
                    regulator-name = "VDDDR";
                };
                buck3: regulator-vd10 {
                    regulator-name = "VD10";
                };
                ldo: regulator-voutl1 {
                    regulator-name = "VOUTL1";
                };
                sw: regulator-vouts1 {
                    regulator-name = "VOUTS1";
                };
            };
        };
    };
```

这段 YAML 格式的文本描述了设备树配置中与 ROHM BD9576 稳压器相关的部分。其中指出了短超时时间和最大超时时间的限制，并给出了一个具体的例子来说明如何在设备树中定义该稳压器以及其相关的控制引脚和子稳压器。
