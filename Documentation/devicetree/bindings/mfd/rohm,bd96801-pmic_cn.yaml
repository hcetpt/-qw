罗姆 BD96801 可扩展电源管理集成电路

维护者:
  - Matti Vaittinen <matti.vaittinen@fi.rohmeurope.com>

描述:
  BD96801 是一款车规级单芯片电源管理集成电路 (PMIC)
  它集成了 4 个降压转换器和 3 个低压差稳压器 (LDO)，具备过压/欠压检测、过流检测和看门狗等安全特性。

属性:
  compatible:
    常量: rohm,bd96801

  reg:
    最大项目数: 1

  interrupts:
    描述:
      PMIC 提供了 intb 和 errb 中断线。errb 中断线用于致命中断，这将导致 PMIC 关闭电源输出。
      在许多系统中，这会关闭控制 PMIC 的片上系统 (SoC) 并且可以省略连接/处理 errb。
      然而，在 SoC 不由 PMIC 供电或具有短时备份能量来处理关键硬件关机的情况下，
      连接并处理 errb 可能是有用的。
    最小项目数: 1
    最大项目数: 2

  interrupt-names:
    最小项目数: 1
    项目:
      - 枚举: [intb, errb]
      - 常量: errb

  rohm,hw-timeout-ms:
    描述:
      看门狗超时值。第一个值是超时限制。第二个值（可选）为窗口超时模式下的“过早”看门狗重置值。
    最小项目数: 1
    最大项目数: 2

  rohm,wdg-action:
    描述:
      当看门狗失败是否必须关闭稳压器电源输出还是仅切换 INTB 线。
    枚举:
      - prstb
      - intb-only

  timeout-sec:
    最大项目数: 2

  regulators:
    引用: /schemas/regulator/rohm,bd96801-regulator.yaml
    描述:
      指定稳压器的子节点列表

必需项:
  - compatible
  - reg
  - interrupts
  - interrupt-names
  - regulators

附加属性: 不允许

示例:
  - |
    #include <dt-bindings/interrupt-controller/irq.h>
    #include <dt-bindings/leds/common.h>
    i2c {
        #address-cells = <1>;
        #size-cells = <0>;
        pmic: pmic@60 {
            reg = <0x60>;
            compatible = "rohm,bd96801";
            interrupt-parent = <&gpio1>;
            interrupts = <29 IRQ_TYPE_LEVEL_LOW>, <6 IRQ_TYPE_LEVEL_LOW>;
            interrupt-names = "intb", "errb";

            regulators {
                buck1 {
                    regulator-name = "buck1";
                    regulator-ramp-delay = <1250>;
                    /* 0.5V 最小初始值 - 150 mV 调节 */
                    regulator-min-microvolt = <350000>;
                    /* 3.3V + 150mV 调节 */
                    regulator-max-microvolt = <3450000>;

                    /* 这些只能在 PMIC 处于待机模式时设置 */
                    rohm,initial-voltage-microvolt = <500000>;
                    regulator-ov-error-microvolt = <230000>;
                    regulator-uv-error-microvolt = <230000>;
                    regulator-temp-protection-kelvin = <1>;
                    regulator-temp-warn-kelvin = <0>;
                };
                buck2 {
                    regulator-name = "buck2";
                    regulator-min-microvolt = <350000>;
                    regulator-max-microvolt = <3450000>;

                    rohm,initial-voltage-microvolt = <3000000>;
                    regulator-ov-error-microvolt = <18000>;
                    regulator-uv-error-microvolt = <18000>;
                    regulator-temp-protection-kelvin = <1>;
                    regulator-temp-warn-kelvin = <1>;
                };
                buck3 {
                    regulator-name = "buck3";
                    regulator-min-microvolt = <350000>;
                    regulator-max-microvolt = <3450000>;

                    rohm,initial-voltage-microvolt = <600000>;
                    regulator-ov-warn-microvolt = <18000>;
                    regulator-uv-warn-microvolt = <18000>;
                    regulator-temp-protection-kelvin = <1>;
                    regulator-temp-error-kelvin = <0>;
                };
                buck4 {
                    regulator-name = "buck4";
                    regulator-min-microvolt = <350000>;
                    regulator-max-microvolt = <3450000>;

                    rohm,initial-voltage-microvolt = <600000>;
                    regulator-ov-warn-microvolt = <18000>;
                    regulator-uv-warn-microvolt = <18000>;
                    regulator-temp-protection-kelvin = <1>;
                    regulator-temp-error-kelvin = <0>;
                };
                ldo5 {
                    regulator-name = "ldo5";
                    regulator-min-microvolt = <300000>;
                    regulator-max-microvolt = <3300000>;

                    rohm,initial-voltage-microvolt = <500000>;
                    regulator-ov-error-microvolt = <36000>;
                    regulator-uv-error-microvolt = <34000>;
                    regulator-temp-protection-kelvin = <1>;
                    regulator-temp-warn-kelvin = <0>;
                };
                ldo6 {
                    regulator-name = "ldo6";
                    regulator-min-microvolt = <300000>;
                    regulator-max-microvolt = <3300000>;

                    rohm,initial-voltage-microvolt = <300000>;
                    regulator-ov-error-microvolt = <36000>;
                    regulator-uv-error-microvolt = <34000>;
                    regulator-temp-protection-kelvin = <1>;
                    regulator-temp-warn-kelvin = <0>;
                };
                ldo7 {
                    regulator-name = "ldo7";
                    regulator-min-microvolt = <300000>;
                    regulator-max-microvolt = <3300000>;

                    rohm,initial-voltage-microvolt = <500000>;
                    regulator-ov-error-microvolt = <36000>;
                    regulator-uv-error-microvolt = <34000>;
                    regulator-temp-protection-kelvin = <1>;
                    regulator-temp-warn-kelvin = <0>;
                };
            };
        };
    };
