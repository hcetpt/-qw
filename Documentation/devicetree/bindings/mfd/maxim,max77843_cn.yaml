# SPDX-许可证标识符: GPL-2.0-only
%YAML 1.2
---
$id: http://devicetree.org/schemas/mfd/maxim,max77843.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

标题: Maxim MAX77843 MicroUSB 和伴侣电源管理 IC

维护者:
  - Krzysztof Kozlowski <krzk@kernel.org>

描述: |
  这是针对 Maxim MAX77843 MicroUSB 集成电路 (MUIC) 的设备树绑定的一部分。
Maxim MAX77843 是一个 MicroUSB 和伴侣电源管理 IC，它包含了电压电流调节器、充电器、电量计、触觉马达驱动器和 MicroUSB 管理 IC。
属性:
  compatible:
    常量: maxim,max77843

  interrupts:
    最大项数: 1

  reg:
    最大项数: 1

  extcon:
    $ref: /schemas/extcon/maxim,max77843.yaml

  motor-driver:
    类型: 对象
    不允许额外属性: true
    属性:
      compatible:
        常量: maxim,max77843-haptic

      haptic-supply:
        描述: 触觉马达的电源供应

      pwms:
        最大项数: 1

    必需:
      - compatible
      - haptic-supply
      - pwms

  regulators:
    $ref: /schemas/regulator/maxim,max77843.yaml

必需:
  - compatible
  - interrupts
  - reg

不允许额外属性: true

示例:
  - |
    #include <dt-bindings/interrupt-controller/irq.h>

    i2c {
        #address-cells = <1>;
        #size-cells = <0>;

        pmic@66 {
            compatible = "maxim,max77843";
            interrupt-parent = <&gpa1>;
            interrupts = <5 IRQ_TYPE_EDGE_FALLING>;
            reg = <0x66>;

            extcon {
                compatible = "maxim,max77843-muic";

                connector {
                    compatible = "samsung,usb-connector-11pin",
                                 "usb-b-connector";
                    label = "micro-USB";
                    type = "micro";

                    ports {
                        #address-cells = <1>;
                        #size-cells = <0>;

                        port@0 {
                            /*
                             * 注意: 此 DTS 的基础文件中没有 port@0，这是必需的属性。端口看起来不完整且需要修正
* 为了满足 dtschema 的要求，添加一个被禁用的端口
*/
                            reg = <0>;
                            status = "disabled";
                        };

                        port@3 {
                            reg = <3>;
                            endpoint {
                                remote-endpoint = <&mhl_to_musb_con>;
                            };
                        };
                    };
                };

                ports {
                    port {
                        endpoint {
                            remote-endpoint = <&usb_to_muic>;
                        };
                    };
                };
            };

            regulators {
                compatible = "maxim,max77843-regulator";

                SAFEOUT1 {
                    regulator-name = "SAFEOUT1";
                    regulator-min-microvolt = <3300000>;
                    regulator-max-microvolt = <4950000>;
                };

                SAFEOUT2 {
                    regulator-name = "SAFEOUT2";
                    regulator-min-microvolt = <3300000>;
                    regulator-max-microvolt = <4950000>;
                };

                CHARGER {
                    regulator-name = "CHARGER";
                    regulator-min-microamp = <100000>;
                    regulator-max-microamp = <3150000>;
                };
            };

            motor-driver {
                compatible = "maxim,max77843-haptic";
                haptic-supply = <&ldo38_reg>;
                pwms = <&pwm 0 33670 0>;
            };
        };
    };
