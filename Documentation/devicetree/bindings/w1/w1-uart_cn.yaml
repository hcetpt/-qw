# SPDX-文件许可人: GPL-2.0-only 或 BSD-2-Clause
%YAML 1.2
---
$id: http://devicetree.org/schemas/w1/w1-uart.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: UART 1-Wire 总线

maintainers:
  - Christoph Winklhofer <cj.winklhofer@gmail.com>

description: |
  UART 1-Wire 总线。通过串行设备总线利用 UART 接口创建 1-Wire 定时模式。
  UART 外设必须支持全双工并以开漏模式运行。定时模式由特定组合的波特率和发送字节生成，这对应于 1-Wire 读取位、写入位或重置脉冲。
  重置和存在检测的默认波特率为 9600，而 1-Wire 读取或写入操作的默认波特率为 115200。如果实际波特率与请求的不同，则调整发送字节以生成 1-Wire 定时模式。
  https://www.analog.com/en/technical-articles/using-a-uart-to-implement-a-1wire-bus-master.html

properties:
  compatible:
    const: w1-uart

  reset-bps:
    default: 9600
    description:
      1-Wire 重置和存在检测的波特率

  write-0-bps:
    default: 115200
    description:
      1-Wire 写 0 周期的波特率

  write-1-bps:
    default: 115200
    description:
      1-Wire 写 1 和读周期的波特率

required:
  - compatible

additionalProperties:
  type: object

examples:
  - |
    serial {
        onewire {
            compatible = "w1-uart";
        };
    };
