```
SPDX 许可证标识符: GPL-2.0
包含文件: <isonum.txt>

===================================
Adaptec Ultra320 家族管理器集
===================================

Linux 操作系统使用说明

以下信息包含在本文件中：

  1. 支持的硬件
  2. 版本历史
  3. 命令行选项
  4. 额外注意事项
  5. 联系 Adaptec

1. 支持的硬件
=====================

   本驱动集支持以下 Adaptec SCSI 主适配器
=============              =========================================
Ultra320 ASIC              描述
   =============              =========================================
AIC-7901A                  单通道 64 位 PCI-X 133MHz 至 Ultra320 SCSI ASIC
AIC-7901B                  单通道 64 位 PCI-X 133MHz 至 Ultra320 SCSI ASIC，带保留训练
AIC-7902A4                 双通道 64 位 PCI-X 133MHz 至 Ultra320 SCSI ASIC
AIC-7902B                  双通道 64 位 PCI-X 133MHz 至 Ultra320 SCSI ASIC，带保留训练
   =============              =========================================

   ========================== ===================================== ============
Ultra320 适配器            描述                                    ASIC
   ========================== ===================================== ============
Adaptec SCSI 卡 39320       双通道 64 位 PCI-X 133MHz 至 Ultra320 SCSI 卡（一个外部 68 针，两个内部 68 针）  7902A4/7902B
Adaptec SCSI 卡 39320A      双通道 64 位 PCI-X 133MHz 至 Ultra320 SCSI 卡（一个外部 68 针，两个内部 68 针）  7902B
Adaptec SCSI 卡 39320D      双通道 64 位 PCI-X 133MHz 至 Ultra320 SCSI 卡（两个外部 VHDC 和一个内部 68 针）  7902A4
Adaptec SCSI 卡 39320D      双通道 64 位 PCI-X 133MHz 至 Ultra320 SCSI 卡（两个外部 VHDC 和一个内部 68 针），基于 AIC-7902B ASIC  7902A4
Adaptec SCSI 卡 29320       单通道 64 位 PCI-X 133MHz 至 Ultra320 SCSI 卡（一个外部 68 针，两个内部 68 针，一个内部 50 针）  7901A
Adaptec SCSI 卡 29320A      单通道 64 位 PCI-X 133MHz 至 Ultra320 SCSI 卡（一个外部 68 针，两个内部 68 针，一个内部 50 针）  7901B
Adaptec SCSI 卡 29320LP     单通道 64 位低剖面 PCI-X 133MHz 至 Ultra320 SCSI 卡（一个外部 VHDC，一个内部 68 针）  7901A
Adaptec SCSI 卡 29320ALP    单通道 64 位低剖面 PCI-X 133MHz 至 Ultra320 SCSI 卡（一个外部 VHDC，一个内部 68 针）  7901B
   ========================== ===================================== ============

2. 版本历史
==================

 * 3.0	  （2005年12月1日）
	- 更新驱动以使用 SCSI 传输类基础设施
	- 从 Adaptec 发布版本 2.0.15 中添加了序列器和核心修复
 * 1.3.11 （2003年7月11日）
        - 修复多个死锁问题
	- 添加 29320ALP 和 39320B 的 ID
 * 1.3.10 （2003年6月3日）
        - 将 SCB_TAG 字段对齐到 16 字节边界。这避免了某些 PCI-33 总线上的 SCB 腐败
	- 在 Rev B 硬件上修正非零 LUNs
	- 更新以适应 2.5.x SCSI proc 文件系统接口的变化
	- 当通过 8 位 WDTR 消息进行异步协商时，发送带有偏移量为 0 的 SDTR 以确保目标知道我们是异步的。这绕过了 Quantum Atlas 10K 中的固件缺陷
	- 实现控制器挂起和恢复
	- 在驱动加载期间清除 PCI 错误状态，以便不会因为其他驱动程序探针在我们声明控制器之前进行的意外写入而禁用内存映射 I/O
```
* 1.3.9（2003年5月22日）
    - 修复编译错误
    - 移除跨越4GB边界的段的S/G分割。在Linux中保证不会发生这种情况
    - 添加对2.5.X内核中发现的scsi_report_device_reset()的支持
    - 添加对7901B的支持
    - 简化处理Rev A版本的数据包LUN的变通方法
    - 修正并简化处理忽略宽残余消息的方式。之前的代码在事务数据长度为偶数且接收到IWR消息时无法报告残余

* 1.3.8（2003年4月29日）
    - 修复通过命令行界面代码访问的类型问题
    - 进行一些固件优化
    - 修复“Unexpected PKT busfree”错误
- 使用序列器中断来通知主机状态错误的命令。我们将通知延迟到没有未完成的选择，以确保主机被中断的时间尽可能短。
- 移除对2.2.X之前的版本的支持。
- 添加对新的2.5.X中断API的支持。
- 修正大端字节序架构的支持。
* 1.3.7（2003年4月16日）
        - 使用del_timer_sync()来确保在控制器关闭期间没有待处理的超时。
- 对于2.5.X之前的内核，仔细调整我们的段列表大小，以避免SCSI内存分配池的碎片化。
- 清理我们在/proc输出中的通道显示。
- 在添加单个设备期间解决中层设备列表中的重复设备条目问题。
* 1.3.6（2003年3月28日）
        - 修正域验证代码中的双重释放问题。
- 修正控制器关闭期间对已释放内存的引用问题。
- 在 SE->LVD 变换时重置总线。这是为了重置我们的收发器。
* 1.3.5（2003年3月24日）
        - 修复几个寄存器窗口模式的错误
- 将读取流包含在我们显示的 PPR 标志中，包括诊断信息和 /proc 中
- 为 2.5.X 内核添加 PCI 热插拔支持
- 修正 RevA 硬件的默认预补偿值
- 修复域验证线程关闭问题
- 添加固件变通方法，使 H2A4 在分组操作期间 LED 闪烁更亮
- 修正用户读取流设置在 /proc 中的显示
- 通过在中间层进入驱动程序时释放 io_request_lock 来简化驱动程序锁定
- 清理命令行解析，并将大部分代码移至 aiclib
* 1.3.4（2003年2月28日）
    - 修复错误恢复处理程序中的竞态条件
    - 允许在域验证期间，测试单元就绪命令可以占用完整的5秒
* 1.3.2（2003年2月19日）
    - 修复由于GEM318兼容性修复导致的Rev B回归问题（包含在1.3.1中）
* 1.3.1（2003年2月11日）
    - 增加对39320A的支持
    - 改进某些PCI-X错误的恢复
    - 修复同一写入事务中没有中间训练时发生的LQ/DATA/LQ/DATA处理问题
    - 修复与GEM318机箱服务设备的兼容性问题
    - 解决在高标签深度写入负载下发生的数据损坏问题
    - 适应2.5.X版daemonize() API的变化
    - 修复“ahd_handle_scsiint中缺少case”导致的panic问题
* 1.3.0（2003年1月21日）
    - 完成了所有U320产品的全面回归测试
    - 添加了中止和目标/LUN重置错误恢复处理程序及中断聚合功能

* 1.2.0（2002年11月14日）
    - 添加了对域验证的支持
    - 添加了对Hewlett-Packard版本的39320D和AIC-7902适配器的支持
    - 对以前适配器的支持尚未完全测试，仅建议客户自行承担风险使用

* 1.1.1（2002年9月24日）
    - 添加了对Linux 2.5.X内核系列的支持

* 1.1.0（2002年9月17日）
    - 添加了对四种额外SCSI产品支持：ASC-39320、ASC-29320、ASC-29320LP、AIC-7901

* 1.0.0（2002年5月30日）
    - 初始驱动发布

* 2.1. 软件/硬件特性
    - 支持SPI-4 “Ultra320”标准：
        - 320MB/s传输速率
        - 160MB/s和320MB/s下的分组SCSI协议
        - 快速仲裁选择（QAS）
        - 保留训练信息（仅限Rev B ASIC）
    - 中断聚合
    - 发起者模式（目前不支持目标模式）
    - 支持PCI-X标准，最高133MHz
    - 支持PCI v2.2标准
    - 域验证

* 2.2. 操作系统支持：
    - Redhat Linux 7.2、7.3、8.0、Advanced Server 2.1
    - SuSE Linux 7.3、8.0、8.1、Enterprise Server 7
    - 目前仅支持Intel和AMD x86架构
    - 支持>4GB内存配置
    - 更多详情请参阅用户手册

* 3. 命令行选项
=======================

    .. 警告::

		错误地更改或添加这些驱动参数
                可能会使您的系统无法运行
		请谨慎使用
将一个 .conf 文件放入 /etc/modprobe.d/ 目录，并添加/编辑一行，内容为 `options aic79xx aic79xx=[command[,command...]]`，其中 `command` 是以下选项中的一个或多个：

verbose
    - 定义：在驱动程序运行期间启用附加的提示信息
    - 可能的值：此选项是一个标志
    - 默认值：禁用

debug:[value]
    - 定义：启用不同级别的调试信息。调试掩码的位定义可以在 drivers/scsi/aic7xxx/aic79xx.h 中“Debug”标题下找到
    - 可能的值：0x0000 = 不进行调试，0xffff = 完全调试
    - 默认值：0x0000

no_reset
    - 定义：在初始探测阶段不重置总线
    - 可能的值：此选项是一个标志
    - 默认值：禁用

extended
    - 定义：强制控制器使用扩展转换
    - 可能的值：此选项是一个标志
    - 默认值：禁用

periodic_otag
    - 定义：定期发送有序标签以防止标签饥饿。某些较旧设备需要此选项
    - 可能的值：此选项是一个标志
    - 默认值：禁用

reverse_scan
    - 定义：反向探测 SCSI 总线，从目标 15 开始
    - 可能的值：此选项是一个标志
    - 默认值：禁用

global_tag_depth
    - 定义：所有总线上所有目标的全局标签深度。此选项设置默认标签深度，可以通过 tag_info 选项选择性覆盖
    - 可能的值：1 - 253
    - 默认值：32

tag_info:{{value[,value...]}[,{value[,value...]}...]}
    - 定义：按控制器设置每个目标的标记队列深度。控制器和目标都可以省略，表示它们应保留默认标签深度
    - 可能的值：1 - 253
    - 默认值：32

示例：

```plaintext
tag_info:{{16,32,32,64,8,8,,32,32,32,32,32,32,32,32,32}
```

在控制器 0 上：
- 指定目标 0 的标签深度为 16
- 指定目标 3 的标签深度为 64
- 指定目标 4 和 5 的标签深度为 8
- 保持目标 6 的默认标签深度
- 指定目标 1、2、7-15 的标签深度为 32

所有其他目标保留默认深度

```plaintext
tag_info:{{},{32,,32}}
```

在控制器 1 上：
- 指定目标 0 和 2 的标签深度为 32

所有其他目标保留默认深度

rd_strm: {rd_strm_bitmask[,rd_strm_bitmask...]}
    - 定义：按目标启用读取流。rd_strm_bitmask 是一个 16 位的十六进制值，其中每个位代表一个目标。将目标位设置为 '1' 表示为此目标启用读取流。可以省略控制器，表示它们应保留默认的读取流设置
示例：

```plaintext
rd_strm:{0x0041}
```

在控制器 0 上：
- 启用目标 0 和 6 的读取流
:: 

    rd_strm: {0x0023, , 0xFFFF}

    在控制器 0 上：
    
    - 启用目标 1、2 和 5 的读取流
    - 禁用目标 3、4 和 6-15 的读取流
    所有其他目标保留默认的读取流设置

    在控制器 2 上：

    - 启用所有目标的读取流
    所有其他目标保留默认的读取流设置

: 可能的值：0x0000 - 0xFFFF
: 默认值：0x0000

dv: {value[, value...]}
: 定义：按控制器设置域验证策略
可以省略控制器，表示应保留默认的读取流设置
: 可能的值：

              === ===============================
               < 0 使用来自串行 EEPROM 的设置
        0 禁用 DV
               > 0 启用 DV
              === ===============================

: 默认值：DV 串行 EEPROM 配置设置
示例：

	::

	    dv:{-1,0,,1,1,0}

- 在控制器0上保持DV的默认设置
- 在控制器1上禁用DV
- 跳过控制器2上的配置
- 在控制器3和4上启用DV
- 在控制器5上禁用DV
seltime:[value]
    :定义: 指定选择超时值
    :可能的值: 0 = 256ms, 1 = 128ms, 2 = 64ms, 3 = 32ms
    :默认值: 0

.. 警告:

    以下三个选项只有在技术支持代表的指导下才能更改
precomp: {value[,value...]}
    :定义: 按每个控制器设置IO单元的预补偿值
    控制器可以被省略，表示它们应保留默认的预补偿设置
:可能的值: 0 - 7
    :默认值: 根据芯片修订版本而变化

    示例：

	::

	    precomp:{0x1}

	- 在控制器0上将预补偿设置为1
::

	    precomp:{1,,7}

	- 在控制器0上将预补偿设置为1
在控制器2上将预补偿设置为8
slewrate: {value[,value...]}
    :定义: 按控制器逐个设置IO单元的转换速率
可以省略控制器，表示应保留默认的转换速率设置
:可能的值: 0 - 15
    :默认值: 根据芯片版本而变化

    示例:

	::

	    slewrate:{0x1}

	- 在控制器0上将转换速率设置为1
::

	    slewrate :{1,,8}

	- 在控制器0上将转换速率设置为1
- 在控制器2上将转换速率设置为8
amplitude: {value[,value...]}
    :定义: 按控制器逐个设置IO单元信号幅度
可以省略控制器，表示应保留默认的读取流设置
:可能的值: 1 - 7
    :默认值: 根据芯片版本而变化

    示例:

    ::

	amplitude:{0x1}

    在控制器0上将幅度设置为1
::

	amplitude :{1,,7}

    - 在控制器0上将幅度设置为1
在控制器2上将幅度设置为7。

示例：

    选项 aic79xx aic79xx=verbose,rd_strm:{{0x0041}}

在驱动程序中启用详细输出，并为控制器0的目标0和6开启读取流功能。
4. 额外说明
===================

4.1. 已知/未解决的问题或注意事项
-----------------------------------

        * 在SuSE Linux Enterprise 7下，由于Linux内核中的PCI中断路由问题，驱动程序可能无法正常工作。请与SuSE联系以获取更新的Linux内核。
4.2. 第三方兼容性问题
-------------------------------------

        * Adaptec仅支持运行最新固件的Ultra320硬盘。请与您的硬盘制造商确认您是否使用了最新版本的固件。
4.3. 操作系统或技术限制
-----------------------------------------------

        * PCI热插拔未经测试，可能会导致操作系统停止响应。
        * 从0开始连续编号的LUN可能不会在系统启动时自动探测。这是操作系统的限制。请联系您的Linux供应商以获取手动探测非连续LUN的说明。
        * 在RedHat下安装操作系统时使用Driver Update Disk版本的软件包可能会导致系统模块目录中安装两个版本的此驱动程序。这可能会导致/sbin/mkinitrd程序和其他尝试安装系统模块的RPM包出现问题。最佳的修正方法是在系统运行后安装此驱动程序的最新RPM包版本，可以从http://www.adaptec.com获取。
5. Adaptec客户支持
===========================

   要获得Adaptec技术支持，需要一个技术支持识别（TSID）号码。
- 12位的TSID可以在产品包装盒内的白色条形码标签上找到。TSID有助于我们通过准确识别您的产品和支持状态来提供更高效的服务。
支持选项
    - 在http://ask.adaptec.com搜索Adaptec支持知识库（ASK），以获取关于您产品的文章、故障排除提示和常见问题解答。
通过电子邮件获取支持，请将您的问题提交给 Adaptec 的技术支持专家：http://ask.adaptec.com/

北美地区
- 访问我们的网站：http://www.adaptec.com/
- 了解 Adaptec 的支持选项，请致电 408-957-2550，每周 7 天，每天 24 小时
- 如需与技术支持专家交谈，
  * 对于硬件产品，请致电 408-934-7274，周一至周五，上午 3:00 至下午 5:00（太平洋时间）
  * 对于 RAID 和光纤通道产品，请致电 321-207-2000，周一至周五，上午 3:00 至下午 5:00（太平洋时间）
为了加快服务速度，请准备好您的电脑
- 要订购 Adaptec 产品（包括配件和电缆），请致电 408-957-7274。在线订购电缆请访问 http://www.adaptec.com/buy-cables/

欧洲地区
- 访问我们的网站：http://www.adaptec.com/en-US/_common/world_index
- 如需与技术支持专家交谈或发送电子邮件，
  * 德语：+49 89 4366 5522，周一至周五，9:00-17:00（中部欧洲时间），http://ask-de.adaptec.com/
  * 法语：+49 89 4366 5533，周一至周五，9:00-17:00（中部欧洲时间），http://ask-fr.adaptec.com/
* 德国: +49 89 4366 5544，周一至周五，9:00-17:00 GMT，
  http://ask.adaptec.com/
- 您可以在以下网址订购 Adaptec 电缆：
  http://www.adaptec.com/buy-cables/

日本:
    - 访问我们的网站：http://www.adaptec.co.jp/
- 如需与技术支持专家交谈，请拨打
      +81 3 5308 6120，周一至周五，上午 9:00 至中午 12:00，
      下午 1:00 至下午 6:00

版权所有 © 2003 Adaptec Inc. 美国加利福尼亚州米尔皮塔斯市南米尔皮塔斯大道 691 号，邮编 95035
保留所有权利

您可以重新分发、使用和修改此 README 文件的全部或部分内容，前提是这些文件随同由通用公共许可证（GPL）管理的软件一起重新分发，并满足以下条件：

1. 重新分发的 README 文件必须保留上述版权声明、本列表中的条件以及以下免责声明，且不得进行任何修改。
2. 未经作者特别书面许可，不得使用作者的名字来支持或推广从本软件衍生的产品。
3. 修改或新的贡献必须在版权通知中注明作者（“贡献者”），并添加到原始版权通知下方。版权通知用于识别贡献者，不应视为允许更改 Adaptec 授予的权限。

此 README 文件由 Adaptec 和贡献者按“现状”提供，并且不提供任何形式的明示或暗示保证，包括但不限于非侵权保证、适销性保证和适合特定用途的保证。无论是在合同责任、严格责任还是侵权行为（包括但不限于疏忽等）的情况下，Adaptec 或贡献者均不对任何直接、间接、附带、特殊、示范性或后果性的损害（包括但不限于采购替代品、使用损失、数据损失、利润损失或业务中断）承担责任，即使已被告知可能发生此类损害。
当然，请提供您需要翻译的文本。
