SPDX 许可证标识符: GPL-2.0

========================
SCSI 通用 (sg) 驱动程序
========================

                                                      20020126

简介
============
SCSI 通用驱动程序 (sg) 是四个“高级”SCSI 设备驱动程序之一，另外三个分别是 sd、st 和 sr（分别对应磁盘、磁带和 CD-ROM）。sg 比其同类驱动程序更为通用（但层次更低），通常用于那些不属于已服务类别的 SCSI 设备。因此，sg 用于扫描仪、CD 刻录机以及以数字方式读取音频 CD 等多种用途。
这里不详细说明驱动程序的接口，而是提供版本信息及指向文档和示例的链接（即 URL）。

sg 驱动程序的主要版本
===============================
Linux 内核 (lk) 中存在三个主要版本的 sg：

- sg 版本 1（原始版），从 1992 年到 1999 年初（lk 2.2.5）
  它基于 sg_header 接口结构。
- sg 版本 2，从 2.2 系列中的 lk 2.2.6 开始。它基于扩展的 sg_header 接口结构。
- sg 版本 3，在 lk 2.4 系列（以及 lk 2.5 系列）中发现。
  它添加了 sg_io_hdr 接口结构。

sg 驱动程序文档
=======================
sg 驱动程序最新的文档保存在以下地址：

- https://sg.danny.cz/sg/

这描述的是在 lk 2.4 系列中找到的 sg 版本 3 驱动程序。
2.2 系列中的 lk 中找到的版本 2 sg 驱动程序的文档（大型版本）可以在以下地址找到：

- https://sg.danny.cz/sg/p/scsi-generic_long.txt
原始的 sg 驱动文档（在内核 2.2.6 之前）可以在 LDP 归档中找到：

- https://tldp.org/HOWTO/archived/SCSI-Programming-HOWTO/index.html

关于 Linux SCSI 子系统（sg 是其一部分）更一般的描述可以在这里找到：https://www.tldp.org/HOWTO/SCSI-2.4-HOWTO

示例代码和工具
===============
有两个 sg 工具包：

    =========   ==========================================================
    sg3_utils   适用于内核 2.4 中的 sg 版本 3 驱动
    sg_utils    适用于内核 2.2 及更早版本中的 sg 版本 2（原始驱动）
    =========   ==========================================================

这两个工具包都可以在内核 2.4 系列中使用。然而，sg3_utils 提供了更多的功能。它们可以在以下网址找到：https://sg.danny.cz/sg/sg3_utils.html 和 freecode.com

另一种方法是查看使用 sg 驱动的应用程序，这些应用程序包括 cdrecord、cdparanoia、SANE 和 cdrdao。

Linux 内核版本与 sg 驱动版本的映射
======================================
以下是包含新版 sg 驱动的内核 2.4 系列列表：

- 内核 2.4.0 ：sg 版本 3.1.17
- 内核 2.4.7 ：sg 版本 3.1.19
- 内核 2.4.10 ：sg 版本 3.1.20 [#]_
- 内核 2.4.17 ：sg 版本 3.1.22

.. [#] 在接下来的六个内核版本中有三方对 sg 版本 3.1.20 进行了三次修改。

作为参考，以下是包含新版 sg 驱动的内核 2.2 系列列表：

- 内核 2.2.0 ：原始 sg 版本 [无版本号]
- 内核 2.2.6 ：sg 版本 2.1.31
- 内核 2.2.8 ：sg 版本 2.1.32
- 内核 2.2.10 ：sg 版本 2.1.34 [首次出现 SG_GET_VERSION_NUM ioctl]
- 内核 2.2.14 ：sg 版本 2.1.36
- 内核 2.2.16 ：sg 版本 2.1.38
- 内核 2.2.17 ：sg 版本 2.1.39
- 内核 2.2.20 ：sg 版本 2.1.40

当前内核 2.5 开发系列包含 sg 版本 3.5.23，其功能等同于内核 2.4.17 中的 sg 版本 3.1.22。

道格拉斯·吉尔伯特

2002年1月26日

dgilbert@interlog.com
