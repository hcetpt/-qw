SPDX 许可声明标识符: GPL-2.0

===================
Adaptec dpti 驱动程序
===================

在源代码形式下，无论是否进行修改，重新分发和使用都是允许的，
前提是重新分发的源代码必须保留上述版权声明、以下条件列表以及以下免责声明。
此软件由 Adaptec 提供，并且任何明示或暗示的保证（包括但不限于适销性和适用于特定目的的暗示保证）均被否认。在任何情况下，Adaptec 均不对任何直接的、间接的、附带的、特殊的、示范性的或后果性的损害（包括但不限于替代品或服务的采购；使用、数据或利润的损失；或业务中断）负责，无论这些损害是由何种原因引起的，无论是在合同、严格责任或侵权行为（包括但不限于过失）的基础上产生的，即使事先被告知可能发生此类损害。
此驱动程序支持 Adaptec 的 I2O RAID 和 DPT SmartRAID V I2O 板卡。

致谢
=======

最初的 Linux 驱动程序由 Karen White 在 Dell Computer 工作期间移植到 Linux。该驱动程序是从 Bob Pasteur（来自 DPT）的原始非 Linux 驱动程序移植过来的。Mark Salyzyn 和 Bob Pasteur 参与了最初的驱动程序开发。
2.0 版本的驱动程序由 Deanna Bonds 和 Mark Salyzyn 开发。

历史
=======

该驱动程序最初移植到了 Linux 2.0.34 版本。

==== ==========================================================================
V2.0 重写驱动程序。基于 i2o 子系统的重构
这是第一个完整的 GPL 版本，因为上一个版本使用了非 GPL 的 i2osig 头文件。开发者测试版
V2.1 内部测试
V2.2 第一个发布的版本

V2.3 更新：

- 添加了对 Raptor 的支持
- 修复了在管理工具运行时系统在极端负载下挂起的错误（从 kmalloc 标志中移除了 GFP_DMA）

V2.4 准备提交以嵌入内核的第一个版本

更新：

- 实现了 Alan Cox 的建议
- 添加了对 scatter/gather 层的 resid 计算
- 更好的错误处理
- 添加了检查溢出条件的功能
- 添加了 DATAPROTECT 检查
- 修改了错误返回码
- 修复了总线重置例程中的指针错误
- 启用了通过 ioctl 进行 HBA 重置（允许固件刷新后重启并使用新固件，无需重新启动）
- 修改了 proc 输出

==== ==========================================================================

待办事项
====
- 在 64 位架构编译时添加 64 位 Scatter Gather 支持
- 添加稀疏 LUN 扫描功能
- 添加代码，在 SCSI 核心发出测试单元就绪或查询命令时检查设备是否在线（在固件级别）
- 添加 proc 读取接口
- 添加 busrescan 命令
- 添加 rescan 命令
- 在 rescan 例程中添加通知 SCSI 核心有关新设备的代码
- 添加对 C-PCI（热插拔相关）的支持
- 添加 ioctl 传递错误恢复代码

备注
=====
DPT 卡优化了命令处理顺序。因此，命令可能在发送到板卡后长达 6 分钟才能完成。
文件 dpti_ioctl.h dptsig.h osd_defs.h osd_util.h sys_info.h 是 Adaptec 管理例程的接口文件的一部分。这些文件定义了 ioctl 中使用的结构。它们是为可移植性而编写的。虽然它们难以阅读，但我需要原样使用它们，否则可能会错过接口中的更改。
