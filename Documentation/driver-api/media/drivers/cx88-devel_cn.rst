SPDX 许可证标识符: GPL-2.0

cx88 驱动程序
=============

作者: Gerd Hoffmann

cx88 数据手册中缺失的文档
-------------------------------------------

MO_OUTPUT_FORMAT (0x310164)

.. 代码块:: none

  来自 DScaler 的先前默认值: 0x1c1f0008
  第8位: 31-28
  28: PREVREMOD = 1

  第7位: 27-24 (0xc = 12 = b1100 )
  27: COMBALT = 1
  26: PAL_INV_PHASE
    (DScaler 显然将此设置为 1，导致图像质量不佳)

  第6、5位: 23-16
  25-16: COMB_RANGE = 0x1f [默认] (9 位 -> 最大 512)

  第4位: 15-12
  15: DISIFX = 0
  14: INVCBF = 0
  13: DISADAPT = 0
  12: NARROWADAPT = 0

  第3位: 11-8
  11: FORCE2H
  10: FORCEREMD
  9: NCHROMAEN
  8: NREMODEN

  第2位: 7-4
  7-6: YCORE
  5-4: CCORE

  第1位: 3-0
  3: RANGE = 1
  2: HACTEXT
  1: HSFMT

0x47 是 MPEG-2 传输流数据包的同步字节
数据手册错误地说明使用十进制数 47。188 是长度
所有符合 DVB 标准的前端输出的数据包都以此起始码开头
Hauppauge WinTV cx88 红外信息
-----------------------------------

用于复用器的控制是 GPIO [0,1] 作为源，而 GPIO 2 用于静音
====== ======== =================================================
GPIO0  GPIO1
====== ======== =================================================
  0        0    电视音频
  1        0    FM 广播
  0        1    线路输入
  1        1    单声道调谐器旁路或 CD 通道（取决于调谐器）
====== ======== =================================================

GPIO 16（我认为）与红外端口相连（如果存在的话）
根据数据手册：

- 寄存器 24'h20004 PCI 中断状态

 - 位 [18] IR_SMP_INT 在通过 gpio[16] 引脚收集 32 个输入样本到 GP_SAMPLE 寄存器时设置

数据手册中缺失的部分：

- 设置 4KHz 采样率（大约为 RC5 兼容遥控器的两倍过采样；对我们来说足够好）
- 将寄存器 0x35C050 设置为 0xa80a80
- 启用采样
- 将寄存器 0x35C054 设置为 0x5
- 在中断屏蔽寄存器中启用 IRQ 位 18（并提供相应的处理程序）

GP_SAMPLE 寄存器位于 0x35C058

然后按指定的速率将位右移进入 GP_SAMPLE 寄存器；当接收到一个完整的 DWORD 时，您会收到中断
您需要从过采样的红外传感器位中恢复出实际的 RC5 位。（提示：寻找 RC5 双相数据的 0/1 和 1/0 跳变） 实际的原始 RC5 代码将跨越 2-3 个 DWORD，具体取决于实际对齐方式
当没有红外信号时，我确定接收器始终处于标记状态（1）；但杂散光等也会导致间歇性噪声值。
请记住，这是随时间变化的红外接收器状态的自由运行采样，因此不要假设任何采样开始于特定位置
额外信息
~~~~~~~~~~~~~~~

这份数据手册（通过 Google 搜索）似乎对 RC5 基础有一个很好的描述：
http://www.atmel.com/dyn/resources/prod_documents/doc2817.pdf

这个文档有更多的数据：
http://www.nenya.be/beor/electronics/rc5.htm

这个文档介绍了如何解码双相数据流：
http://www.ee.washington.edu/circuit_archive/text/ir_decode.txt

这个文档还有更多信息：
http://www.xs4all.nl/~sbp/knowledge/ir/rc5.htm
