========================
直接文件系统查找
========================

内核执行的固件查找最常见的形式是直接文件系统查找。内核直接在根文件系统中查找固件，路径如“固件搜索路径”部分所述。
文件系统查找实现在`fw_get_filesystem_firmware()`函数中，它使用了内核通用的核心文件加载设施`kernel_read_file_from_path()`。
允许的最大路径长度为`PATH_MAX`——目前这是4096个字符。
建议您将`/lib/firmware`路径保留在您的根文件系统上，避免为它们单独设置分区以防止可能发生的查找竞态，并避免使用下面文档中提到的自定义回退机制。
固件与初始RAM磁盘(initramfs)
----------------------

内置到内核中的驱动程序应将固件集成到用于启动内核的初始RAM磁盘(initramfs)中，否则可能会出现驱动程序加载与实际根文件系统尚未可用之间的竞态问题。将固件打包进初始RAM磁盘解决了这个竞态问题，但需要注意的是，仅使用initrd并不能充分解决同样的竞态问题。
存在一些情况，可能不希望将固件包含在初始RAM磁盘中，例如处理远程处理器子系统的大固件文件。对于这种情况，当前唯一可行的解决方案是使用用户空间回退机制，因为只有用户空间才能确切地知道何时真正的根文件系统已准备好并挂载完成。
