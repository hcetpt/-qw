测试设备驱动程序中的系统挂起和恢复支持

	(C) 2007 拉斐尔·J·维索基 <rjw@sisk.pl>，GPL 许可

1. 准备测试系统
============================

不幸的是，为了有效地测试驱动程序中对系统级挂起和恢复转换的支持，需要在一个完全功能性的系统上进行挂起和恢复操作，并且该系统已加载了这个驱动程序。此外，应该多次进行这些操作，最好连续多次进行，并且要分别针对休眠（也称为磁盘挂起或STD）和RAM挂起到（STR）进行测试，因为这两种情况涉及的操作略有不同，并且与机器的BIOS交互方式也有所不同。
当然，为了这个目的，测试系统在不加载被测驱动的情况下必须能够正常挂起和恢复。因此，如果可能的话，在开始测试新驱动之前，您应首先解决测试系统中的所有挂起/恢复相关问题。请参阅 `Documentation/power/basic-pm-debugging.rst` 以获取更多关于调试挂起/恢复功能的信息。

2. 测试驱动程序
=====================

一旦您解决了测试系统在没有新驱动的情况下出现的所有挂起/恢复相关问题，就可以开始测试了：

a) 将驱动程序构建为模块，加载它并尝试休眠的测试模式（参见：`Documentation/power/basic-pm-debugging.rst`，第1部分）
b) 加载驱动程序，并尝试在“重启”、“关闭”和“平台”模式下进行休眠（参见：`Documentation/power/basic-pm-debugging.rst`，第1部分）
c) 将驱动程序直接编译到内核中，并尝试休眠的测试模式
d) 在将驱动程序直接编译到内核的情况下，尝试在“重启”、“关闭”和“平台”模式下进行休眠
e) 尝试挂起到RAM的测试模式（参见：`Documentation/power/basic-pm-debugging.rst`，第2部分）。[就STR测试而言，无论驱动程序是否作为模块构建都无关紧要。]

f) 使用s2ram工具尝试挂起到RAM，同时加载驱动程序（参见：`Documentation/power/basic-pm-debugging.rst`，第2部分）
上述每项测试都应该重复几次，并且应该将STD测试与STR测试混合进行。如果其中任何一项测试失败，则不能认为该驱动程序是安全的挂起/恢复驱动。
