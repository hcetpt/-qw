测试设备驱动程序中的挂起和恢复支持

====================================================
（C）2007 Rafael J. Wysocki <rjw@sisk.pl>，GPL

1. 准备测试系统
============================

不幸的是，要有效地测试驱动程序在系统级挂起和恢复转换中的支持，必须挂起并恢复一个带有该驱动程序的完全功能系统。而且，这应该多次进行，最好连续几次，并且分别针对休眠（也称为挂起到磁盘或STD）和挂起到RAM（STR），因为每种情况都涉及略有不同的操作以及与机器BIOS的不同交互。
当然，为此，测试系统在不使用正在测试的驱动程序的情况下，必须能够挂起和恢复。因此，如果可能，在开始测试新驱动程序之前，您应该首先解决测试系统中所有与挂起/恢复相关的问题。请参阅Documentation/power/basic-pm-debugging.rst以获取有关调试挂起/恢复功能的更多信息。

2. 测试驱动程序
=====================

一旦您解决了测试系统在没有新驱动程序的情况下与挂起/恢复相关的问题，就可以准备测试它：

a) 将驱动程序构建为模块，加载它并尝试休眠的测试模式（见：Documentation/power/basic-pm-debugging.rst，第1部分）
b) 加载驱动程序，并尝试在“重启”，“关机”和“平台”模式下进行休眠（见：Documentation/power/basic-pm-debugging.rst，第1部分）
c) 直接将驱动程序编译到内核中并尝试休眠的测试模式
d) 尝试在直接编译到内核的驱动程序下，在“重启”，“关机”和“平台”模式下进行休眠
e) 尝试挂起到RAM的测试模式（见：Documentation/power/basic-pm-debugging.rst，第2部分）。[就STR测试而言，无论驱动程序是否作为模块构建，这都不重要。]

f) 使用s2ram工具尝试挂起到RAM，同时加载驱动程序（见：Documentation/power/basic-pm-debugging.rst，第2部分）
上述每个测试都应该重复多次，并且应将STD测试与STR测试混合进行。如果其中任何一项测试失败，则不能认为该驱动程序是挂起/恢复安全的。
