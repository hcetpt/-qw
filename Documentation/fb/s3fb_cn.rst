===========================================
s3fb - 适用于 S3 Trio/Virge 芯片的 fbdev 驱动
===========================================

支持的硬件
==================

- S3 Trio32
- S3 Trio64（及其变体 V+、UV+、V2/DX、V2/GX）
- S3 Virge（及其变体 VX、DX、GX 和 GX2+）
- S3 Plato/PX（完全未经测试）
- S3 Aurora64V+（完全未经测试）

- 只支持 PCI 总线
- 只支持由 BIOS 初始化的 VGA 设备
- 在大端模式下可能无法正常工作

我在 S3 Trio64（普通版、V+ 和 V2/DX）以及 S3 Virge（普通版、VX、DX）上测试了 s3fb，均在 i386 上运行。

支持的功能
==================

- 4 位元每像素伪彩色模式（带 18 位调色板，两种变体）
- 8 位元每像素伪彩色模式（带 18 位调色板）
- 16 位元每像素真彩色模式（RGB 555 和 RGB 565）
- 24 位元每像素真彩色模式（RGB 888），仅限于 S3 Virge VX
- 32 位元每像素真彩色模式（RGB 888），不包括 S3 Virge VX
- 文本模式（通过设置 bpp = 0 激活）
- 交错模式变体（文本模式中不可用）
- 双扫描模式变体（文本模式中不可用）
- 双向平移
- 暂停/恢复支持
- DPMS 支持

即使在高分辨率下也支持文本模式，但存在对较低像素时钟的限制（通常最大值在 50-60 MHz 之间，具体取决于特定硬件，我在普通的 S3 Trio32 卡上获得了最佳结果——约 75 MHz）。此限制不由驱动程序强制执行。文本模式只支持 8 位宽字体（硬件限制），并且支持 16 位高的字体（驱动程序限制）。在 S3 Trio64 V2/DX 上，文本模式存在问题。
有两类 4 位元每像素模式。第一种模式（如果 nonstd == 0 则选择）是带有打包像素的模式，高位字节在前。第二种模式（如果 nonstd == 1 则选择）是带有交错平面的模式（1 字节交错），高位字节在前。这两种模式都只支持 8 位宽字体（驱动程序限制）。

缺失的功能
=================
（待办事项列表）

- 辅助设备支持（未由 BIOS 初始化）
- 大端模式支持
- Zorro 总线支持
- MMIO 支持
- 更多卡上的 24 位元每像素模式支持
- 4 位元每像素模式中对非 8 位宽字体的支持
- 文本模式中对非 16 位高字体的支持
- 复合和外部同步（有人能测试这个吗？）
- 硬件光标
- 视频覆盖支持
- 垂直同步支持
- 特性连接器支持
- 加速支持（类似 8514 的 2D 加速、Virge 3D 加速、总线主传输）
- 一些魔法寄存器更好的值（性能问题）

已知问题
==========

- 文本模式下禁用光标功能不起作用
- S3 Trio64 V2/DX 上的文本模式有问题

--
Ondrej Zajicek <santiago@crfreenet.org>
