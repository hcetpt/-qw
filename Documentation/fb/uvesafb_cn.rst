==========================================================
uvesafb - 适用于符合VBE2+标准的显卡的通用驱动程序
==========================================================

1. 要求
---------------

uvesafb 应该能够与任何符合 VBE 2.0 标准的视频 BIOS 的显卡一起工作。
与其他驱动程序不同，uvesafb 使用了一个名为 v86d 的用户空间助手。v86d 用于在模拟和受控环境中运行 x86 视频 BIOS 代码。这使得 uvesafb 能够在除 x86 之外的架构上运行。请参阅 v86d 文档以获取当前支持架构的列表。
v86d 源代码可以从以下网站下载：

  https://github.com/mjanusz/v86d

请参阅 v86d 文档以获取详细的配置和安装说明。
请注意，为了使 uvesafb 正常工作，v86d 用户空间助手必须始终可用。如果您希望在早期引导过程中使用 uvesafb，则需要将 v86d 包含在 initramfs 映像中，并将其编译到内核中或作为 initrd 使用。

2. 注意事项与限制
--------------------------

uvesafb 是一个 _通用_ 驱动程序，支持各种各样的显卡，但最终受到视频 BIOS 接口的限制。
最重要的限制包括：

- 缺乏任何形式的加速
- 支持的视频模式严格且有限。通常情况下，您的设置中的原生分辨率或最优化刷新率可能无法与 uvesafb 一起工作，仅仅是因为视频 BIOS 不支持您想要使用的视频模式。对于宽屏面板来说，这一点尤为明显，因为大多数 BIOS 只支持 4:3 的纵横比，而宽屏面板的原生视频模式则不具有这种比例
- 调整刷新率仅在符合 VBE 3.0 标准的视频 BIOS 中才可行。请注意，许多 nVidia 视频 BIOS 声称符合 VBE 3.0 标准，但实际上它们会忽略任何刷新率设置

3. 配置
----------------

uvesafb 可以被编译为模块，或者直接编译到内核中。
在这两种情况下，它都支持相同的一组配置选项，这些选项可以在内核命令行上给出，也可以作为模块参数给出，例如：
  
```
video=uvesafb:1024x768-32,mtrr:3,ywrap (编译到内核中)
# modprobe uvesafb mode_option=1024x768-32 mtrr=3 scroll=ywrap  (模块)
```

接受的选项：

======= =========================================================
ypan    启用通过 VESA 保护模式接口进行显示平移。可见屏幕只是视频内存的一个窗口，控制台滚动通过改变窗口的起始位置来实现。此选项仅在 x86 架构上可用，并且是该架构上的默认选项。
======= =========================================================
ywrap   与 ypan 相同，但假设您的显卡可以循环视频内存（即到达视频内存末尾时从顶部开始读取）。比 ypan 快。仅在 x86 上可用。
redraw  通过重新绘制受影响的屏幕部分来滚动，这是非 x86 平台上的默认选项。

================== =========================================================

（如果您将 uvesafb 作为模块使用，上述三个选项作为 scroll 选项的参数使用，例如 scroll=ypan。）

=========== ====================================================================
vgapal      使用标准 VGA 寄存器进行调色板更改
pmipal      使用保护模式接口进行调色板更改
如果保护模式接口可用，这是默认选项。仅在 x86 上可用
mtrr:n      为帧缓冲区设置内存类型范围寄存器，其中 n：

                - 0 - 禁用（等同于 nomtrr）
                - 3 - 写组合（默认）

            其他值将导致警告，并且将被视为 3
nomtrr      不使用内存类型范围寄存器
vremap:n    重映射 'n' MiB 的显存。如果为 0 或未指定，则根据视频模式重映射内存
vtotal:n    如果您的显卡 BIOS 错误地确定了总显存大小，使用此选项覆盖 BIOS（以 MiB 为单位）
<mode>      您想要设置的模式，采用标准的modedb格式。详细描述请参阅
            modedb.txt。当uvesafb作为模块编译时，模式字符串应作为
            'mode_option'选项的值提供。

vbemode:x   强制使用VBE模式x。仅当该模式在VBE提供的支持模式列表中找到时才会设置。
注意：模式编号'x'应按照VESA模式编号方式指定，而不是Linux内核的方式（例如257而不是769）。
提示：如果您使用此选项是因为正常的<mode>参数对您不起作用，并且您使用的是X服务器，则可能需要设置
            'nocrtc'选项以确保在控制台与X之间切换后视频模式能够正确恢复。

nocrtc      在设置视频模式时不要使用CRTC时序。此选项仅在Video BIOS符合VBE 3.0规范时有效。如果标准方式设置模式存在问题，请使用此选项。请注意，使用此选项意味着任何刷新率调整将被忽略，刷新率将保持为BIOS默认值（60 Hz）。

noedid      不尝试获取并使用EDID提供的模式。

noblank     禁用硬件消隐。

v86d:path   设置v86d可执行文件的路径。此选项仅作为模块参数可用，而不是video=字符串的一部分。如果您需要使用它并且已将uvesafb内置到内核中，请使用
            uvesafb.v86d="path"。

========== ================================================================

此外，还可以提供以下参数。它们全部覆盖EDID提供的值和BIOS默认值。请参考您的显示器规格以获取适用于您硬件的maxhf、maxvf和maxclk的正确值。
========== =======================================
maxhf:n     最大水平频率（单位：kHz）
```
maxvf:n     最大垂直频率（单位：Hz）
maxclk:n    最大像素时钟（单位：MHz）
=========== ======================================

4. sysfs 接口
----------------------

uvesafb 提供了多个 sysfs 节点，用于可配置参数和附加信息
驱动属性：

/sys/bus/platform/drivers/uvesafb
  v86d
    （默认值：/sbin/v86d）

    指向 v86d 可执行文件的路径。如果守护进程实例尚未运行，则由 uvesafb 启动 v86d
设备属性：

/sys/bus/platform/drivers/uvesafb/uvesafb.0
  nocrtc
    如果设置为 1，则使用默认刷新率（60 Hz）
oem_product_name, oem_product_rev, oem_string, oem_vendor
    关于显卡及其制造商的信息
vbe_modes
    Video BIOS 支持的视频模式列表及其 VBE 模式编号（十六进制表示）
vbe_version
    表示实现的 VBE 标准的 BCD 值
5. 其他信息
----------------

如果您在 fb_var_screeninfo 中将 pixclock 设置为 0，uvesafb 将根据 Video BIOS 的默认刷新率和定时设置视频模式
Michal Januszewski <spock@gentoo.org>

最后更新日期：2017-10-10

uvesafb 选项的文档是基于 vesafb.txt 松散编写的
```
当然，请提供你需要翻译的文本。
