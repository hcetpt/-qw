SPDX 许可证标识符: GPL-2.0

==============================
高通 LPG 的内核驱动程序
==============================

描述
-----------

高通 LPG（Lighting and Power Gateway）可以在多种高通电源管理 IC (PMIC) 中找到，它包含多个 PWM 通道、一个可编程模式查找表和一个 RGB LED 电流阱。

为了便于各种使用场景，LPG 通道可以作为单独的 LED、组合为 RGB LED 或者作为 PWM 通道进行访问。每个 PWM 通道的输出被路由到其他硬件模块，例如 RGB 电流阱、GPIO 引脚等。

每个 PWM 通道的工作周期范围可以从 27 微秒到 384 秒，并且占空比有 9 位分辨率。

为了在更深的空闲状态中提供与 CPU 子系统之间的状态通知支持，LPG 提供了模式支持。这包括一个共享的亮度值查找表以及每个通道的属性，用于选择表中的范围、速率以及模式是否重复。

通道的模式可以通过“pattern”触发器来编程，使用 hw_pattern 属性。
/sys/class/leds/<led>/hw_pattern
--------------------------------

为高通 LPG LED 指定一个硬件模式。
该模式是一系列亮度和保持时间对，其中保持时间以毫秒表示。由于 LPG 硬件无法执行 leds-trigger-pattern 格式所期望的线性过渡，因此模式中的每一项后面必须跟一个相同亮度的零长度条目。模式中的保持时间是模式的一个属性，因此除了下面描述的暂停外，模式中的每个元素都必须相同。

简单模式示例：

    "255 500 255 0 0 500 0 0"

        ^
        |
    255 +----+    +----+
        |    |    |    |      ..
0 |    +----+    +----
        +---------------------->
        0    5   10   15     时间 (100ms)

LPG 支持为模式的第一个和最后一个元素指定更长的保持时间，即所谓的“低暂停”和“高暂停”。

低暂停模式示例：

    "255 1000 255 0 0 500 0 0 255 500 255 0 0 500 0 0"

        ^
        |
    255 +--------+    +----+    +----+    +--------+
        |        |    |    |    |    |    |        |      ..
同样地，可以通过在最后一个条目上使用更长的保持时间来延长最后一个条目的持续时间。

为了节省共享查找表中的空间，LPG 支持“乒乓”模式。在这种模式下，每次运行模式时，会先正向运行模式，然后反向运行。当给定的模式是回文时，驱动程序会自动使用这种模式。在这种情况下，“高位暂停”表示在反向运行模式之前的等待时间，因此允许模式中间项的指定保持时间与其它项有不同的保持时间。 

注：这里的“高位暂停”可能需要根据具体上下文或领域知识进一步明确其含义。如果你有更多上下文信息或其他术语说明，请提供给我以便更准确地翻译。
