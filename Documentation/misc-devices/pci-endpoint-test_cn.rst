SPDX 许可证标识符: GPL-2.0

=====================================
PCI 终端测试功能的驱动程序
=====================================

如果根复合体连接到一个运行 `pci_epf_test` 功能驱动程序的可配置 PCI 终端，则应将此驱动程序用作主机侧驱动程序。该驱动程序根据 [1]_ 配置。
`pci_endpoint_test` 驱动程序可用于执行以下测试：
测试设备的 PCI 驱动程序执行以下测试：

1) 验证 BAR 中编程的地址；
2) 触发传统中断（IRQ）；
3) 触发 MSI 中断；
4) 触发 MSI-X 中断；
5) 读取数据；
6) 写入数据；
7) 复制数据。

这个杂项驱动程序为每个连接到根复合体的 `pci_epf_test` 功能创建 `/dev/pci-endpoint-test.<num>`，并应使用“ioctl”来执行上述测试。
ioctl
-----

PCITEST_BAR：
测试 BAR。需要将要测试的 BAR 编号作为参数传递。

PCITEST_LEGACY_IRQ：
测试传统中断（IRQ）。

PCITEST_MSI：
测试消息触发中断（MSI）。需要将要测试的 MSI 编号作为参数传递。

PCITEST_MSIX：
测试消息触发中断（MSI-X）。需要将要测试的 MSI-X 编号作为参数传递。

PCITEST_SET_IRQTYPE：
更改驱动程序的中断类型配置。需要将中断类型作为参数传递（0：传统，1：MSI，2：MSI-X）。

PCITEST_GET_IRQTYPE：
获取驱动程序的中断类型配置。

PCITEST_WRITE：
执行写入测试。需要将缓冲区的大小作为参数传递。

PCITEST_READ：
执行读取测试。需要将缓冲区的大小作为参数传递。
PCITEST_COPY：
	      执行读取测试。缓冲区的大小应作为参数传递
.. [1] 文档/PCI/端点/功能/绑定/pci-test.rst

请注意，这里的“文档/PCI/端点/功能/绑定/pci-test.rst”是对原文中路径的直接翻译，实际上在中文环境中可能会有所不同。如果你需要更准确的路径翻译或解释，请提供更多的上下文信息。
