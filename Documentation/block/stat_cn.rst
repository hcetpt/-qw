======================
块层统计信息在 /sys/block/<dev>/stat
======================

此文件记录了 /sys/block/<dev>/stat 文件的内容。该 stat 文件提供了关于块设备 <dev> 状态的若干统计数据。

**问：**
为什么在一个文件中有多个统计信息？通常 sysfs 不是每个文件只包含一个值吗？

**答：**
通过使用单个文件，内核可以保证这些统计信息代表了设备状态的一致快照。如果将这些统计信息作为包含单一统计量的多个文件导出，则无法保证一组读取值代表某一时间点的情况。
stat 文件由一行文本组成，其中包含 17 个用空白符分隔的十进制数值。字段在下表中进行了总结，并在下面进行了更详细的描述。
=============== ============= =================================================
名称            单位         描述
=============== ============= =================================================
读取 I/O         请求          已处理的读取 I/O 数量
读取合并         请求          与队列中的 I/O 合并的读取 I/O 数量
读取扇区         扇区          读取的扇区数量
读取等待时间      毫秒          读取请求的总等待时间
写入 I/O         请求          已处理的写入 I/O 数量
写入合并         请求          与队列中的 I/O 合并的写入 I/O 数量
写入扇区         扇区          写入的扇区数量
写入等待时间      毫秒          写入请求的总等待时间
进行中           请求          当前正在进行的 I/O 数量
活跃时间         毫秒          此块设备处于活动状态的总时间
队列等待时间      毫秒          所有请求的总等待时间
丢弃 I/O         请求          已处理的丢弃 I/O 数量
丢弃合并         请求          与队列中的 I/O 合并的丢弃 I/O 数量
丢弃扇区         扇区          丢弃的扇区数量
丢弃等待时间      毫秒          丢弃请求的总等待时间
刷新 I/O         请求          已处理的刷新 I/O 数量
刷新等待时间      毫秒          刷新请求的总等待时间
=============== ============= =================================================

**读取 I/O、写入 I/O、丢弃 I/O**
==================================

当一个 I/O 请求完成时，这些值会增加。

**刷新 I/O**
=============

当一个刷新 I/O 请求完成时，这些值会增加。块层合并刷新请求并同时执行最多一个。这计数的是磁盘执行的刷新请求。对于分区不进行跟踪。
读合并、写合并、丢弃合并
=======================

这些值会在 I/O 请求与已排队的 I/O 请求合并时递增。
读扇区、写扇区、丢弃扇区
=======================

这些值统计了从该块设备读取、写入或丢弃的扇区数量。所提到的“扇区”是指标准的 UNIX 512 字节扇区，而不是任何特定于设备或文件系统的块大小。当 I/O 操作完成时，这些计数器会递增。
读等待时间、写等待时间、丢弃等待时间、刷新等待时间
==================================

这些值统计了 I/O 请求在该块设备上等待的毫秒数。如果有多个 I/O 请求在等待，则这些值将以大于每秒 1000 的速率增加；例如，如果有 60 个读请求平均等待 30 毫秒，那么 `read_ticks` 字段将增加 60 * 30 = 1800。
进行中
======

这个值统计了已发送给设备驱动程序但尚未完成的 I/O 请求的数量。它不包括那些已在队列中但尚未发送给设备驱动程序的 I/O 请求。
I/O 等待时间
===========

这个值统计了设备上有 I/O 请求排队的毫秒数。
队列等待时间
===========

这个值统计了 I/O 请求在该块设备上等待的毫秒数。如果有多个 I/O 请求在等待，此值将随着等待请求数量与毫秒数的乘积而增加（参见上面的“读等待时间”示例）。
