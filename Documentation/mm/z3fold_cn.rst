====== 
z3fold 
====== 

z3fold 是一种用于存储压缩页面的专用分配器。
它设计为每个物理页最多可存储三个压缩页面。
它是zbud的衍生产品，允许实现更高的压缩比，同时保持其前身的简单性和确定性。
z3fold 和 zbud 的主要区别如下：

* 不同于 zbud，z3fold 允许最大为 PAGE_SIZE 的分配。
* z3fold 在一个物理页中可以容纳最多三个压缩页面。
* z3fold 自身不导出任何 API，因此它旨在通过 zpool API 使用。

为了保持确定性和简单性，z3fold（如同 zbud）总是按整数个压缩页面来存储，但它可以存储最多三个页面，而 zbud 最多只能存储两个。因此，z3fold 的压缩比约为 2.7 倍，而 zbud 的压缩比约为 1.7 倍。
与 zbud 不同（但类似于 zsmalloc），z3fold_alloc() 不返回一个可解引用的指针。相反，它返回一个无符号长整型句柄，该句柄编码了所分配对象的实际位置。
尽管保持接近 zsmalloc 的有效压缩比，z3fold 并不依赖于启用 MMU，并且提供了更可预测的回收行为，这使其更适合小型和响应关键系统。
