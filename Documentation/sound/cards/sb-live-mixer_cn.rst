===========================================
Sound Blaster Live 混音器 / 默认 DSP 代码
===========================================

EMU10K1 芯片有一个可以编程的 DSP 部分，用于支持各种采样处理方式，这些内容在此处描述（本文不涉及 EMU10K1 芯片的整体功能。请参阅手册部分获取更多详细信息。）

ALSA 驱动程序通过默认代码（稍后可更改）对该芯片的部分进行编程，提供了以下功能：

IEC958 (S/PDIF) 原始 PCM
=======================

这个 PCM 设备（它是第 3 个 PCM 设备（索引为 2！），并且是第一个子设备（索引为 0））允许将未经修改的 48kHz、立体声、16 位小端字节序流转发到数字输出（同轴或光纤）。通用接口允许创建最多 8 个以 48kHz、16 位小端字节序运行的原始 PCM 设备。当前代码很容易添加对多声道设备的支持，但转换例程目前仅支持立体声（双通道流）。

有关更多详细信息，请查看 lowlevel/emu10k1/emufx.c 中的 tram_poke 例程。
数字混音器控制
======================

这些控制是使用 DSP 指令构建的，提供了扩展的功能。此处仅描述 ALSA 驱动程序中的默认内置代码。请注意，这些控制作为衰减器工作：最大值是中性位置，信号保持不变。如果同一个目的地在多个控制中被提及，信号会被累加，并且可能会溢出（设置为最大或最小值而不检查溢出）。

使用的缩写解释：

DAC  
数字到模拟转换器  
ADC  
模拟到数字转换器  
I2S  
由飞利浦半导体公司开发的一种单向三线串行总线，用于数字声音（此标准用于连接独立的 D/A 和 A/D 转换器）  
LFE  
低频效果（用作超低音信号）  
AC97  
包含一个模拟混音器、D/A 和 A/D 转换器的芯片  
IEC958  
S/PDIF  
FX-bus  
EMU10K1 芯片具有一个包含 16 个累加器的效果总线  
每个合成器语音都可以将其输出馈送到这些累加器，并且 DSP 微控制器可以操作结果和声

``name='Wave Playback Volume',index=0``
---------------------------------------
此控制用于衰减来自左、右 PCM FX-bus 累加器的样本。ALSA 使用累加器 0 和 1 来处理左右 PCM 样本。最终样本被转发到 AC97 编码器的前置 DAC PCM 插槽。

``name='Wave Surround Playback Volume',index=0``
------------------------------------------------
此控制用于衰减来自左、右 PCM FX-bus 累加器的样本。ALSA 使用累加器 0 和 1 来处理左右 PCM 样本。最终样本被转发到后置 I2S DAC。这些 DAC 单独运行（它们不在 AC97 编码器内）。

``name='Wave Center Playback Volume',index=0``
----------------------------------------------
此控制用于衰减来自左、右 PCM FX-bus 累加器的样本。ALSA 使用累加器 0 和 1 来处理左右 PCM 样本。
结果混合为单声道信号（单通道），并转发到AC97编解码器的??后方??右DAC PCM插槽
``name='Wave LFE Playback Volume',index=0``
-------------------------------------------
此控制用于衰减来自左、右PCM FX总线累加器的样本。ALSA使用累加器0和1分别处理左、右PCM信号
结果混合为单声道信号（单通道），并转发到AC97编解码器的??后方??左DAC PCM插槽
``name='Wave Capture Volume',index=0``, ``name='Wave Capture Switch',index=0``
------------------------------------------------------------------------------
这些控制用于衰减来自左、右PCM FX总线累加器的样本。ALSA使用累加器0和1分别处理左、右PCM信号
结果被转发到ADC捕获FIFO（即标准捕获PCM设备）
``name='Synth Playback Volume',index=0``
----------------------------------------
此控制用于衰减来自左、右MIDI FX总线累加器的样本。ALSA使用累加器4和5分别处理左、右MIDI样本
结果样本被转发到AC97编解码器的前部DAC PCM插槽
``name='Synth Capture Volume',index=0``, ``name='Synth Capture Switch',index=0``
--------------------------------------------------------------------------------
这些控制用于衰减来自左、右MIDI FX总线累加器的样本。ALSA使用累加器4和5分别处理左、右MIDI样本
结果被转发到ADC捕获FIFO（即标准捕获PCM设备）
``name='Surround Playback Volume',index=0``
-------------------------------------------
此控制用于衰减来自左、右后方PCM FX总线累加器的样本。ALSA使用累加器2和3分别处理左、右后方PCM样本
结果样本被转发到后方的I2S DAC。这些DAC独立工作（它们不在AC97编解码器内）。

``name='Surround Capture Volume',index=0``，``name='Surround Capture Switch',index=0``

--------------------------
这些控制用于衰减来自左后和右后PCM FX总线累加器的样本。ALSA使用累加器2和3来处理左后和右后的PCM样本。结果被转发到ADC捕获FIFO（即标准捕获PCM设备）。

``name='Center Playback Volume',index=0``

-----------------------------
这个控制用于衰减中心PCM FX总线累加器的样本。ALSA使用累加器6来处理中心PCM样本。结果样本被转发到AC97编解码器的??后方??右DAC PCM槽。

``name='LFE Playback Volume',index=0``

------------------------------
这个控制用于衰减中心PCM FX总线累加器的样本。ALSA使用累加器6来处理中心PCM样本。结果样本被转发到AC97编解码器的??后方??左DAC PCM槽。

``name='AC97 Playback Volume',index=0``

-------------------------------
这个控制用于衰减来自AC97编解码器左前方和右前方ADC PCM槽的样本。结果样本被转发到AC97编解码器的前方DAC PCM槽。

.. note::
  在标准操作中，此控制应为零，否则会激活数字回环。

``name='AC97 Capture Volume',index=0``

-------------------------------
这个控制用于衰减来自AC97编解码器左前方和右前方ADC PCM槽的样本。结果被转发到ADC捕获FIFO（即标准捕获PCM设备）。
.. note::
   此控制应设置为100（最大值），否则无法捕获（录制）AC97编解码器的任何模拟输入。
``name='IEC958 TTL Playback Volume',index=0``
---------------------------------------------
此控制用于衰减来自IEC958 TTL 数字输入（通常由CD-ROM驱动器使用）的左右声道样本。处理后的样本将被转发到AC97编解码器的前置DAC PCM插槽。
``name='IEC958 TTL Capture Volume',index=0``
--------------------------------------------
此控制用于衰减来自IEC958 TTL 数字输入（通常由CD-ROM驱动器使用）的左右声道样本。处理后的样本将被转发到ADC捕获FIFO（从而到达标准捕获PCM设备）。
``name='Zoom Video Playback Volume',index=0``
---------------------------------------------
此控制用于衰减来自变焦视频数字输入（通常由CD-ROM驱动器使用）的左右声道样本。处理后的样本将被转发到AC97编解码器的前置DAC PCM插槽。
``name='Zoom Video Capture Volume',index=0``
--------------------------------------------
此控制用于衰减来自变焦视频数字输入（通常由CD-ROM驱动器使用）的左右声道样本。处理后的样本将被转发到ADC捕获FIFO（从而到达标准捕获PCM设备）。
``name='IEC958 LiveDrive Playback Volume',index=0``
---------------------------------------------------
此控制用于衰减来自IEC958 光纤数字输入的左右声道样本。处理后的样本将被转发到AC97编解码器的前置DAC PCM插槽。
``name='IEC958 LiveDrive Capture Volume',index=0``
--------------------------------------------------
此控制用于衰减来自IEC958 光纤数字输入的左右声道样本。处理后的样本将被转发到ADC捕获FIFO（从而到达标准捕获PCM设备）。
``name='IEC958 Coaxial Playback Volume',index=0``
-------------------------------------------------
此控制用于衰减来自IEC958 同轴数字输入的左右声道样本。处理后的样本将被转发到AC97编解码器的前置DAC PCM插槽。
``name='IEC958 Coaxial Capture Volume',index=0``
------------------------------------------------
此控制用于衰减来自IEC958 同轴数字输入的左右声道样本。处理后的样本将被转发到ADC捕获FIFO（从而到达标准捕获PCM设备）。
``name='Line LiveDrive Playback Volume',index=0``, ``name='Line LiveDrive Playback Volume',index=1``
----------------------------------------------------------------------------------------------------
此控制用于衰减来自LiveDrive上的I2S ADC输入的左右声道样本。处理后的样本将被转发到AC97编解码器的前置DAC PCM插槽。
``name='Line LiveDrive Capture Volume',index=1``
--------------------------------------------------------------------------------------------------
此控件用于衰减来自LiveDrive上的左、右I2S ADC输入的样本。处理后的样本将被转发到ADC捕获FIFO（即标准捕获PCM设备）。

``name='Tone Control - Switch',index=0``
----------------------------------------
此控件用于开启或关闭音调控制。前、后和中置/低频效果（LFE）输出的样本会受到影响。

``name='Tone Control - Bass',index=0``
--------------------------------------
此控件设置低音强度。没有中性值！
当音调控制代码被激活时，样本总是会被修改。
最接近纯信号的值是20。

``name='Tone Control - Treble',index=0``
----------------------------------------
此控件设置高音强度。没有中性值！
当音调控制代码被激活时，样本总是会被修改。
最接近纯信号的值是20。

``name='IEC958 Optical Raw Playback Switch',index=0``
-----------------------------------------------------
如果此开关处于开启状态，则IEC958（S/PDIF）数字输出的样本仅从原始FX8010 PCM获取，否则使用标准前PCM样本。

``name='Headphone Playback Volume',index=1``
--------------------------------------------
此控件用于衰减耳机输出的样本。

``name='Headphone Center Playback Switch',index=1``
---------------------------------------------------
如果此开关处于开启状态，则中置PCM的样本将被发送到左耳机输出（对于没有单独中置/LFE输出的SB Live声卡很有用）。

``name='Headphone LFE Playback Switch',index=1``
------------------------------------------------
如果此开关处于开启状态，则中置PCM的样本将被发送到右耳机输出（对于没有单独中置/LFE输出的SB Live声卡很有用）。
PCM流相关控制
===========================

``name='EMU10K1 PCM 音量', index 0-31``
----------------------------------------
通道音量衰减范围为 0-0x1fffd。中间值（无衰减）为默认值。三个值的通道映射如下：

* 0 - 单声道，默认值 0xffff（无衰减）
* 1 - 左声道，默认值 0xffff（无衰减）
* 2 - 右声道，默认值 0xffff（无衰减）

``name='EMU10K1 PCM 发送路由', index 0-31``
----------------------------------------------
此控制指定目标 - FX 总线累加器。有十二个值，映射如下：

* 0 - 单声道，A 目标（FX 总线 0-15），默认值 0
* 1 - 单声道，B 目标（FX 总线 0-15），默认值 1
* 2 - 单声道，C 目标（FX 总线 0-15），默认值 2
* 3 - 单声道，D 目标（FX 总线 0-15），默认值 3
* 4 - 左声道，A 目标（FX 总线 0-15），默认值 0
* 5 - 左声道，B 目标（FX 总线 0-15），默认值 1
* 6 - 左声道，C 目标（FX 总线 0-15），默认值 2
* 7 - 左声道，D 目标（FX 总线 0-15），默认值 3
* 8 - 右声道，A 目标（FX 总线 0-15），默认值 0
* 9 - 右声道，B 目标（FX 总线 0-15），默认值 1
* 10 - 右声道，C 目标（FX 总线 0-15），默认值 2
* 11 - 右声道，D 目标（FX 总线 0-15），默认值 3

请注意，将一个通道分配给同一个 FX 总线累加器超过一次是非法的（这意味着 0=0 && 1=0 是无效的组合）

``name='EMU10K1 PCM 发送音量', index 0-31``
---------------------------------------------
它指定了给定目标的衰减（量）范围为 0-255。通道映射如下：

* 0 - 单声道，A 目标衰减，默认值 255（无衰减）
* 1 - 单声道，B 目标衰减，默认值 255（无衰减）
* 2 - 单声道，C 目标衰减，默认值 0（静音）
* 3 - 单声道，D 目标衰减，默认值 0（静音）
* 4 - 左声道，A 目标衰减，默认值 255（无衰减）
* 5 - 左声道，B 目标衰减，默认值 0（静音）
* 6 - 左声道，C 目标衰减，默认值 0（静音）
* 7 - 左声道，D 目标衰减，默认值 0（静音）
* 8 - 右声道，A 目标衰减，默认值 0（静音）
* 9 - 右声道，B 目标衰减，默认值 255（无衰减）
* 10 - 右声道，C 目标衰减，默认值 0（静音）
* 11 - 右声道，D 目标衰减，默认值 0（静音）

手册/专利
===============

ftp://opensource.creative.com/pub/doc
-------------------------------------
注意该网站已失效，但文档可以从其他地方获取
LM4545.pdf
	AC97 编解码器
m2049.pdf
	EMU10K1 数字音频处理器
hog63.ps
	FX8010 - 用于音频效果的DSP芯片架构

WIPO 专利
------------

WO 9901813 (A1)
	具有多个异步流的音频效果处理器（1999年1月14日）

WO 9901814 (A1)
	具有音频效果指令集的处理器（1999年1月14日）

WO 9901953 (A1)
	具有解耦指令执行和音频数据排序的音频效果处理器（1999年1月14日）

美国专利（https://www.uspto.gov/）
-----------------------------------

US 5925841
	采用缓存内存的数字采样乐器（1999年7月20日）

US 5928342
	集成在单个芯片上的多端口内存音频效果处理器，可以并发加载多个异步数字声音样本（1999年7月27日）

US 5930158
	具有音频效果指令集的处理器（1999年7月27日）

US 6032235
	内存初始化电路（Tram）（2000年2月29日）

US 6138207
	与系统总线连接的缓存中进行音频样本插值循环，并根据循环结束和最小块大小优先处理和修改总线传输（2000年10月24日）

US 6151670
	使用短期内存寄存池节省内存存储的方法（2000年11月21日）

US 6195715
	通过将程序关联到通用寄存器、定义中断寄存器、轮询通用寄存器并调用与定义的中断寄存器相关的回调例程来控制多个程序与公共中断通信的中断控制（2001年2月27日）
