SPDX 许可证标识符: GPL-2.0

============
Paravirt_ops
============

Linux 提供了对不同虚拟化技术的支持。
历史上，为了支持不同的虚拟机监视器（hypervisor），需要不同的二进制内核；这一限制随着 pv_ops 的引入而被移除。
Linux 的 pv_ops 是一个虚拟化 API，它能够支持不同的虚拟机监视器。它允许每个虚拟机监视器覆盖关键操作，并且使得单个内核二进制文件能够在所有支持的执行环境中运行，包括在没有虚拟机监视器的本机上。
pv_ops 提供了一组函数指针，这些指针代表了对应于低级关键指令和各种领域中的高级功能的操作。通过在启动时对低级关键操作进行二进制补丁，pv_ops 允许在运行时进行优化。
pv_ops 操作分为三类：

- 简单间接调用
  这些操作对应于高级功能，在这些情况下已知间接调用的开销并不重要。

- 允许通过二进制补丁进行优化的间接调用
  通常这些操作对应于低级关键指令。它们被频繁调用且性能至关重要。开销非常重要。

- 一组用于手写汇编代码的宏
  手写的汇编代码（.S 文件）也需要半虚拟化，因为它们包含敏感指令或其中某些代码路径非常性能关键。
