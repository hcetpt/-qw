禁运硬件问题
=============

范围
----

因硬件问题导致的安全隐患与纯粹的软件漏洞不同，后者仅影响Linux内核。诸如Meltdown、Spectre、L1TF等硬件问题必须区别对待，因为它们通常会影响到所有操作系统（"OS"），因此需要在不同的操作系统供应商、发行版、硬件制造商和其他相关方之间进行协调。对于某些问题，软件缓解措施可能依赖于微码或固件更新，这需要进一步的协调。

联系
----

Linux内核硬件安全团队与常规的Linux内核安全团队是分开的。
该团队只负责开发针对禁运硬件安全问题的修复方案。报告Linux内核中的纯软件安全漏洞并不由这个团队处理，报告者将被引导至联系常规的Linux内核安全团队（:ref:`Documentation/admin-guide/ <securitybugs>`）。
可以通过电子邮件联系该团队：<hardware-security@kernel.org>。这是一个由安全官员组成的私人列表，他们将帮助您根据我们的文档流程进行协调。
该列表是加密的，发送到列表的邮件可以使用PGP或S/MIME加密，并且必须使用报告者的PGP密钥或S/MIME证书签名。列表的PGP密钥和S/MIME证书可以从以下URL获取：

  - PGP: https://www.kernel.org/static/files/hardware-security.asc
  - S/MIME: https://www.kernel.org/static/files/hardware-security.crt

尽管硬件安全问题通常由受影响的硬件制造商处理，但我们欢迎研究人员或已识别出潜在硬件缺陷的个人联系我们。

硬件安全官员
^^^^^^^^^^^^^^^^^^^^^^^^^^^

当前的硬件安全官员团队成员：

  - Linus Torvalds（Linux基金会研究员）
  - Greg Kroah-Hartman（Linux基金会研究员）
  - Thomas Gleixner（Linux基金会研究员）

邮件列表的运作
^^^^^^^^^^^^^^^^^^^^^^^^^^^

我们在流程中使用的加密邮件列表托管在Linux基金会的信息技术基础设施上。通过提供这项服务，Linux基金会IT运营人员在技术上能够访问禁运信息，但根据他们的雇佣合同，他们有义务保密。Linux基金会IT人员还负责操作和管理kernel.org基础设施的其余部分。
Linux基金会目前的IT项目基础设施总监是Konstantin Ryabitsev。

保密协议
---------

Linux内核硬件安全团队不是一个正式机构，因此无法签署任何保密协议。内核社区了解此类问题的敏感性，并提供谅解备忘录作为替代。

谅解备忘录
-----------

Linux内核社区深刻理解对硬件安全问题保持禁运状态的必要性，以便在不同的操作系统供应商、分销商、硬件厂商和其他相关方之间进行协调。
Linux内核社区在过去成功地处理了硬件安全问题，并已建立了必要的机制，使社区能够在禁运限制下进行合规开发。

Linux内核社区有一个专门的硬件安全团队负责初次接触，该团队监督在禁运规则下处理此类问题的过程。

硬件安全团队确定将构成针对特定问题的初始响应团队的开发者（领域专家）。初始响应团队可以引入更多开发者（领域专家）以最佳技术方式解决该问题。

所有参与的开发者承诺遵守禁运规则并保密收到的信息。违反承诺将导致立即从当前问题中排除，并从所有相关邮件列表中移除。此外，硬件安全团队也将禁止违规者参与未来的问题。这一后果的影响在我们社区中是一个高度有效的威慑。如果发生违规行为，硬件安全团队将立即通知涉事各方。如果您或任何人意识到潜在违规，请立即向硬件安全官员报告。

过程
^^^^^^^

由于Linux内核开发的全球分布性质，面对面会议几乎不可能用来解决硬件安全问题。电话会议因时区和其他因素难以协调，仅应在绝对必要时使用。加密电子邮件已被证明是处理这类问题最有效和安全的通信方法。

披露开始
"""""""""""""""""""

披露始于通过电子邮件联系Linux内核硬件安全团队。初次接触应包含问题描述以及任何已知受影响硬件的清单。如果您的组织构建或分发受影响的硬件，我们鼓励您同时考虑可能受到波及的其他硬件。

硬件安全团队将提供一个与事件相关的加密邮件列表，用于与报告者的初步讨论、进一步披露以及修复的协调。

在确认开发者同意遵守此谅解备忘录和记录过程后，硬件安全团队将向披露方提供一份应最初被告知问题的开发者（领域专家）名单。这些开发者组成初始响应团队，负责在初次接触后处理问题。硬件安全团队支持响应团队，但不一定参与缓解开发过程。

虽然个别开发者可能通过雇主受到保密协议的覆盖，但他们作为Linux内核开发者不能单独签订保密协议。然而，他们将同意遵守记录在案的过程和谅解备忘录。

披露方应提供所有已被告知或应被告知问题的实体的联系人名单。
这服务于多个目的：

- 公开的实体列表允许整个行业内的沟通，例如，其他操作系统供应商、硬件供应商等。
- 公开的实体可以被联系以提名应该参与缓解措施开发的专家。
- 如果处理某个问题所需的专家受雇于列出的实体或为列出实体的成员，则响应团队可以从该实体请求公开该专家。这确保了该专家也是实体响应团队的一部分。

公开

公开方通过特定的加密邮件列表向初始响应团队提供详细信息。
根据我们的经验，这些问题的技术文档通常是一个充分的起点，而进一步的技术澄清最好通过电子邮件进行。

缓解措施开发

初始响应团队设立一个加密邮件列表或在适当的情况下重新利用现有的邮件列表。
使用邮件列表接近正常的Linux开发流程，并且在过去成功地用于开发各种硬件安全问题的缓解措施。
邮件列表的运作方式与正常的Linux开发相同：补丁被发布、讨论和审查，如果达成一致，则应用到非公开的git仓库中，该仓库仅通过安全连接对参与开发的人员开放。仓库包含针对主线内核的主要开发分支以及必要时针对稳定内核版本的回溯分支。
初始响应团队将根据需要从Linux内核开发者社区中识别更多的专家。引入专家可以在开发过程的任何时间点进行，并需及时处理。
如果专家是披露方提供的披露名单上实体的雇员或成员，那么将向相关实体请求参与。如果不是这样，那么披露方将被告知专家的参与情况。专家受谅解备忘录的约束，披露方被要求确认专家的参与。如果披露方有充分的理由反对，必须在五个工作日内提出异议，并立即与事件团队解决。如果披露方在五个工作日内没有回应，则视为默认同意。
确认或解决异议后，由事件团队公开专家，并将其纳入开发流程中。参与者不得在私有邮件列表之外讨论问题。参与者在处理补丁时不得使用任何共享资源（例如雇主构建农场、CI系统等）。
协调发布
"""""""""""""""""""
涉事各方将协商确定禁令结束的日期和时间。到那时，准备好的缓解措施将被整合到相关的内核树中并公布。没有预先通知过程：修复措施将在公共场合发布，对所有人同时可用。
虽然我们理解硬件安全问题需要协调的禁令时间，但禁令时间应限制在所有涉事方开发、测试和准备缓解措施所需的最短时间。人为延长禁令时间以满足会议演讲日期或其他非技术原因会为涉事开发者和响应团队带来更多的工作负担，因为补丁需要保持更新以跟上正在进行的上游内核开发，这可能会造成冲突的更改。
CVE分配
""""""""""""""
硬件安全团队和初始响应团队都不分配CVE，开发过程也不需要CVE。如果披露方提供了CVE，可以用于文档目的。
流程大使
-------------------
为了帮助这个流程，我们在各个组织中建立了大使，他们可以回答关于报告流程和进一步处理的问题，提供指导。除非被响应团队或涉事披露方请求，大使不参与特定问题的披露。当前的大使列表如下：

  ============= ========================================================
  AMD		Tom Lendacky <thomas.lendacky@amd.com>
  Ampere	Darren Hart <darren@os.amperecomputing.com>
  ARM		Catalin Marinas <catalin.marinas@arm.com>
  IBM Power	Michael Ellerman <ellerman@au.ibm.com>
  IBM Z		Christian Borntraeger <borntraeger@de.ibm.com>
  Intel		Tony Luck <tony.luck@intel.com>
  Qualcomm	Trilok Soni <quic_tsoni@quicinc.com>
  RISC-V	Palmer Dabbelt <palmer@dabbelt.com>
  Samsung	Javier González <javier.gonz@samsung.com>

  Microsoft	James Morris <jamorris@linux.microsoft.com>
  Xen		Andrew Cooper <andrew.cooper3@citrix.com>

  Canonical	John Johansen <john.johansen@canonical.com>
  Debian	Ben Hutchings <ben@decadent.org.uk>
  Oracle	Konrad Rzeszutek Wilk <konrad.wilk@oracle.com>
  Red Hat	Josh Poimboeuf <jpoimboe@redhat.com>
  SUSE		Jiri Kosina <jkosina@suse.cz>

  Google	Kees Cook <keescook@chromium.org>

  LLVM		Nick Desaulniers <ndesaulniers@google.com>
  ============= ========================================================

如果你想让你的组织加入大使名单，请联系硬件安全团队。提名的大使必须完全理解和支持我们的流程，并且最好在Linux内核社区中具有良好的联系。
加密邮件列表
-----------------------
我们使用加密邮件列表进行通信。这些列表的工作原理是发送给列表的电子邮件用列表的PGP密钥或S/MIME证书加密。邮件列表软件解密电子邮件，并使用订阅者的PGP密钥或S/MIME证书单独重新加密。有关邮件列表软件和用于确保列表安全性和数据保护的设置的详细信息可以在这里找到：https://korg.wiki.kernel.org/userdoc/remail
列表密钥
^^^^^^^^^
对于初次联系，请参阅：ref:`Contact`。对于特定事件的邮件列表，密钥和S/MIME证书将通过从特定列表发出的电子邮件传达给订阅者。
特定事件的邮件列表订阅
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

订阅事宜由响应团队处理。希望参与沟通的已披露方需向响应团队发送潜在订阅者的名单，以便响应团队验证订阅请求。每位订阅者都需要通过电子邮件向响应团队发送订阅请求。该电子邮件必须使用订阅者的PGP密钥或S/MIME证书进行签名。如果使用PGP密钥，则必须从公共密钥服务器获取，并理想情况下与Linux内核的PGP信任网络相连。详情请见：https://www.kernel.org/signature.html
响应团队会验证订阅请求的有效性，并将订阅者添加到列表中。订阅后，订阅者将收到来自邮件列表的电子邮件，这些邮件使用列表的PGP密钥或列表的S/MIME证书进行了签名。订阅者的电子邮件客户端可以从签名中提取PGP密钥或S/MIME证书，以便订阅者可以向列表发送加密邮件。
