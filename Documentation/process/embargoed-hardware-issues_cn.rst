### 受禁运硬件问题

#### 范围

因硬件问题导致的安全问题是不同于纯软件漏洞的另一类安全问题，这类问题仅影响Linux内核。像Meltdown、Spectre、L1TF等硬件问题需要区别对待，因为它们通常会影响所有操作系统（“OS”），因此需要跨不同的操作系统供应商、发行版、硬件供应商及其他相关方进行协调。对于某些问题，软件缓解措施可能依赖于微码或固件更新，这需要进一步的协调。

#### 联系方式

Linux内核硬件安全团队与常规的Linux内核安全团队是分开的。
该团队只负责处理受禁运的硬件安全问题的修复工作。关于Linux内核中的纯软件安全漏洞报告不属于该团队处理范围，报告者将被引导联系常规的Linux内核安全团队（:ref:`Documentation/admin-guide/ <securitybugs>`）。

该团队可以通过电子邮件联系：<hardware-security@kernel.org>。这是一个由安全官员组成的私人列表，他们将帮助您根据我们的文档流程进行协调。
此列表是加密的，发往列表的邮件可以使用PGP或S/MIME加密，并且必须用报告者的PGP密钥或S/MIME证书签名。列表的PGP密钥和S/MIME证书可以从以下URL获取：

- PGP: https://www.kernel.org/static/files/hardware-security.asc
- S/MIME: https://www.kernel.org/static/files/hardware-security.crt

尽管硬件安全问题通常由受影响的硬件供应商处理，我们欢迎研究人员或已识别潜在硬件缺陷的个人联系我们。
##### 硬件安全官员

当前的硬件安全官员团队成员包括：
- Linus Torvalds（Linux基金会研究员）
- Greg Kroah-Hartman（Linux基金会研究员）
- Thomas Gleixner（Linux基金会研究员）

##### 邮件列表的操作

我们在流程中使用的加密邮件列表托管在Linux基金会的IT基础设施上。通过提供这项服务，Linux基金会IT运营人员从技术上能够访问这些禁运信息，但他们的雇佣合同要求他们保密。Linux基金会IT人员还负责管理和维护kernel.org基础设施的其余部分。
Linux基金会当前的IT项目基础设施负责人是Konstantin Ryabitsev。

#### 保密协议

Linux内核硬件安全团队不是一个正式机构，因此无法签订任何保密协议。内核社区意识到此类问题的敏感性，并提供谅解备忘录作为替代方案。

#### 谅解备忘录

Linux内核社区深刻理解在不同操作系统供应商、发行版、硬件供应商及其他相关方之间协调时对硬件安全问题保持禁运的必要性。
Linux 内核社区在过去成功地处理了硬件安全问题，并且已经建立了必要的机制，以允许在禁运限制下进行符合社区规定的开发。

Linux 内核社区有一个专门的硬件安全团队负责初步接触，该团队监督在禁运规则下处理这些问题的过程。

硬件安全团队确定将组成特定问题初始响应团队的开发者（领域专家）。初始响应团队可以引入更多开发者（领域专家）来以最佳技术方式解决该问题。

所有参与的开发者承诺遵守禁运规则并保密收到的信息。违反此承诺将导致立即从当前问题中被排除，并从所有相关邮件列表中移除。此外，硬件安全团队还将禁止违规者参与未来的问题处理。这种后果的影响在我们社区中是一个非常有效的威慑手段。如果发生违规情况，硬件安全团队会立即通知相关各方。如果您或任何人发现潜在的违规行为，请立即向硬件安全官员报告。

流程
^^^^^^^

由于 Linux 内核开发具有全球分布的性质，面对面会议几乎不可能解决硬件安全问题。电话会议由于时区和其他因素难以协调，应仅在绝对必要时使用。加密电子邮件已被证明是处理这类问题最有效和安全的通信方法。

披露开始
"""""""""""""""""""

披露通过电子邮件联系 Linux 内核硬件安全团队开始。初次联系应包含问题描述及任何已知受影响硬件的清单。如果您的组织制造或分发受影响的硬件，我们鼓励您考虑还有哪些其他硬件可能受到影响。

硬件安全团队将提供一个与事件相关的加密邮件列表，用于与报告者的初步讨论、进一步披露以及修复工作的协调。

硬件安全团队将在确认开发者同意遵守本谅解备忘录和记录的流程后，向披露方提供一份应首先被告知问题的开发者（领域专家）名单。这些开发者将组成初始响应团队，并在初步接触后负责处理该问题。硬件安全团队支持响应团队，但不一定参与缓解措施的开发过程。

虽然个别开发者可能通过其雇主受到保密协议的覆盖，但他们不能在其作为 Linux 内核开发者角色的情况下签订个人保密协议。然而，他们将同意遵守记录的流程和谅解备忘录。

披露方应提供所有其他已被告知或应被告知问题的相关实体的联系人名单。
这有几个目的：

- 披露的实体列表允许跨行业沟通，例如其他操作系统供应商、硬件供应商等。
- 可以联系披露的实体，推荐应参与缓解措施开发的专家。
- 如果处理某个问题所需的专家受雇于已列出的实体或隶属于已列出的实体，则响应团队可以请求该实体披露该专家。这确保了该专家也是该实体响应团队的一部分。

披露
"""""""""

披露方通过特定的加密邮件列表向初始响应团队提供详细信息。
根据我们的经验，这些问题的技术文档通常是足够的起点，并且进一步的技术澄清最好通过电子邮件进行。

缓解措施开发
"""""""""""""""""""""

初始响应团队会建立一个加密邮件列表或在适当的情况下重新使用现有的邮件列表。
使用邮件列表接近正常的Linux开发流程，并且在过去成功地用于开发各种硬件安全问题的缓解措施。
邮件列表的运作方式与正常的Linux开发相同：补丁被发布、讨论和审查，如果达成一致，则应用到一个非公开的git仓库中，该仓库仅通过安全连接对参与开发的人员开放。仓库包含针对主线内核的主要开发分支以及必要时为稳定内核版本准备的回退分支。
初始响应团队将根据需要从Linux内核开发者社区中识别更多的专家。引入专家可以在开发过程中的任何时候进行，并且需要及时处理。
如果专家是披露方提供的披露名单上的某个实体的雇员或成员，则将请求该相关实体参与。
如果不是，则披露方将被告知专家的参与。专家受谅解备忘录（Memorandum of Understanding）约束，披露方需确认其参与。如披露方有充分理由反对，则需在五个工作日内提出，并立即与事件团队解决。如披露方在五个工作日内未作出回应，则视为默认同意。
在确认或解决异议后，由事件团队披露专家并将其纳入开发流程。
参与者不得在私有邮件列表之外讨论问题。参与者在处理补丁时不得使用任何共享资源（例如雇主构建农场、CI系统等）。
协调发布
"""""""""""""""""""
涉事各方将协商确定禁令结束的时间。届时，准备好的缓解措施将被整合到相关的内核树中并发布。没有预先通知的过程：修复会在公共环境中发布，并可供所有人查看。
虽然我们理解硬件安全问题需要协调禁令时间，但禁令时间应限制在所有涉事方开发、测试和准备缓解措施所需的最短时间。人为延长禁令时间以满足会议演讲日期或其他非技术原因会增加开发者和响应团队的工作负担，因为补丁需要不断更新以跟上正在进行的上游内核开发，这可能会造成冲突。
CVE分配
"""""""""""""""""""
硬件安全团队和初始响应团队均不分配CVE编号，且开发过程也不需要CVE编号。如果披露方提供了CVE编号，则可用于文档目的。
流程大使
-------------------
为了协助此流程，我们在多个组织中建立了大使，他们可以回答有关报告流程和进一步处理的问题或提供指导。除非响应团队或涉事披露方请求，大使不会参与特定问题的披露。当前的大使列表如下：

  ============= ========================================================
  AMD           Tom Lendacky <thomas.lendacky@amd.com>
  Ampere        Darren Hart <darren@os.amperecomputing.com>
  ARM           Catalin Marinas <catalin.marinas@arm.com>
  IBM Power     Michael Ellerman <ellerman@au.ibm.com>
  IBM Z         Christian Borntraeger <borntraeger@de.ibm.com>
  Intel         Tony Luck <tony.luck@intel.com>
  Qualcomm      Trilok Soni <quic_tsoni@quicinc.com>
  RISC-V        Palmer Dabbelt <palmer@dabbelt.com>
  Samsung       Javier González <javier.gonz@samsung.com>
  Microsoft     James Morris <jamorris@linux.microsoft.com>
  Xen           Andrew Cooper <andrew.cooper3@citrix.com>
  Canonical     John Johansen <john.johansen@canonical.com>
  Debian        Ben Hutchings <ben@decadent.org.uk>
  Oracle        Konrad Rzeszutek Wilk <konrad.wilk@oracle.com>
  Red Hat       Josh Poimboeuf <jpoimboe@redhat.com>
  SUSE          Jiri Kosina <jkosina@suse.cz>
  Google        Kees Cook <keescook@chromium.org>
  LLVM          Nick Desaulniers <ndesaulniers@google.com>
  ============= ========================================================

如果您希望您的组织加入大使列表，请联系硬件安全团队。提名的大使必须全面理解和支持我们的流程，并且最好在Linux内核社区中有良好的人脉。
加密邮件列表
-----------------------
我们使用加密邮件列表进行通信。这些列表的工作原理是发送给列表的电子邮件通过列表的PGP密钥或S/MIME证书进行加密。邮件列表软件解密电子邮件，并根据每个订阅者的PGP密钥或S/MIME证书单独重新加密。关于邮件列表软件及其用于确保列表安全性及数据保护的具体设置详情可在此处找到：https://korg.wiki.kernel.org/userdoc/remail
邮件列表密钥
^^^^^^^^^
对于初次联系，请参见 :ref:`Contact`。对于特定事件的邮件列表，密钥和S/MIME证书将通过从特定列表发出的电子邮件传达给订阅者。
特定事件的订阅列表
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

订阅由响应团队处理。希望参与通信的已披露方需要向响应团队发送一份潜在订阅者的名单，以便响应团队验证订阅请求。每个订阅者都需要通过电子邮件向响应团队发送订阅请求。该电子邮件必须使用订阅者的PGP密钥或S/MIME证书进行签名。如果使用PGP密钥，则该密钥必须可以从公共密钥服务器获取，并且最好与Linux内核的PGP信任网络相连。详见：https://www.kernel.org/signature.html
响应团队会验证订阅请求的有效性，并将订阅者添加到列表中。订阅后，订阅者将收到邮件列表发送的电子邮件，这些邮件使用列表的PGP密钥或S/MIME证书进行了签名。订阅者的电子邮件客户端可以从签名中提取PGP密钥或S/MIME证书，以便订阅者可以向列表发送加密邮件。
