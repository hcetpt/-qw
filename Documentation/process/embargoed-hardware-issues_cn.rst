# 受禁运影响的硬件问题

## 范围

因硬件问题导致的安全问题是不同于纯粹只影响Linux内核的软件缺陷的另一类别。
像Meltdown（熔毁）、Spectre（幽灵）、L1TF等硬件问题必须区别对待，因为它们通常会影响到所有的操作系统（"OS"），因此需要在不同的操作系统供应商、发行版、硬件供应商及其他相关方之间进行协调。对于某些问题，软件缓解措施可能依赖于微码或固件更新，这又需要进一步的协调。

## 联系方式

### Linux 内核硬件安全团队

Linux内核硬件安全团队与常规的Linux内核安全团队是分开的。
该团队仅负责开发受禁运影响的硬件安全问题的修复方案。报告关于Linux内核中纯软件安全漏洞的情况不会由这个团队处理，报告人会被指引联系常规的Linux内核安全团队（:ref:`Documentation/admin-guide/<securitybugs>`）。

该团队可以通过电子邮件联系：<hardware-security@kernel.org>。这是一个由安全官员组成的私人列表，他们会帮助您按照我们的文档流程协调修复工作。
列表是加密的，并且发往列表的邮件可以使用PGP或S/MIME加密，并且必须使用报告人的PGP密钥或S/MIME证书签名。列表的PGP密钥和S/MIME证书可以从以下URL获取：

- PGP: https://www.kernel.org/static/files/hardware-security.asc
- S/MIME: https://www.kernel.org/static/files/hardware-security.crt

虽然硬件安全问题通常由受影响的硬件供应商处理，但我们欢迎来自研究者或发现潜在硬件缺陷的个人的联系。

### 硬件安全官员

当前的硬件安全官员团队成员包括：
- Linus Torvalds（Linux基金会研究员）
- Greg Kroah-Hartman（Linux基金会研究员）
- Thomas Gleixner（Linux基金会研究员）

### 邮件列表的运作

我们流程中使用的加密邮件列表托管在Linux基金会的信息技术基础设施上。通过提供这项服务，Linux基金会IT运营人员的技术上具有访问禁运信息的能力，但他们根据雇佣合同有保密义务。Linux基金会IT人员还负责管理和运营kernel.org的其他基础设施。
目前Linux基金会IT项目基础设施的负责人是Konstantin Ryabitsev。

## 保密协议

Linux内核硬件安全团队并非正式机构，因此无法签订任何保密协议。内核社区意识到这类问题的敏感性，并提供了谅解备忘录作为替代。

### 谅解备忘录

Linux内核社区深刻理解到将硬件安全问题置于禁运之下以协调不同操作系统供应商、发行版、硬件供应商及其他相关方的重要性。
Linux 内核社区在过去成功地处理了硬件安全问题，并已建立了必要的机制，使得社区能够在保密限制下进行合规的开发工作。

Linux 内核社区设有一个专门的硬件安全团队负责最初的联络，该团队监督在保密规则下处理此类问题的过程。

硬件安全团队会确定那些将针对特定问题形成初步响应小组的开发者（领域专家）。初步响应小组可以引入更多的开发者（领域专家），以最佳的技术方式解决该问题。

所有参与的开发者都承诺遵守保密规则并保守收到的信息。违反此承诺将会导致立即从当前问题中被排除，并从所有相关的邮件列表中移除。此外，硬件安全团队也将禁止违规者参与未来的任何问题。这种后果的影响在我们社区内是一个非常有效的威慑手段。一旦发生违规行为，硬件安全团队将立即通知相关各方。如果您或任何人发现潜在的违规情况，请立即向硬件安全官员报告。

流程
^^^^^^^

由于 Linux 内核开发具有全球分布的特点，面对面会议几乎不可能用于解决硬件安全问题。电话会议因时区和其他因素难以协调，仅在绝对必要时使用。加密电子邮件已被证明是处理这类问题最有效且安全的沟通方式。

披露开始
"""""""""""""""""""

披露始于通过电子邮件联系 Linux 内核硬件安全团队。初次联系应包含问题描述及已知受影响硬件的清单。如果您的组织构建或分发受影响的硬件，我们也鼓励您考虑其他可能受影响的硬件。

硬件安全团队将提供一个特定于事件的加密邮件列表，用于与报告者进行初始讨论、进一步披露信息以及协调修复工作。

硬件安全团队将在确认开发者同意遵守本谅解备忘录和记录的流程后，向披露方提供一份应最初被告知此问题的开发者（领域专家）名单。这些开发者组成初步响应小组，并在初次接触后负责处理该问题。硬件安全团队支持响应小组，但不一定直接参与到缓解措施的开发过程中。

虽然个别开发者可能通过其雇主受保密协议的约束，但他们作为 Linux 内核开发者不能单独签订保密协议。不过，他们会同意遵守记录的流程和谅解备忘录。

披露方应提供所有已经被告知或应当被告知该问题的相关实体的联系人名单。
这实现了几个目的：

- 已披露实体的列表允许行业内进行沟通，例如，其他操作系统供应商、硬件供应商等。
- 可以联系已披露的实体来提名应该参与缓解措施开发的专家。
- 如果处理某个问题所需的专家受雇于已列出的实体或为该实体的成员，则响应团队可以从该实体请求披露该专家。这样可以确保该专家也是实体响应团队的一部分。
披露
"""""""""

披露方通过特定的加密邮件列表向初始响应团队提供详细信息。
根据我们的经验，这些问题的技术文档通常是足够的起点，而进一步的技术澄清最好通过电子邮件完成。
缓解措施开发
"""""""""""""""""""""

初始响应团队建立一个加密的邮件列表或在适当的情况下重新利用现有的邮件列表。
使用邮件列表接近正常的Linux开发流程，并且在过去成功地用于开发各种硬件安全问题的缓解措施。
邮件列表的操作方式与正常的Linux开发相同：补丁被发布、讨论和审查，如果达成共识，则应用到一个非公开的git仓库中，该仓库仅通过安全连接对参与开发的人员开放。该仓库包含针对主线内核的主要开发分支以及根据需要为稳定内核版本的回退分支。
初始响应团队将根据需要从Linux内核开发者社区识别更多的专家。引入专家可以在开发过程中的任何时间点进行，并需要及时处理。
如果专家是披露方提供的披露名单上的某个实体的雇员或成员，则将向相关实体请求参与。
如果不是这样，那么披露方将被通知有关专家的参与情况。专家受谅解备忘录的约束，披露方被要求确认专家的参与。如果披露方有充分的理由反对，必须在五个工作日内提出异议，并立即与事件团队解决。如果披露方在五个工作日内没有回应，则视为默认同意。
确认或解决异议后，由事件团队公开专家并将其引入开发流程中。
列表参与者不得在私有邮件列表之外讨论该问题。列表参与者在处理补丁时不得使用任何共享资源（例如雇主构建农场、持续集成系统等）。
**协调发布**

涉及各方将协商确定禁令结束的时间和日期。届时，准备好的缓解措施将被整合到相关的内核树中并公开发布。不存在预先通知的过程：修复会在公众面前同时发布，对所有人都可用。
我们理解硬件安全问题需要协调禁令时间，但禁令时间应限制在所有涉及各方开发、测试和准备缓解措施所需的最短时间。人为延长禁令时间以满足会议演讲日期或其他非技术原因会给参与的开发者和响应团队带来更多的工作负担，因为补丁需要保持更新以跟上上游内核开发的步伐，这可能会产生冲突的变化。
**CVE分配**

硬件安全团队和初始响应团队均不负责分配CVE编号，也不要求在开发过程中提供CVE编号。如果披露方提供了CVE编号，则可用于文档目的。
**过程大使**

为了协助这一过程，我们在各个组织中设立了大使，他们可以回答有关报告过程和后续处理的问题或提供指导。除非响应团队或涉及的已披露方请求，否则大使不会参与特定问题的披露。当前的大使名单如下：

| 组织 | 联系人 |
| --- | --- |
| AMD | Tom Lendacky <thomas.lendacky@amd.com> |
| Ampere | Darren Hart <darren@os.amperecomputing.com> |
| ARM | Catalin Marinas <catalin.marinas@arm.com> |
| IBM Power | Michael Ellerman <ellerman@au.ibm.com> |
| IBM Z | Christian Borntraeger <borntraeger@de.ibm.com> |
| Intel | Tony Luck <tony.luck@intel.com> |
| Qualcomm | Trilok Soni <quic_tsoni@quicinc.com> |
| RISC-V | Palmer Dabbelt <palmer@dabbelt.com> |
| Samsung | Javier González <javier.gonz@samsung.com> |
| Microsoft | James Morris <jamorris@linux.microsoft.com> |
| Xen | Andrew Cooper <andrew.cooper3@citrix.com> |
| Canonical | John Johansen <john.johansen@canonical.com> |
| Debian | Ben Hutchings <ben@decadent.org.uk> |
| Oracle | Konrad Rzeszutek Wilk <konrad.wilk@oracle.com> |
| Red Hat | Josh Poimboeuf <jpoimboe@redhat.com> |
| SUSE | Jiri Kosina <jkosina@suse.cz> |
| Google | Kees Cook <keescook@chromium.org> |
| LLVM | Nick Desaulniers <ndesaulniers@google.com> |

如果您希望您的组织被列入大使名单，请联系硬件安全团队。提名的大使必须完全理解和支持我们的流程，并且最好在Linux内核社区中有广泛的联系。
**加密邮件列表**

我们使用加密邮件列表进行通信。这些列表的工作原理是发送到列表的电子邮件用列表的PGP密钥或S/MIME证书加密。邮件列表软件解密邮件并为每个订阅者单独重新加密，使用的是订阅者的PGP密钥或S/MIME证书。关于邮件列表软件及其设置以确保列表的安全性和数据保护的详细信息可在此处找到：https://korg.wiki.kernel.org/userdoc/remail
**列表密钥**

对于初次联系，请参见 :ref:`Contact`。对于特定事件的邮件列表，密钥和S/MIME证书通过从特定列表发送的电子邮件传达给订阅者。
特定事件的邮件列表订阅
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

订阅事宜由响应团队处理。希望参与沟通的相关方需将潜在订阅者的名单发送给响应团队，以便响应团队验证订阅请求。每位订阅者都需要通过电子邮件向响应团队发送订阅请求。该电子邮件必须使用订阅者的PGP密钥或S/MIME证书进行签名。如果使用PGP密钥，则该密钥必须可以从公共密钥服务器获取，并理想情况下应与Linux内核的PGP信任网络相连。详情请参阅：https://www.kernel.org/signature.html
响应团队会验证订阅请求的有效性，并将订阅者添加到列表中。订阅后，订阅者将收到由邮件列表发出的邮件，这些邮件使用列表的PGP密钥或列表的S/MIME证书进行了签名。订阅者的电子邮件客户端可以从签名中提取PGP密钥或S/MIME证书，这样订阅者就可以向列表发送加密邮件。
