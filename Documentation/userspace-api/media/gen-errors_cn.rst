.. SPDX 许可证标识符: GFDL-1.1-no-invariants-or-later

.. _gen_errors:

*******************
通用错误代码
*******************

.. _gen-errors:

.. tabularcolumns:: |p{2.5cm}|p{15.0cm}|

.. flat-table:: 通用错误代码
    :header-rows:  0
    :stub-columns: 0
    :widths: 1 16

    -  -  ``EAGAIN``（又名 ``EWOULDBLOCK``）

       -  ioctl 无法处理，因为设备处于无法执行此操作的状态。例如，在设备休眠时执行查询统计信息的 ioctl 就会发生这种情况。当 ioctl 需要等待某个事件，但设备是以非阻塞模式打开时，也会返回此错误。

-  -  ``EBADF``

       -  文件描述符无效

-  -  ``EBUSY``

       -  ioctl 无法处理，因为设备正忙。通常在设备流传输过程中，尝试更改可能影响流的内容或使用已分配的硬件资源时会返回此错误。必须先执行其他操作来解决此问题后才能重试 ioctl（通常是停止流传输后再重试）。

-  -  ``EFAULT``

       -  在从用户空间复制数据时发生失败，可能是由于无效的指针引用造成的。

-  -  ``EINVAL``

       -  一个或多个 ioctl 参数无效或超出允许范围。这是一个广泛使用的错误码。请参阅各个 ioctl 请求以了解具体原因。

-  -  ``ENODEV``

       -  设备未找到或已被移除。

-  -  ``ENOMEM``

       -  内存不足，无法处理所需的操作。

-  -  ``ENOTTY``

       -  文件描述符不支持该 ioctl 操作。

-  -  ``ENOSPC``

       -  在 USB 设备上，流 ioctl 可能返回此错误，表示此请求将超过为周期性传输预留的 USB 带宽（最多可达 80%）。

-  -  ``EPERM``

       -  权限被拒绝。如果设备需要写权限或需要某些特殊权限（如 root 用户），则可能会返回此错误。

-  -  ``EIO``

       -  输入/输出错误。通常用于与硬件设备通信出现问题的情况。这可能表明硬件损坏或不稳定。
这是一种“出错了，我放弃！”类型的错误
-  - ``ENXIO``

       -  没有与此设备特殊文件对应的设备
.. note::

  1. 此列表并不详尽；ioctl 可能会返回其他错误代码
  由于错误可能会导致驱动重置等副作用，
     应用程序在遇到意外错误时应终止运行，或者认为设备处于不良状态
  2. 特定请求的错误代码在各个请求描述中列出
