.. SPDX 许可证标识符: GFDL-1.1-no-invariants-or-later

.. _v4l2-meta-fmt-uvc:

*******************************
V4L2_META_FMT_UVC ('UVCH')
*******************************

UVC 负载头数据

描述
===========

此格式描述了从 UVC 数据包头中提取并通过元数据视频节点提供的标准 UVC 元数据。这些数据包括 UVC 负载头内容的标准部分的确切副本以及辅助的定时信息，这些定时信息对于准确解释那些头中的时间戳至关重要。详细信息请参阅 “UVC 1.5 类规范” 的 “2.4.3.3 视频和静态图像负载头” 部分。
每个 UVC 负载头的大小可以在 2 到 12 字节之间。缓冲区可以包含多个头，如果相机为相应的帧传输了多个这样的头。然而，当缓冲区满时或当它们不包含有用信息（例如没有 SCR 字段或该字段与前一个头相同）时，驱动程序可能会丢弃头，或者在设备发送大量头时进行速率限制。
每个单独的块包含以下字段：

.. flat-table:: UVC 元数据块
    :widths: 1 4
    :header-rows:  1
    :stub-columns: 0

    * - 字段
      - 描述
    * - __u64 ts;
      - 在主机字节序下的系统时间戳，由驱动程序在接收到负载时测量
    * - __u16 sof;
      - 在主机字节序下的 USB 帧号，同样由驱动程序尽可能接近上述时间戳获取，以便于它们之间的相关性
    * - :cspan:`1` *其余部分是 UVC 负载头的确切副本：*
    * - __u8 length;
      - 块剩余部分的长度，包括此字段
    * - __u8 flags;
      - 标志，指示其他标准 UVC 字段的存在
    * - __u8 buf[];
      - 头的剩余部分，可能包括 UVC PTS 和 SCR 字段
