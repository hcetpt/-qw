SPDX 许可证标识符: GFDL-1.1-no-invariants-or-later

.. _yuv-formats:

***********
YUV 格式
***********

YUV 是电视广播和复合视频信号的原生格式。它将亮度信息（Y）与色彩信息（U 和 V 或 Cb 和 Cr）分离。色彩信息由红色和蓝色的*色差*信号组成，这样可以通过从亮度分量中减去得到绿色分量。详见 :ref:`colorspaces` 获取转换示例。选择 YUV 是因为早期电视仅传输亮度信息。为了以一种与现有接收器兼容的方式添加色彩，增加了一个新的信号载波来传输色差信号。

子采样
===========

YUV 格式通常以较低的分辨率对色度分量进行编码，而亮度分量则使用较高的分辨率。这种利用人眼对亮度比色彩差异更敏感的压缩技术称为色度子采样。虽然在水平和垂直方向上可以有许多不同的子采样因子组合，但常见的因子为 1（无子采样）、2 和 4，并且水平子采样总是大于或等于垂直子采样。常见的组合如下：

- `4:4:4`：无子采样
- `4:2:2`：水平子采样 2 倍，无垂直子采样
- `4:2:0`：水平子采样 2 倍，垂直子采样 2 倍
- `4:1:1`：水平子采样 4 倍，无垂直子采样
- `4:1:0`：水平子采样 4 倍，垂直子采样 4 倍

对色度分量进行子采样实际上创建了可以位于不同空间位置的色度值：

- .. _yuv-chroma-centered:

  子采样的色度值可以通过简单地平均两个连续像素的色度值来计算。这实际上模拟了位于两个原始像素之间的像素的色度。这被称为中心化或间隙位置的色度。
- .. _yuv-chroma-cosited:

  另一个选项是以一种将它们放置在同一空间位置的方式来子采样色度值。这可以通过跳过每隔一个色度样本（产生混叠伪影），或者使用奇数个抽头的滤波器来实现。这被称为共位置色度。

以下示例展示了在一个 4x4 图像中的不同色度位置组合：

.. flat-table:: 4:2:2 子采样，间隙位置
    :header-rows: 1
    :stub-columns: 1

    * -
      - 0
      -
      - 1
      -
      - 2
      -
      - 3
    * - 0
      - Y
      - C
      - Y
      -
      - Y
      - C
      - Y
    * - 1
      - Y
      - C
      - Y
      -
      - Y
      - C
      - Y
    * - 2
      - Y
      - C
      - Y
      -
      - Y
      - C
      - Y
    * - 3
      - Y
      - C
      - Y
      -
      - Y
      - C
      - Y

.. flat-table:: 4:2:2 子采样，共位置
    :header-rows: 1
    :stub-columns: 1

    * -
      - 0
      -
      - 1
      -
      - 2
      -
      - 3
    * - 0
      - Y/C
      -
      - Y
      -
      - Y/C
      -
      - Y
    * - 1
      - Y/C
      -
      - Y
      -
      - Y/C
      -
      - Y
    * - 2
      - Y/C
      -
      - Y
      -
      - Y/C
      -
      - Y
    * - 3
      - Y/C
      -
      - Y
      -
      - Y/C
      -
      - Y

.. flat-table:: 4:2:0 子采样，水平间隙位置，垂直共位置
    :header-rows: 1
    :stub-columns: 1

    * -
      - 0
      -
      - 1
      -
      - 2
      -
      - 3
    * - 0
      - Y
      - C
      - Y
      -
      - Y
      - C
      - Y
    * - 1
      - Y
      -
      - Y
      -
      - Y
      -
      - Y
    * - 2
      - Y
      - C
      - Y
      -
      - Y
      - C
      - Y
    * - 3
      - Y
      -
      - Y
      -
      - Y
      -
      - Y

.. flat-table:: 4:1:0 子采样，水平和垂直间隙位置
    :header-rows: 1
    :stub-columns: 1

    * -
      - 0
      -
      - 1
      -
      - 2
      -
      - 3
    * - 0
      - Y
      -
      - Y
      -
      - Y
      -
      - Y
    * -
      -
      -
      -
      -
      -
      -
      -
    * - 1
      - Y
      -
      - Y
      -
      - Y
      -
      - Y
    * -
      -
      -
      -
      - C
      -
      -
      -
    * - 2
      - Y
      -
      - Y
      -
      - Y
      -
      - Y
    * -
      -
      -
      -
      -
      -
      -
      -
    * - 3
      - Y
      -
      - Y
      -
      - Y
      -
      - Y

.. toctree::
    :maxdepth: 1

    pixfmt-packed-yuv
    pixfmt-yuv-planar
    pixfmt-yuv-luma
    pixfmt-y8i
    pixfmt-y12i
    pixfmt-uv8
    pixfmt-m420
