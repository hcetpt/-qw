.. SPDX 许可证标识符: GFDL-1.1-no-invariants-or-later

.. _触摸：

*************
触摸设备
*************

触摸设备通过名为 `/dev/v4l-touch0` 到 `/dev/v4l-touch255` 的字符设备特殊文件进行访问，主设备号为 81，次设备号动态分配为 0 到 255。
概述
========

传感器可以是光学的或投影电容式触摸（PCT）。
需要处理原始数据以生成输入事件。在某些系统中，这种处理可能在 ASIC 上完成，而原始数据仅用于诊断或调优。在其他系统中，ASIC 是一个简单的模拟前端设备，提供高速触摸数据，任何触摸处理必须在主机上完成。
对于电容式触摸感应，触摸屏由水平和垂直导体组成（也称为行/列、X/Y 线或 tx/rx）。交叉点处测量到的是互电容。或者，自电容独立地测量每列和每行的信号。
触摸输入可以通过将原始电容测量值与无触摸参考（或“基线”）测量值进行比较来确定：

Delta = 原始值 - 参考值

参考测量值考虑了触摸传感器矩阵中的电容变化，例如制造不规则性、环境或边缘效应。
查询功能
=====================

支持触摸接口的设备会在通过 `VIDIOC_QUERYCAP` ioctl 返回的 `:c:type:v4l2_capability` 结构的 `capabilities` 字段中设置 `V4L2_CAP_VIDEO_CAPTURE` 标志和 `V4L2_CAP_TOUCH` 标志。
至少支持读写或流式 I/O 方法之一。
触摸设备支持的格式在 :ref:`触摸格式 <tch-formats>` 中进行了记录。
数据格式协商
=======================

触摸设备可能支持任何 I/O 方法
