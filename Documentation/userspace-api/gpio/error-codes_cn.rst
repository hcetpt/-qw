.. SPDX 许可证标识符: GPL-2.0

.. _gpio_errors:

*******************
GPIO 错误代码
*******************

.. _gpio-errors:

.. tabularcolumns:: |p{2.5cm}|p{15.0cm}|

.. flat-table:: 常见的 GPIO 错误代码
    :header-rows:  0
    :stub-columns: 0
    :widths: 1 16

    -  -  ``EAGAIN``（又名 ``EWOULDBLOCK``）

       -  设备以非阻塞模式打开，并且由于没有可用的数据无法执行读取操作。
-  -  ``EBADF``

       -  文件描述符无效。
-  -  ``EBUSY``

       -  由于设备忙碌，无法处理 ioctl 请求。通常在 ioctl 尝试使用一个已经被分配的资源时返回。在重新尝试 ioctl 之前必须先执行另一个操作来解决这个问题。
-  -  ``EFAULT``

       -  在从用户空间复制数据时失败，可能是由于无效的指针引用造成的。
-  -  ``EINVAL``

       -  一个或多个 ioctl 参数无效或超出允许的范围。这是一个广泛使用的错误代码。
-  -  ``ENODEV``

       -  设备未找到或已被移除。
-  -  ``ENOMEM``

       -  没有足够的内存来处理所需的操作。
-  -  ``EPERM``

       -  权限被拒绝。通常在尝试执行与当前线路配置不兼容的操作时返回。
-  -  ``EIO``

       -  I/O 错误。通常在与硬件设备通信出现问题或请求硬件不支持的功能时返回。这可能表明硬件存在故障或不稳定。

这是一种“出错了，我放弃了！”类型的错误。
- ``ENXIO``

  - 通常在请求需要中断支持的功能时返回，但线路不支持中断。

.. note::

  1. 此列表并不全面；ioctl 可能会返回其他错误代码。由于错误可能会导致诸如驱动重置等副作用，应用程序应在遇到意外错误时中止，或者假定设备处于不良状态。
  2. 特定请求的错误代码列在各个请求的描述中。
