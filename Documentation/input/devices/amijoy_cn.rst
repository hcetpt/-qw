Amiga 摇杆扩展
~~~~~~~~~~~~~~~~~~~~~~~~~

Amiga 4 摇杆并口扩展
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

并口引脚：

=====  ======== ====   ==========
Pin    Meaning  Pin    Meaning
=====  ======== ====   ==========
 2     Up1	 6     Up2
 3     Down1	 7     Down2
 4     Left1	 8     Left2
 5     Right1	 9     Right2
13     Fire1	11     Fire2
18     Gnd1	18     Gnd2
=====  ======== ====   ==========

Amiga 数字摇杆引脚定义
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

=== ============
Pin Meaning
=== ============
1   Up
2   Down
3   Left
4   Right
5   n/c
6   Fire button
7   +5V (50mA)
8   Gnd
9   Thumb button
=== ============

Amiga 鼠标引脚定义
~~~~~~~~~~~~~~~~~~

=== ============
Pin Meaning
=== ============
1   V-pulse
2   H-pulse
3   VQ-pulse
4   HQ-pulse
5   Middle button
6   Left button
7   +5V (50mA)
8   Gnd
9   Right button
=== ============

Amiga 模拟摇杆引脚定义
~~~~~~~~~~~~~~~~~~~~~~~~~~~~

=== ==============
Pin Meaning
=== ==============
1   Top button
2   Top2 button
3   Trigger button
4   Thumb button
5   Analog X
6   n/c
7   +5V (50mA)
8   Gnd
9   Analog Y
=== ==============

Amiga 光笔引脚定义
~~~~~~~~~~~~~~~~~~~~~

=== =============
Pin Meaning
=== =============
1   n/c
2   n/c
3   n/c
4   n/c
5   Touch button
6   /Beamtrigger
7   +5V (50mA)
8   Gnd
9   Stylus button
=== =============

-------------------------------------------------------------------------------

======== === ==== ==== ====== ========================================
NAME     rev ADDR type chip   Description
======== === ==== ==== ====== ========================================
JOY0DAT      00A   R   Denise Joystick-mouse 0 数据（左垂直、水平）
JOY1DAT      00C   R   Denise Joystick-mouse 1 数据（右垂直、水平）
======== === ==== ==== ====== ========================================

这些地址各自读取一个 16 位寄存器。这些寄存器从 MDAT 串行流加载，并在 SCLK 的上升沿时钟同步。MLD 输出用于并行加载外部并行到串行转换器。该转换器则通过两个游戏控制器端口的 4 个四相输入（总共 8 个）加上 8 个新的控制位进行加载，这些控制位可以在 LISAID 的高 8 位中读取。
寄存器位定义如下：

- 鼠标计数器使用（引脚 1,3=Yclock，引脚 2,4=Xclock）

======== === === === === === === === === ====== === === === === === === ===
    BIT#  15  14  13  12  11  10  09  08     07  06  05  04  03  02  01  00
======== === === === === === === === === ====== === === === === === === ===
JOY0DAT   Y7  Y6  Y5  Y4  Y3  Y2  Y1  Y0     X7  X6  X5  X4  X3  X2  X1  X0
JOY1DAT   Y7  Y6  Y5  Y4  Y3  Y2  Y1  Y0     X7  X6  X5  X4  X3  X2  X1  X0
======== === === === === === === === === ====== === === === === === === ===

0=左侧控制器对，1=右侧控制器对
（总共 4 个计数器）。左右地址的位分配如下所示。每个 6 位计数器（Y7-Y2, X7-X2）由来自鼠标串行流的 2 个信号时钟同步。从接收到的第一个位开始：

+-------------------+-----------------------------------------+
| Serial | Bit Name | Description                             |
+========+==========+=========================================+
|   0    | M0H      | JOY0DAT 水平时钟                        |
+--------+----------+-----------------------------------------+
|   1    | M0HQ     | JOY0DAT 水平时钟（四相）                 |
+--------+----------+-----------------------------------------+
|   2    | M0V      | JOY0DAT 垂直时钟                        |
+--------+----------+-----------------------------------------+
|   3    | M0VQ     | JOY0DAT 垂直时钟（四相）                 |
+--------+----------+-----------------------------------------+
|   4    | M1V      | JOY1DAT 水平时钟                        |
+--------+----------+-----------------------------------------+
|   5    | M1VQ     | JOY1DAT 水平时钟（四相）                 |
+--------+----------+-----------------------------------------+
|   6    | M1V      | JOY1DAT 垂直时钟                        |
+--------+----------+-----------------------------------------+
|   7    | M1VQ     | JOY1DAT 垂直时钟（四相）                 |
+--------+----------+-----------------------------------------+

每个计数器的最后两位（Y1-Y0, X1-X0）可以用来确定相关输入信号的状态。
这使得这些引脚可以作为摇杆开关输入。
摇杆开关闭合可以这样解码：

+------------+------+---------------------------------+
| Directions | Pin# | Counter bits                    |
+============+======+=================================+
| Forward    |  1   | Y1 xor Y0 (BIT#09 xor BIT#08)   |
+------------+------+---------------------------------+
| Left       |  3   | Y1                              |
+------------+------+---------------------------------+
| Back       |  2   | X1 xor X0 (BIT#01 xor BIT#00)   |
+------------+------+---------------------------------+
| Right      |  4   | X1                              |
+------------+------+---------------------------------+

-------------------------------------------------------------------------------

========  === ==== ==== ====== =================================================
NAME      rev ADDR type chip    Description
========  === ==== ==== ====== =================================================
JOYTEST       036   W   Denise 同时写入所有 4 个摇杆-鼠标计数器
========  === ==== ==== ====== =================================================

                  鼠标计数器写测试数据：

========= === === === === === === === === ====== === === === === === === ===
     BIT#  15  14  13  12  11  10  09  08     07  06  05  04  03  02  01  00
========= === === === === === === === === ====== === === === === === === ===
  JOYxDAT  Y7  Y6  Y5  Y4  Y3  Y2  xx  xx     X7  X6  X5  X4  X3  X2  xx  xx
  JOYxDAT  Y7  Y6  Y5  Y4  Y3  Y2  xx  xx     X7  X6  X5  X4  X3  X2  xx  xx
========= === === === === === === === === ====== === === === === === === ===

-------------------------------------------------------------------------------

======= === ==== ==== ====== ========================================
NAME    rev ADDR type chip   Description
======= === ==== ==== ====== ========================================
POT0DAT  h  012   R   Paula 模拟计数器数据（左对，垂直、水平）
POT1DAT  h  014   R   Paula 模拟计数器数据（右对，垂直、水平）
======= === ==== ==== ====== ========================================

这些地址各自读取一对 8 位模拟计数器（总共 4 个计数器）。左右地址的位分配如下所示。计数器由来自 2 个控制器连接器（左-右）的各 2 个引脚停止。

====== === === === === === === === === ====== === === === === === === ===
  BIT#  15  14  13  12  11  10  09  08     07  06  05  04  03  02  01  00
====== === === === === === === === === ====== === === === === === === ===
 RIGHT  Y7  Y6  Y5  Y4  Y3  Y2  Y1  Y0     X7  X6  X5  X4  X3  X2  X1  X0
  LEFT  Y7  Y6  Y5  Y4  Y3  Y2  Y1  Y0     X7  X6  X5  X4  X3  X2  X1  X0
====== === === === === === === === === ====== === === === === === === ===

         +--------------------------+-------+
         | CONNECTORS               | PAULA |
         +-------+------+-----+-----+-------+
         | Loc.  | Dir. | Sym | pin | pin   |
         +=======+======+=====+=====+=======+
         | RIGHT | Y    | RX  | 9   | 33    |
         +-------+------+-----+-----+-------+
         | RIGHT | X    | RX  | 5   | 32    |
         +-------+------+-----+-----+-------+
         | LEFT  | Y    | LY  | 9   | 36    |
         +-------+------+-----+-----+-------+
         | LEFT  | X    | LX  | 5   | 35    |
         +-------+------+-----+-----+-------+

在正常（NTSC 或 PAL）水平线率下，模拟计数器将在一帧时间内给出满量程（FF）读数，大约为 500k 欧姆。随着水平线时间的加快，计数器将成比例地更快计数。
在做可变光束显示时应注意这一点。

-------------------------------------------------------------------------------

====== === ==== ==== ====== ================================================
NAME   rev ADDR type chip   Description
====== === ==== ==== ====== ================================================
POTGO      034   W   Paula 模拟端口（4 位）双向和数据，以及模拟计数器启动
====== === ==== ==== ====== ================================================
```
==============================================================================
名称   版本 地址 类型 芯片   描述
==============================================================================
POTINP     016   R   Paula  电位器引脚数据读取
==============================================================================

        该寄存器控制一个4位双向I/O端口，该端口与上述4个电位计共用相同的4个引脚。
+-------+----------+---------------------------------------------+
| 位号  | 功能     | 描述                                       |
+=======+==========+=============================================+
| 15    | OUTRY    | Paula 引脚 33 的输出使能                    |
+-------+----------+---------------------------------------------+
| 14    | DATRY    | Paula 引脚 33 的 I/O 数据                   |
+-------+----------+---------------------------------------------+
| 13    | OUTRX    | Paula 引脚 32 的输出使能                    |
+-------+----------+---------------------------------------------+
| 12    | DATRX    | Paula 引脚 32 的 I/O 数据                   |
+-------+----------+---------------------------------------------+
| 11    | OUTLY    | Paula 引脚 36 的输出使能                    |
+-------+----------+---------------------------------------------+
| 10    | DATLY    | Paula 引脚 36 的 I/O 数据                   |
+-------+----------+---------------------------------------------+
| 09    | OUTLX    | Paula 引脚 35 的输出使能                    |
+-------+----------+---------------------------------------------+
| 08    | DATLX    | Paula 引脚 35 的 I/O 数据                   |
+-------+----------+---------------------------------------------+
| 07-01 |   X      | 未使用                                     |
+-------+----------+---------------------------------------------+
| 00    | START    | 启动电位计（放电电容，启动计数器）          |
+-------+----------+---------------------------------------------+
```
