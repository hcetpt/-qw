```spdx
许可标识符：GPL-2.0

==================================
ATM (i)Chip IA Linux 驱动程序源码
==================================

			      请先阅读

--------------------------------------------------------------------------------

		 开始前请阅读！

--------------------------------------------------------------------------------

描述
===========

这是 Interphase PCI ATM (i)Chip IA Linux 驱动程序源码发布的 README 文件。
该驱动程序的特性和限制如下：

- 支持单一 VPI（VPI 值为 0）
- 支持服务器板上的 4K 虚电路（具有 512K 控制内存）和客户端板上的 1K 虚电路（具有 128K 控制内存）
- 支持 UBR、ABR 和 CBR 服务类别
- 仅支持 AAL5
- 支持在虚电路上设置 PCR
- 支持系统中的多个适配器
- 支持所有版本的 Interphase ATM PCI (i)Chip 适配卡，包括 x575（OC3，控制内存 128K、512K，数据包内存 128K、512K 和 1M）、x525（UTP25）和 x531（DS3 和 E3）。详情请见 http://www.iphase.com/
- 仅支持 x86 平台
- 支持 SMP
```
开始之前
================

安装
------------

1. 在系统中安装适配器

   要在系统中安装ATM适配器，请按照以下步骤操作：
   a. 以root身份登录
   b. 关闭系统并断电
   c. 在系统中安装一个或多个ATM适配器
   d. 将每个适配器连接到ATM交换机上的端口。如果适配器在系统加电时正确连接到交换机上，适配器前面板上的绿色“Link”LED指示灯将亮起
   e. 加电并启动系统
2. [已删除]

3. 使用ABR支持重建内核

   [ a. 和 b. 已删除 ]

   c. 重新配置内核，通过“make menuconfig”或“make xconfig”选择Interphase ia驱动程序
   d. 重建内核、可加载模块和ATM工具
   e. 安装新构建的内核和模块并重启
4. 如果适配器硬件驱动程序（ia驱动程序）作为模块构建，则加载它

   a. 以root身份登录
b. 切换到目录 /lib/modules/<kernel-version>/atm
c. 运行 "insmod suni.o;insmod iphase.o"
    适配器前面板上的黄色“状态”LED灯在驱动程序加载时会闪烁
d. 要验证 'ia' 驱动程序是否成功加载，请运行以下命令：

        cat /proc/atm/devices

    如果驱动程序成功加载，命令的输出将类似于以下内容：

        Itf Type    ESI/"MAC"addr AAL(TX,err,RX,err,drop) ..
0   ia      xxxxxxxxx  0 ( 0 0 0 0 0 )  5 ( 0 0 0 0 0 )

    您还可以检查系统日志文件 /var/log/messages 中与 ATM 驱动程序相关的消息
5. Ia 驱动配置

5.1 适配器缓冲区配置
    (i)Chip 板有三种不同的数据包 RAM 大小变体：128K、512K 和 1M。RAM 大小决定了缓冲区的数量和大小，默认的缓冲区大小和数量如下表所示：

        =========  =======  ======   ======   ======   ======   ======
         Total     Rx RAM   Tx RAM   Rx Buf   Tx Buf   Rx buf   Tx buf
         RAM size  size     size     size     size     cnt      cnt
        =========  =======  ======   ======   ======   ======   ======
           128K      64K      64K      10K      10K       6        6
           512K     256K     256K      10K      10K      25       25
             1M     512K     512K      10K      10K      51       51
        =========  =======  ======   ======   ======   ======   ======

    这些设置在大多数环境中应能很好地工作，但可以通过输入以下命令进行更改：

        insmod <IA_DIR>/ia.o IA_RX_BUF=<RX_CNT> IA_RX_BUF_SZ=<RX_SIZE> \
                IA_TX_BUF=<TX_CNT> IA_TX_BUF_SZ=<TX_SIZE>

    其中：

        - RX_CNT = 接收缓冲区的数量（范围为 1-128）
        - RX_SIZE = 接收缓冲区的大小（范围为 48-64K）
        - TX_CNT = 发送缓冲区的数量（范围为 1-128）
        - TX_SIZE = 发送缓冲区的大小（范围为 48-64K）

    注意事项：
        1. 发送和接收缓冲区的大小必须是 4 的倍数。
        2. 应当注意确保发送和接收缓冲区所需的内存不超过适配器的总数据包内存。

5.2 启用 ia 调试跟踪

    当 ia 驱动程序使用 CONFIG_ATM_IA_DEBUG 标志构建时，驱动程序可以根据需要提供更多调试信息。有一个位掩码变量 IADebugFlag 控制跟踪输出。您可以在 iphase.h 文件中找到 IADebugFlag 的位图。
    可以通过 insmod 命令行选项启用调试跟踪，例如，“insmod iphase.o IADebugFlag=0xffffffff” 可以同时启用所有调试信息并加载驱动程序。

6. 使用 ttcp_atm 和 PVC 测试 ia 驱动程序

   对于 PVC 设置，测试机器可以背对背连接或通过交换机连接。如果通过交换机连接，则必须为 PVC 配置交换机。
a. 对于 UBR 测试：

    在计划接收数据的测试机器上输入：

        ttcp_atm -r -a -s 0.100

    在另一台测试机器上输入：

        ttcp_atm -t -a -s 0.100 -n 10000

    运行 "ttcp_atm -h" 查看 ttcp_atm 工具的更多选项。
b. 对于ABR测试：

   它与UBR测试相同，但增加了一个命令选项：

	 -Pabr:max_pcr=<xxx>

   其中：

	     xxx = 最大峰值单元速率，范围从170到353207
此选项必须在两台机器上都设置

c. 对于CBR测试：

   它与UBR测试相同，但增加了一个命令选项：

	 -Pcbr:max_pcr=<xxx>

   其中：

	     xxx = 最大峰值单元速率，范围从170到353207
此选项只能在发送机器上设置

待解决问题
============

联系信息
---------

::

     客户支持：
	 美国：	电话：	(214) 654-5555
			传真：	(214) 654-5500
			电子邮件：	intouch@iphase.com
	 欧洲：	电话：	33 (0)1 41 15 44 00
			传真：	33 (0)1 41 15 12 13
     万维网：	http://www.iphase.com
     匿名FTP：	ftp.iphase.com
