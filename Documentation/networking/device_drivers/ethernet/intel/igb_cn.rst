SPDX 许可证标识符: GPL-2.0+ 

==========================================================
Linux 基础驱动程序用于 Intel® 以太网网络连接
==========================================================

Intel 千兆位 Linux 驱动程序
版权所有 (c) 1999-2018 Intel 公司
内容
========

- 识别您的适配器
- 命令行参数
- 额外配置
- 支持

识别您的适配器
========================
有关如何识别您的适配器的信息以及最新的 Intel 网络驱动程序，请参阅 Intel 支持网站：
https://www.intel.com/support

命令行参数
========================
如果该驱动程序是作为模块构建的，则可以使用以下可选参数。通过在命令行中使用 `modprobe` 命令并采用以下语法输入这些参数：

    modprobe igb [<option>=<VAL1>,<VAL2>,...]

每个系统中由该驱动程序支持的网络端口都需要一个 `<VAL#>`。这些值将按照功能顺序应用于每个实例。例如：

    modprobe igb max_vfs=2,4

在这种情况下，系统中有两个由 igb 支持的网络端口。
注意：描述符描述了一个数据缓冲区及其与数据缓冲区相关的属性。此信息由硬件访问。

max_vfs
-------
有效范围：0-7

此参数添加了对 SR-IOV 的支持。它使驱动程序生成最多 `max_vfs` 数量的虚拟函数。如果该值大于 0，则还会强制 VMDq 参数为 1 或更大。
驱动程序的参数按位置引用。因此，如果您有双端口适配器或系统中有多个适配器，并且希望每个端口有 N 个虚拟函数，您必须为每个端口指定一个数字，每个参数之间用逗号分隔。例如：

    modprobe igb max_vfs=4

这将在第一个端口上生成 4 个 VF
    modprobe igb max_vfs=2,4

这将在第一个端口上生成 2 个 VF，并在第二个端口上生成 4 个 VF
注意：加载带有这些参数的驱动程序时需要谨慎
根据您的系统配置、插槽数量等，在所有情况下无法预测命令行上的位置。
注意：设备和驱动程序均不控制VF（虚拟功能）如何映射到配置空间。总线布局将因操作系统而异。在支持此功能的操作系统上，您可以检查sysfs以找到映射。

注意：当启用SR-IOV模式或VMDq模式时，硬件VLAN过滤和VLAN标签剥离/插入将保持启用状态。请在添加新的VLAN过滤器之前移除旧的VLAN过滤器。例如：

    ip link set eth0 vf 0 vlan 100  // 为VF 0设置VLAN 100
    ip link set eth0 vf 0 vlan 0    // 删除VLAN 100
    ip link set eth0 vf 0 vlan 200  // 为VF 0设置新的VLAN 200

调试
-----
有效范围：0-16（0=无，...，16=全部）
默认值：0

此参数调整显示在系统日志中的调试信息级别。

附加功能与配置
======================

巨型帧（Jumbo Frames）
--------------------
通过将最大传输单元（MTU）设置为大于默认值1500来启用巨型帧支持。
使用ifconfig命令增加MTU大小。例如，输入以下命令，其中<x>是接口编号：

    ifconfig eth<x> mtu 9000 up

或者，您也可以使用ip命令如下：

    ip link set mtu 9000 dev eth<x>
    ip link set up dev eth<x>

此设置不会在重启后保存。可以通过在以下文件中添加“MTU=9000”来使设置永久生效：

- 对于RHEL：/etc/sysconfig/network-scripts/ifcfg-eth<x>
- 对于SLES：/etc/sysconfig/network/<config_file>

注意：巨型帧的最大MTU设置为9216。该值与最大巨型帧大小9234字节相一致。
注意：不支持在10或100Mbps下使用巨型帧，并可能导致性能下降或链路丢失。

ethtool
-------
驱动程序利用ethtool接口进行配置、诊断以及显示统计信息。需要最新版本的ethtool。下载地址为：

https://www.kernel.org/pub/software/network/ethtool/

启用唤醒功能（Wake on LAN，WoL）
-----------------------------
WoL通过ethtool工具进行配置。
WoL将在下次关机或重启时在系统上启用。对于此驱动程序版本，为了启用WoL，必须在关机或暂停系统之前加载igb驱动程序。
注意：仅在多端口设备的A端口上支持WoL。此外，以下设备不支持WoL：
- Intel(R) Gigabit VT 四端口服务器适配器

多队列（Multiqueue）
--------------------
在此模式下，为每个队列分配一个单独的MSI-X向量，并为其他中断（如链路状态更改和错误）分配一个向量。所有中断都通过中断调节进行节流。必须使用中断调节以避免在处理一个中断时出现中断风暴。调节值应至少等于预期的处理中断时间。多队列默认关闭。
要求：多队列需要MSI-X支持。如果未找到MSI-X，系统将回退到MSI或传统中断。此驱动程序支持在所有支持MSI-X的内核上接收多队列。
注意：在某些内核上，可能需要重新启动才能在单队列模式和多队列模式之间切换或反之。
### MAC 和 VLAN 防欺骗功能
当恶意驱动尝试发送伪造的数据包时，硬件会丢弃该数据包而不进行传输。
会向 PF 驱动发送中断通知其伪造尝试。当检测到伪造数据包时，PF 驱动将向系统日志（通过 "dmesg" 命令显示）发送以下消息：
在 VF(n) 上检测到欺骗事件，其中 n 是尝试进行欺骗的 VF 编号。

### 使用 IProute2 工具设置 MAC 地址、VLAN 和速率限制
您可以使用 IProute2 工具设置虚拟功能（VF）的 MAC 地址、默认 VLAN 和速率限制。如果您的版本不包含所需的所有功能，请从 Sourceforge 下载最新版本的 IProute2 工具。

### 基于信用的整形器（Qav 模式）
当启用硬件卸载模式下的 CBS qdisc 时，使用 CBS 算法（描述在 IEEE 802.1Q-2018 第 8.6.8.2 节并讨论在附录 L 中）将在 i210 控制器中运行，因此更准确且使用较少的 CPU。
当使用卸载的 CBS 且流量速率符合配置速率（不超过该速率）时，CBS 对延迟的影响很小或没有影响。
该算法的卸载版本有一些限制，这是由适配器寄存器中如何表示空闲斜率造成的。它只能以 16.38431 kbps 的单位表示空闲斜率，这意味着如果请求一个 2576 kbps 的空闲斜率，控制器将被配置为使用约 2589 kbps 的空闲斜率，因为驱动程序会向上取整该值。更多细节，请参见 :c:func:`igb_config_tx_modes()` 的注释。
注意：此功能仅适用于 i210 型号。

### 支持
有关一般信息，请访问 Intel 支持网站：
https://www.intel.com/support/

如果在支持内核上发布的源代码中发现与支持适配器相关的问题，请将与问题相关的确切信息发送至 intel-wired-lan@lists.osuosl.org。
