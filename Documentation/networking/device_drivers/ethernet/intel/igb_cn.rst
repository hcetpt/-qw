... SPDX 许可证标识符: GPL-2.0+ 

==========================================================
Intel(R) 以太网网络连接的 Linux 基础驱动程序
==========================================================

Intel 千兆位 Linux 驱动程序
版权所有 (c) 1999-2018 Intel 公司
内容
========

- 识别您的适配器
- 命令行参数
- 额外配置
- 支持

识别您的适配器
========================
有关如何识别您的适配器的信息，以及最新的 Intel 网络驱动程序，请参考 Intel 支持网站：
https://www.intel.com/support


命令行参数
========================
如果将驱动程序作为模块构建，则可以使用以下可选参数。通过在 modprobe 命令中使用以下语法输入这些参数：

    modprobe igb [<option>=<VAL1>,<VAL2>,...]

对于此驱动程序支持的系统中的每个网络端口，都需要有一个 <VAL#>。这些值将按功能顺序应用于每个实例。例如：

    modprobe igb max_vfs=2,4

在这种情况下，igb 在系统中支持两个网络端口。
**注：** 描述符描述数据缓冲区及其相关属性。此信息由硬件访问。

max_vfs
-------
**有效范围:** 0-7

此参数为 SR-IOV 添加了支持。它会导致驱动程序创建最多 max_vfs 数量的虚拟功能。如果该值大于 0，也会强制 VMDq 参数为 1 或更大。
驱动程序的参数按位置引用。因此，如果您拥有双端口适配器或系统中有多个适配器，并且希望每个端口有 N 个虚拟功能，您必须为每个端口指定一个数字，每个参数之间用逗号分隔。例如：

    modprobe igb max_vfs=4

这将在第一个端口上创建 4 个 VF
:

    modprobe igb max_vfs=2,4

这将在第一个端口上创建 2 个 VF，并在第二个端口上创建 4 个 VF
**注：** 使用这些参数加载驱动程序时必须谨慎。
根据您的系统配置、插槽数量等，无法在所有情况下预测命令行上的位置。
### 注意：
* 既不是设备也不是驱动程序控制VF如何映射到配置空间中。总线布局会因操作系统而异。在支持此功能的操作系统上，您可以检查sysfs以找到映射。
* 当启用SR-IOV模式或VMDq模式时，硬件VLAN过滤和VLAN标签剥离/插入将保持启用状态。请在添加新的VLAN过滤器之前移除旧的VLAN过滤器。例如：

        ip link set eth0 vf 0 vlan 100  # 为VF 0设置VLAN 100
        ip link set eth0 vf 0 vlan 0    # 删除VLAN 100
        ip link set eth0 vf 0 vlan 200  # 为VF 0设置新的VLAN 200

### 调试
---
* **有效范围：** 0-16（0=无...16=全部）
* **默认值：** 0

此参数调整系统日志中显示的调试信息级别。

### 额外的功能与配置

### 巨帧支持
---
巨帧支持是通过更改最大传输单元（MTU）至大于默认值1500来实现的。
使用ifconfig命令增加MTU大小。例如，其中`<x>`是接口编号：

        ifconfig eth<x> mtu 9000 up

或者，您可以使用ip命令如下所示：

        ip link set mtu 9000 dev eth<x>
        ip link set up dev eth<x>

此设置不会跨重启保存。要永久更改设置，请向以下文件添加`MTU=9000`：

- 对于RHEL：`/etc/sysconfig/network-scripts/ifcfg-eth<x>`
- 对于SLES：`/etc/sysconfig/network/<config_file>`

**注意：**巨帧的最大MTU设置为9216。该值对应于最大巨帧大小9234字节。
**注意：**不支持在10Mbps或100Mbps速率下使用巨帧，可能会导致性能不佳或连接丢失。

### ethtool
---
驱动程序利用ethtool接口进行驱动配置、诊断以及显示统计信息。为此功能需要最新版本的ethtool。下载地址为：

https://www.kernel.org/pub/software/network/ethtool/

### 启用网络唤醒（WoL）
---
WoL通过ethtool实用程序配置。
WoL将在系统下次关机或重启时启用。对于此驱动程序版本，为了启用WoL，在关闭或暂停系统之前必须加载igb驱动程序。
**注意：**仅在多端口设备的端口A上支持网络唤醒。此外，不支持以下设备的网络唤醒：
- Intel® Gigabit VT 四端口服务器适配器

### 多队列
---
在此模式下，为每个队列分配一个单独的MSI-X向量，并为“其他”中断（如链路状态变化和错误）分配一个向量。所有中断都通过中断调节进行调节。必须使用中断调节以避免在驱动程序处理一个中断时发生中断风暴。调节值应该至少等于预期的驱动程序处理中断所需的时间。默认情况下禁用多队列。
**要求：**启用多队列需要MSI-X支持。如果没有找到MSI-X，则系统将回退到MSI或传统中断。此驱动程序在所有支持MSI-X的内核上支持接收多队列。
**注意：**在某些内核上，从单队列模式切换到多队列模式或反之可能需要重启。
### MAC 和 VLAN 防伪造功能
当恶意驱动尝试发送伪造的数据包时，该数据包会被硬件丢弃并不予传输。
会向 PF 驱动发送中断以通知其伪造尝试。当检测到伪造的数据包时，PF 驱动会向系统日志发送以下消息（通过 "dmesg" 命令显示）：
检测到 VF(n) 上的伪造事件，其中 n 等于尝试进行伪造的 VF。

### 使用 IProute2 工具设置 MAC 地址、VLAN 和速率限制
您可以使用 IProute2 工具来设置虚拟功能 (VF) 的 MAC 地址、默认 VLAN 和速率限制。如果您的版本不包含所需的所有功能，请从 Sourceforge 下载最新版本的 IProute2 工具。

### 基于信用的整形器 (Qav 模式)
当在硬件卸载模式下启用基于信用的整形器 (CBS) 时，将使用 CBS 算法（如 IEEE 802.1Q-2018 第 8.6.8.2 节所述，并在附录 L 中进行了讨论）在 i210 控制器中运行，因此它更准确且占用较少的 CPU 资源。
当使用卸载 CBS 并且流量速率遵循配置的速率（不超过该速率）时，CBS 对延迟的影响应该很小或几乎没有。
该卸载算法有一些限制，这些限制源于适配器寄存器中如何表示空闲斜率。它只能以 16.38431 kbps 的单位表示空闲斜率，这意味着如果请求的空闲斜率为 2576 kbps，则控制器将被配置为使用大约 2589 kbps 的空闲斜率，因为驱动程序会向上取整该值。更多细节，请参阅 :c:func:`igb_config_tx_modes()` 函数的注释。
**注意：**此功能仅适用于 i210 型号。

### 支持
对于一般信息，请访问 Intel 支持网站：
https://www.intel.com/support/

如果在支持内核和支持适配器上发布的源代码中发现有问题，请将与问题相关的确切信息发送至 intel-wired-lan@lists.osuosl.org。
