### SPDX 许可声明标识符：GPL-2.0
### 包含：<isonum.txt>

==============================================
Intel® PRO/Wireless 2915ABG Linux 驱动程序
==============================================

#### 支持：

- Intel® PRO/Wireless 2200BG 网络连接
- Intel® PRO/Wireless 2915ABG 网络连接

**注**：Intel® PRO/Wireless 2915ABG Linux 驱动程序和 Intel® PRO/Wireless 2200BG Linux 驱动程序是一个统一的驱动程序，适用于上述两种硬件适配器。本文档中将使用 Intel® PRO/Wireless 2915ABG Linux 驱动程序来指代统一驱动程序。
版权所有 © 2004-2006, Intel 公司

README.ipw2200

:版本: 1.1.2
:日期: 2006年3月30日


.. 索引

    0. 使用此驱动程序前的重要信息
    1. 引言
    1.1. 功能概述
    1.2. 模块参数
    1.3. 无线扩展私有方法
    1.4. Sysfs 辅助文件
    1.5. 支持的频道
    2. 对等网络
    3. 与无线工具交互
    3.1. iwconfig 模式
    3.2. iwconfig 敏感度
    4. 版本号说明
    5. 固件安装
    6. 支持
    7. 许可证


0. 使用此驱动程序前的重要信息
================================

**重要通知** 对于所有用户或分发商！！！

Intel 无线局域网适配器经过设计、制造、测试和质量检查，以确保其符合所有必要的本地和政府监管机构要求，这些要求针对它们被指定或标记为进入的地区。由于无线局域网通常是未许可设备，与雷达、卫星和其他已许可及未许可设备共享频谱，因此有时需要动态检测、避免和限制使用以避免干扰这些设备。在许多情况下，Intel 必须提供测试数据来证明其产品符合区域性和地方性法规的要求才能获得认证或许可使用该产品。Intel 的无线局域网 EEPROM、固件和软件驱动程序旨在精心控制影响无线电操作的参数，并确保电磁兼容性（EMC）。这些参数包括但不限于射频功率、频谱使用、频道扫描和人体暴露。

出于这些原因，Intel 不允许第三方以任何形式操纵随无线局域网适配器提供的二进制格式软件（例如，EEPROM 和固件）。此外，如果您使用了未经授权方操纵的任何补丁、实用程序或代码（包括未经 Intel 验证的开源代码修改），(i) 您将独自负责确保产品的监管合规性；(ii) Intel 在任何责任理论下不对与修改产品相关的问题承担责任，包括但不限于保修索赔和因不符合监管规定而产生的问题；(iii) Intel 不会提供或被要求协助第三方提供此类修改产品的支持。

**注**：许多监管机构认为无线局域网适配器是模块，并相应地，在收到和审查证明天线和系统配置不会导致 EMC 和无线电操作不合规的测试数据后，才会授予系统级监管批准。

从 SourceForge 下载的驱动程序作为开发项目的一部分提供。符合本地监管要求的责任由个人开发者承担。因此，如果您有兴趣部署或分发作为解决方案一部分的驱动程序，且该解决方案的目的不仅限于开发，请从 Intel 客户支持处获取经过测试的驱动程序：

http://support.intel.com


1. 引言
==================

以下部分试图提供使用 Intel® PRO/Wireless 2915ABG Linux 驱动程序的简要介绍。
本文档并非理解或使用无线技术的全面手册，但应该足以让您在 Linux 上实现无线通信。
有关构建和安装驱动程序的信息，请参阅 INSTALL 文件。
1.1. 功能概述
-------------------------
当前版本（1.1.2）支持以下功能：

+ BSS 模式（基础结构，管理）
+ IBSS 模式（对等）
+ WEP（OPEN 和 SHARED KEY 模式）
+ 通过 wpa_supplicant 和 xsupplicant 实现 802.1x EAP
+ 无线扩展支持
+ 全部 B 和 G 速率支持（2200 和 2915）
+ 全部 A 速率支持（仅限 2915）
+ 发送功率控制
+ S 状态支持（ACPI 暂停/恢复）

以下功能目前已被启用，但并未正式支持：

+ WPA
+ 长/短前导码支持
+ 监控模式（又称 RFMon）

正式支持与已启用的区别在于对特定功能进行验证和互操作性测试的程度。
1.2. 命令行参数
----------------------------

如同 Linux 内核中的许多模块一样，Intel® PRO/Wireless 2915ABG Linux 驱动程序允许通过模块参数进行配置。最常见的方式是通过命令行指定一个模块参数。
一般形式如下：

    % modprobe ipw2200 parameter=value

其中支持的参数包括：

  associate
  设置为 0 以禁用驱动程序自动扫描并关联的功能。如果禁用，则驱动程序在配置了目标网络的一个或多个属性（例如配置网络 SSID）之前，不会尝试扫描并关联到网络。默认值为 0（不自动关联）。

  示例：% modprobe ipw2200 associate=0

  auto_create
  设置为 0 以禁用根据提供的频道和网络名称参数自动生成对等网络的功能
默认值为 1
频道
	用于关联的频道号。通常设置频道的方法是使用标准的无线工具（例如，`iwconfig eth1 channel 10`），但在调试时有时需要直接设置此值。频道 0 表示“任意”。

调试
	如果使用调试版本构建，则此选项用于控制记录的日志信息量。有关如何使用此选项的更多信息，请参阅 'dvals' 和 'load' 脚本（这些脚本作为 ipw2200 开发快照版本的一部分提供，可在 SourceForge 项目 http://ipw2200.sf.net 获取）。

LED
	可用于启用实验性的 LED 代码。
0 = 关闭，1 = 打开，默认值为 1
模式
	可用于设置适配器的默认模式。
0 = 管理模式，1 = 自组网络模式，2 = 监控模式

1.3. 无线扩展私有方法
------------------------

作为一个设计来处理通用硬件的接口，有些能力无法通过常规的无线工具接口暴露出来。因此，提供了一种机制供驱动程序声明自定义或私有的方法。Intel® PRO/Wireless 2915ABG Linux 驱动程序定义了若干这样的方法来配置各种设置。
使用私有无线方法的一般形式如下：

	% iwpriv $IFNAME 方法 参数

其中 $IFNAME 是设备注册的接口名称（通常是 eth1，可通过各种网络接口命名管理器如 ifrename 进行定制）。

支持的私有方法包括：

  get_mode
	可以用来报告驱动程序配置支持的 IEEE 模式。例如：

	% iwpriv eth1 get_mode
	eth1 get_mode:802.11bg (6)

  set_mode
	可以用来配置驱动程序将要支持的 IEEE 模式
用法如下：

	% iwpriv eth1 set_mode {mode}

其中 {mode} 是范围在 1-7 的数字：

	==	=====================
	1	802.11a （仅 2915 支持）
	2	802.11b
	3	802.11ab （仅 2915 支持）
	4	802.11g
	5	802.11ag （仅 2915 支持）
	6	802.11bg
	7	802.11abg （仅 2915 支持）
	==	=====================

  get_preamble
	可以用来报告前导码长度的配置
set_preamble
	可以用来设置前导码长度的配置：

	用法如下：

	% iwpriv eth1 set_preamble {mode}

其中 {mode} 可以是：

	==	========================================
	1	仅长前导码
	0	自动（根据连接选择长或短前导码）
	==	========================================

1.4. Sysfs 辅助文件
-------------------

Linux 内核提供了一个伪文件系统，可以用来访问操作系统的各个组件。Intel® PRO/Wireless 2915ABG Linux 驱动程序通过这种方式暴露了一些配置参数。
Sysfs 中的一个条目可能支持读取和/或写入。通常可以通过使用 `cat` 查询 Sysfs 条目的内容，并通过 `echo` 设置其内容。例如：

    % cat /sys/bus/pci/drivers/ipw2200/debug_level

这将报告驱动程序日志子系统的当前调试级别（仅当驱动程序构建时配置了 CONFIG_IPW2200_DEBUG 时可用）。
您可以通过以下命令设置调试级别：

    % echo $VALUE > /sys/bus/pci/drivers/ipw2200/debug_level

其中 $VALUE 在这种 Sysfs 条目的情况下是一个数字。向 Sysfs 文件输入的内容不必总是数字。例如，热插拔中使用的固件加载器利用 Sysfs 条目来从用户空间传输固件映像到驱动程序中。
Intel(R) PRO/Wireless 2915ABG 驱动程序为 Linux 暴露了两个级别的 sysfs 入口 —— 驱动级别，适用于所有驱动实例（如果有多个设备安装的情况）；以及设备级别，仅适用于特定的单一实例。

### 1.4.1 驱动级别 Sysfs 辅助文件
对于驱动级别的文件，请查看 `/sys/bus/pci/drivers/ipw2200/`：

- **debug_level**
  - 这个设置控制与模块参数 `'debug'` 相同的全局变量。

### 1.4.2 设备级别 Sysfs 辅助文件
对于设备级别的文件，请查看以下路径：

```
/sys/bus/pci/drivers/ipw2200/{PCI-ID}/
```

例如：

```
/sys/bus/pci/drivers/ipw2200/0000:02:01.0
```

- **rf_kill**
  - **读取**：
    - `0`: RF 杀死未启用（无线电开启）
    - `1`: 软件基础的 RF 杀死激活（无线电关闭）
    - `2`: 硬件基础的 RF 杀死激活（无线电关闭）
    - `3`: 硬件和软件 RF 杀死均激活（无线电关闭）

  - **写入**：
    - `0`: 如果软件基础的 RF 杀死已激活，则重新开启无线电
    - `1`: 如果无线电已开启，则激活软件基础的 RF 杀死

  - **注意**：如果你启用了软件基础的 RF 杀死，并且切换硬件基础的 RF 杀死从开启到关闭再回到开启，无线电将不会重新开启。
  
- **ucode**
  - 只读访问固件版本号。

- **led**
  - **读取**：
    - `0`: LED 代码禁用
    - `1`: LED 代码启用

  - **写入**：
    - `0`: 禁用 LED 代码
    - `1`: 启用 LED 代码

  - **注意**：据报道，当运行 `ifconfig` 时 LED 代码可能会导致某些系统挂起，因此默认情况下是禁用的。

### 1.5 支持的频道
加载 Intel(R) PRO/Wireless 2915ABG 驱动程序后，会显示一条消息，指示检测到的地理编码以及支持的 802.11 频道数量。地理编码对应于下表所示的法规域：

| 代码 | 地理区域       | 支持的频道 |
|------|---------------|------------|
| ---  | 受限         | 11         | 0          |
| ZZF  | 定制的美国/加拿大 | 11         | 8          |
| ZZD  | 其他地区       | 13         | 0          |
| ZZA  | 定制的美国 & 欧洲 & 高频带 | 11         | 13         |
| ZZB  | 定制的北美 & 欧洲 | 11         | 13         |
| ZZC  | 定制的日本     | 11         | 4          |
| ZZM  | 定制           | 11         | 0          |
| ZZE  | 欧洲           | 13         | 19         |
| ZZJ  | 定制的日本     | 14         | 4          |
| ZZR  | 其他地区       | 14         | 0          |
| ZZH  | 高频带         | 13         | 4          |
| ZZG  | 定制的欧洲     | 13         | 4          |
| ZZK  | 欧洲           | 13         | 24         |
| ZZL  | 欧洲           | 11         | 13         |

### 2. Ad-Hoc 网络
#### 2.1 加入 Ad-Hoc 网络
加入现有的 Ad-Hoc 网络是最简单的方式。

#### 2.2 创建 Ad-Hoc 网络
使用无线工具的语法来创建 Ad-Hoc 网络，例如：
```
iwconfig eth1 mode ad-hoc essid testing channel 2
```

#### 2.3 合并 Ad-Hoc 网络

### 3. 与无线工具的交互
#### 3.1 iwconfig mode
配置适配器模式时，所有运行时配置的参数都会重置为模块加载时的值，包括频道、速率、ESSID 等。

#### 3.2 iwconfig sens
命令 `iwconfig ethX sens XX` 不会设置信号敏感度阈值，而是设置连续丢失信标触发切换（即漫游到另一个接入点）的数量。同时，它也会将断开连接阈值设置为给定值的三倍。
4. 关于版本号
=============================

由于开源开发项目的特性，经常会有一些未经完整验证过程的改动被合并进来。这些改动会被纳入开发快照版本中。
版本号采用三级方案表示：

主要.次要.开发

任何“开发”部分为0的版本（例如 1.0.0、1.1.0 等）表明这是一个稳定版本，将会提供给内核使用。
任何“开发”部分不为0的版本（例如 1.0.1、1.1.5 等）表明这是一个开发版本，提供给测试和追求最新技术的用户使用。开发版本的稳定性与功能未知。我们尽力保持所有快照版本的相对稳定性，但由于发布频率较高以及希望尽快发布这些版本的原因，未知的问题是可能出现的。
当驱动程序发生重大变化时，主要版本号将会递增。目前，尚无计划进行任何重大更改。

5. 固件安装
========================

该驱动需要一个固件映像，请下载并解压文件到 /lib/firmware （或者您的热插拔固件代理查找固件文件的地方）。

固件可以从以下URL下载：

    http://ipw2200.sf.net/

6. 支持
==========

对于 1.0.0 版本的直接支持，您可以联系
http://supportmail.intel.com，或者使用开源项目的支持。
对于一般信息和支持，请访问：

    http://ipw2200.sf.net/

7. 许可证
==========

  版权所有 © 2003 - 2006 英特尔公司。保留所有权利。
本程序是自由软件；您可以在遵循GNU通用公共许可证第2版（由自由软件基金会发布）的情况下重新分发或修改它。
本程序以期望对使用者有所帮助为目标，但没有任何形式的保证，包括但不限于适销性或适合特定目的的默示保证。详情请参阅GNU通用公共许可证。
您应该随同本程序收到了一份GNU通用公共许可证副本；如果没有，请写信至自由软件基金会, Inc., 59 Temple Place - Suite 330, 波士顿, MA  02111-1307, 美国。
完整的GNU通用公共许可证包含在本发行版中的名为 LICENSE 的文件里。
联系方式：

  James P. Ketrenos <ipw2100-admin@linux.intel.com>

  英特尔公司, 5200 N.E. Elam 年轻公园大道, 希尔斯伯勒, OR 97124-6497
