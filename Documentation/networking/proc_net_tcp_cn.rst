### SPDX 许可证标识符：GPL-2.0

============================================
`/proc/net/tcp` 和 `/proc/net/tcp6` 变量
============================================

本文档描述了接口 `/proc/net/tcp` 和 `/proc/net/tcp6`。
请注意，这些接口已被 `tcp_diag` 所替代。
这些 `/proc` 接口提供了当前活动的 TCP 连接的信息，分别由 `net/ipv4/tcp_ipv4.c` 中的 `tcp4_seq_show()` 和 `net/ipv6/tcp_ipv6.c` 中的 `tcp6_seq_show()` 实现。
它首先列出所有监听的 TCP 套接字，接着列出所有已建立的 TCP 连接。一个典型的 `/proc/net/tcp` 入口可能如下所示（为了行长度的原因，这里将其分成三部分）：

```
46: 010310AC:9C4C 030310AC:1770 01
|      |      |      |      |   |--> 连接状态
|      |      |      |      |------> 远程 TCP 端口号
|      |      |      |-------------> 远程 IPv4 地址
|      |      |--------------------> 本地 TCP 端口号
|      |---------------------------> 本地 IPv4 地址
|----------------------------------> 条目编号

00000150:00000000 01:00000019 00000000
      |        |     |     |       |--> 未恢复的 RTO 超时次数
      |        |     |     |----------> 定时器到期前剩余的时钟节拍数
      |        |     |----------------> 定时器激活状态（见下文）
      |        |----------------------> 接收队列
      |-------------------------------> 发送队列

1000        0 54165785 4 cd1e6040 25 4 27 3 -1
    |          |    |     |    |     |  | |  | |--> 慢启动阈值大小，
    |          |    |     |    |     |  | |  |      或者如果阈值
    |          |    |     |    |     |  | |  |      大于等于 0xFFFF 则为 -1
    |          |    |     |    |     |  | |  |----> 发送拥塞窗口
    |          |    |     |    |     |  | |-------> (ack.quick<<1)|ack.pingpong
    |          |    |     |    |     |  |---------> 预测的软时钟刻度
    |          |    |     |    |     |              （延迟 ACK 控制数据）
    |          |    |     |    |     |------------> 重传超时时间
    |          |    |     |    |------------------> 内存中套接字的位置
    |          |    |     |-----------------------> 套接字引用计数
    |          |    |-----------------------------> inode
    |          |----------------------------------> 未回答的零窗口探测数量
    |---------------------------------------------> 用户ID

定时器激活状态：

==  ================================================================
 0  没有待处理的定时器
 1  待处理的是重传定时器
 2  待处理的是另一个定时器（例如延迟 ACK 或保持活动定时器）
 3  这是一个处于 TIME_WAIT 状态的套接字。并非所有字段都包含数据（甚至存在）
 4  待处理的是零窗口探测定时器
==  ================================================================
```
