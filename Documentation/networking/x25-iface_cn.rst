SPDX 许可证标识符: GPL-2.0

X.25 设备驱动接口
============================

版本 1.1

				乔纳森·内勒 1996年12月26日

这是在 X.25 分组层与 X.25 设备驱动之间传递的消息描述。它们的设计允许从分组层轻松设置 LAPB 模式。
X.25 设备驱动将按照 Linux 设备驱动的标准进行编码。大多数 X.25 设备驱动将与现有的以太网设备驱动相当相似。然而，与这些驱动不同的是，X.25 设备驱动与其状态相关联，这些信息需要传递给分组层以确保正常运行。
所有消息都像实际要通过 LAPB 链路传输的数据一样存储在 `sk_buff` 中。`sk_buff` 的第一个字节表示其余部分的意义（如果存在更多内容的话）。

## 分组层到设备驱动

### 第一个字节 = 0x00 (X25_IFACE_DATA)

这表示 `sk_buff` 的其余部分包含要通过 LAPB 链路传输的数据。在任何数据传递之前，LAPB 链路应当已经建立。

### 第一个字节 = 0x01 (X25_IFACE_CONNECT)

建立 LAPB 链路。如果链路已建立，则应尽快返回连接确认消息。

### 第一个字节 = 0x02 (X25_IFACE_DISCONNECT)

终止 LAPB 链路。如果链路已经断开，则应尽快返回断开确认消息。

### 第一个字节 = 0x03 (X25_IFACE_PARAMS)

LAPB 参数。待定义。

## 设备驱动到分组层

### 第一个字节 = 0x00 (X25_IFACE_DATA)

这表示 `sk_buff` 的其余部分包含通过 LAPB 链路接收到的数据。

### 第一个字节 = 0x01 (X25_IFACE_CONNECT)

LAPB 链路已建立。同一个消息用于 LAPB 链路的连接确认和连接指示。

### 第一个字节 = 0x02 (X25_IFACE_DISCONNECT)

LAPB 链路已终止。同一个消息用于 LAPB 链路的断开确认和断开指示。
首字节 = 0x03 (X25_IFACE_PARAMS)

LAPB 参数。待定义
对设备驱动程序的要求
----------------------------------

在数据包层和设备驱动程序之间传输时，不应重新排序或丢弃数据包
为了避免从设备驱动程序到数据包层传输时数据包被重新排序或丢弃，设备驱动程序不应调用 "netif_rx" 来传输接收到的数据包。相反，它应该从软中断上下文调用 "netif_receive_skb_core" 来传输它们。
