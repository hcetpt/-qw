=========================
内核驱动：i2c-parport
=========================

作者: Jean Delvare <jdelvare@suse.de>

这是一个统一的驱动程序，适用于多种通过并行端口实现I2C的适配器，例如飞利浦、Velleman或ELV制造的产品。该驱动程序旨在替代原有的独立驱动程序：

 * i2c-philips-par
 * i2c-elv
 * i2c-velleman
 * video/i2c-parport
   （请注意这不是同一个驱动程序，它是专门用于自制电传视讯适配器的）

它目前支持以下设备：

 * (type=0) 飞利浦适配器
 * (type=1) 自制电传视讯适配器
 * (type=2) Velleman K8000适配器
 * (type=3) ELV适配器
 * (type=4) Analog Devices ADM1032评估板
 * (type=5) Analog Devices评估板：ADM1025, ADM1030, ADM1031
 * (type=6) Barco LPT->DVI (K5800236)适配器
 * (type=7) One For All JP1并行端口适配器
 * (type=8) VCT-jig

这些设备使用不同的引脚配置，因此您需要告诉驱动程序您使用的是哪种类型，使用type模块参数来指定。无法自动检测这些设备。当需要时，可以轻松地添加对不同引脚配置的支持。
较早的内核默认为type=0（飞利浦）。但现在，如果缺少type参数，驱动程序将简单地失败初始化。
SMBus警报支持在那些将此线正确连接到并行端口中断引脚的适配器上可用。

构建您自己的适配器
-------------------------
如果您想构建自己的通过并行端口实现I2C的适配器，这里有一个示例电子电路图（感谢 Sylvain Munaut 提供）:

```
  设备                                                      PC
  一侧          ___________________Vdd (+)                    一侧
                 |    |         |
                ---  ---       ---
                | |  | |       | |
                |R|  |R|       |R|
                | |  | |       | |
                ---  ---       ---
                 |    |         |
                 |    |    /|   |
  SCL  ----------x--------o |-----------x-------------------  引脚 2
                      |    \|   |       |
                      |         |       |
                      |   |\    |       |
  SDA  ----------x----x---| o---x---------------------------  引脚 13
                 |        |/            |
                 |                      |
                 |         /|           |
                 ---------o |----------------x--------------  引脚 3
                           \|           |    |
                                        |    |
                                       ---  ---
                                       | |  | |
                                       |R|  |R|
                                       | |  | |
                                       ---  ---
                                        |    |
                                       ###  ###
                                       GND  GND
```

备注：
 - 这是Analog Devices评估板上使用的精确引脚和电子元件配置
- 所有反相器:

                   /|
                 -o |-
                   \|

 必须是74HC05，并且必须具有开路集电极输出
- 所有电阻器均为10k
- 并行端口的第18-25引脚连接到GND
- 并行端口的第4-9引脚（D2-D7）可用于VDD，如果驱动程序使它们保持高电平的话
  ADM1032评估板使用了D4-D7。请注意，您可以从并行端口抽取的电流是有限的。同时需要注意的是所有连接的线路必须处于相同的状态，否则会短路输出缓冲区！所以，在加载i2c-parport模块之后再插入I2C适配器可能是一个好的安全措施，因为在初始化之前数据线的状态可能是未知的
- 这是5V！
 - 显然，您不能读取SCL（因此它并不完全符合标准）
添加非常简单，只需复制SDA部分并使用另一个输入引脚。
这样就会得到（与ELV兼容的引脚排列）：

      设备                                                      PC
      侧面          ______________________________Vdd (+)         侧面
                     |    |            |    |
                    ---  ---          ---  ---
                    | |  | |          | |  | |
                    |R|  |R|          |R|  |R|
                    | |  | |          | |  | |
                    ---  ---          ---  ---
                     |    |            |    |
                     |    |      |\    |    |
      SCL  ----------x--------x--| o---x------------------------  引脚 15
                          |   |  |/         |
                          |   |             |
                          |   |   /|        |
                          |   ---o |-------------x--------------  引脚 2
                          |       \|        |    |
                          |                 |    |
                          |                 |    |
                          |      |\         |    |
      SDA  ---------------x---x--| o--------x-------------------  引脚 10
                              |  |/              |
                              |                  |
                              |   /|             |
                              ---o |------------------x---------  引脚 3
                                  \|             |    |

如果可能的话，你应该使用与现有适配器相同的引脚排列配置，因此你甚至不必更改代码。
类似的（但不同的）驱动程序
-------------------------------

此驱动程序与i2c软件包中找到的i2c-pport驱动程序不同。i2c-pport驱动程序利用现代并行端口功能，使你无需额外的电子设备。但它有其他限制，并且尚未移植到Linux 2.6（目前）。
此驱动程序也与lm_sensors软件包中的i2c-pcf-epp驱动程序不同。i2c-pcf-epp驱动程序不是直接将并行端口用作I2C总线。相反，它使用并行端口来控制一个外部的I2C总线主控器。该驱动程序同样尚未移植到Linux 2.6（目前）。
Velleman适配器的遗留文档
-----------------------------------------

有用的链接：

- Velleman                http://www.velleman.be/
- Velleman K8000 如何操作    http://howto.htlw16.ac.at/k8000-howto.html

该项目导致为Velleman K8000和K8005开发了新的库：

  LIBK8000 v1.99.1 和 LIBK8005 v0.21

使用这些库，你可以通过简单的命令（如SetIOchannel、ReadADchannel、SendStepCCWFull等）控制K8000接口卡和K8005步进电机卡，这些命令与原始Velleman软件中的一样，通过/dev/velleman访问：
- http://home.wanadoo.nl/hihihi/libk8000.htm
  - http://home.wanadoo.nl/hihihi/libk8005.htm
  - http://struyve.mine.nu:8080/index.php?block=k8000
  - http://sourceforge.net/projects/libk8005/

One For All JP1 并行端口适配器
-------------------------------------

JP1项目围绕一组可以通过电池仓内的6针跳线暴露其内部配置EEPROM上的I2C总线的遥控器。更多详细信息可以在以下网址找到：

http://www.hifi-remote.com/jp1/

有关简单并行端口硬件的详细信息可以在以下网址找到：

http://www.hifi-remote.com/jp1/hardware.shtml
