=========================
内核驱动 i2c-parport
=========================

作者: Jean Delvare <jdelvare@suse.de>

这是一个为几种通过并行端口实现 I2C 的适配器统一设计的驱动，例如飞利浦、Velleman 或 ELV 制造的产品。该驱动旨在替代旧的独立驱动：

 * i2c-philips-par
 * i2c-elv
 * i2c-velleman
 * video/i2c-parport
   （这与当前驱动不同，专为自制的电视文字适配器设计）

目前它支持以下设备：

 * (type=0) 飞利浦适配器
 * (type=1) 自制电视文字适配器
 * (type=2) Velleman K8000 适配器
 * (type=3) ELV 适配器
 * (type=4) Analog Devices ADM1032 评估板
 * (type=5) Analog Devices 评估板: ADM1025, ADM1030, ADM1031
 * (type=6) Barco LPT->DVI (K5800236) 适配器
 * (type=7) One For All JP1 并行端口适配器
 * (type=8) VCT-jig

这些设备使用不同的引脚配置，因此您需要使用 type 模块参数告诉驱动程序您使用的是哪种设备。无法自动检测这些设备。如果需要，可以轻松添加对不同引脚配置的支持。
早期内核默认使用 type=0（飞利浦）。但现在，如果缺少 type 参数，驱动程序将不会初始化。
SMBus 警报支持在那些将此线正确连接到并行端口中断引脚的适配器上可用。

构建自己的适配器
-------------------------
如果您想构建自己的 I2C 过并行端口适配器，这里有一个示例电子原理图（致谢 Sylvain Munaut）:

  设备                                                      PC
  侧面          ___________________Vdd (+)                    侧面
                 |    |         |
                ---  ---       ---
                | |  | |       | |
                |R|  |R|       |R|
                | |  | |       | |
                ---  ---       ---
                 |    |         |
                 |    |    /|   |
  SCL  ----------x--------o |-----------x-------------------  引脚 2
                      |    \|   |       |
                      |         |       |
                      |   |\    |       |
  SDA  ----------x----x---| o---x---------------------------  引脚 13
                 |        |/            |
                 |                      |
                 |         /|           |
                 ---------o |----------------x--------------  引脚 3
                           \|           |    |
                                        |    |
                                       ---  ---
                                       | |  | |
                                       |R|  |R|
                                       | |  | |
                                       ---  ---
                                        |    |
                                       ###  ###
                                       GND  GND

备注：
 - 这是 Analog Devices 评估板上使用的精确引脚和电子元件配置
- 所有反相器 ::

                   /|
                 -o |-
                   \|

   必须是 74HC05，它们必须具有开路集电极输出
- 所有电阻都是 10k
- 并行端口的引脚 18-25 连接到 GND
- 并行端口的引脚 4-9 (D2-D7) 可以用作 VDD，如果驱动程序将其置高电平的话
   ADM1032 评估板使用 D4-D7。请注意，从并行端口可以汲取的电流是有限的。另外需要注意的是所有连接的线路都必须处于同一状态，否则会短路输出缓冲器！因此，在加载 i2c-parport 模块后再插入 I2C 适配器可能是一个好的安全措施，因为在初始化之前数据线的状态可能是未知的
- 这是 5V！
 - 显然，您不能读取 SCL（因此这不是完全符合标准的）
添加非常简单，只需复制SDA部分并使用另一个输入引脚。
这样就会得到（与ELV兼容的引脚排列）：

      设备                                                      PC
      侧面          ______________________________Vdd (+)         侧面
                     |    |            |    |
                    ---  ---          ---  ---
                    | |  | |          | |  | |
                    |R|  |R|          |R|  |R|
                    | |  | |          | |  | |
                    ---  ---          ---  ---
                     |    |            |    |
                     |    |      |\    |    |
      SCL  ----------x--------x--| o---x------------------------  引脚 15
                          |   |  |/         |
                          |   |             |
                          |   |   /|        |
                          |   ---o |-------------x--------------  引脚 2
                          |       \|        |    |
                          |                 |    |
                          |                 |    |
                          |      |\         |    |
      SDA  ---------------x---x--| o--------x-------------------  引脚 10
                              |  |/              |
                              |                  |
                              |   /|             |
                              ---o |------------------x---------  引脚 3
                                  \|             |    |

如果可能的话，你应该使用与现有适配器相同的引脚排列配置，因此你甚至不必更改代码。
类似的（但不同的）驱动程序
-------------------------------

此驱动程序与i2c软件包中找到的i2c-pport驱动程序不同。i2c-pport驱动程序利用现代并行端口功能，使你无需额外的电子设备。但它有其他限制，并且尚未移植到Linux 2.6（目前）。
此驱动程序也与lm_sensors软件包中的i2c-pcf-epp驱动程序不同。i2c-pcf-epp驱动程序不是直接将并行端口用作I2C总线。相反，它使用该端口来控制一个外部的I2C总线控制器。该驱动程序同样没有被移植到Linux 2.6（目前）。
Velleman适配器的遗留文档
-----------------------------------------

有用的链接：

- Velleman                http://www.velleman.be/
- Velleman K8000 如何做    http://howto.htlw16.ac.at/k8000-howto.html

该项目导致为Velleman K8000和K8005开发了新的库：

  LIBK8000 v1.99.1 和 LIBK8005 v0.21

通过这些库，你可以使用原始Velleman软件中的简单命令来控制K8000接口卡和K8005步进电机卡，如SetIOchannel、ReadADchannel、SendStepCCWFull等更多命令，使用/dev/velleman
- http://home.wanadoo.nl/hihihi/libk8000.htm
  - http://home.wanadoo.nl/hihihi/libk8005.htm
  - http://struyve.mine.nu:8080/index.php?block=k8000
  - http://sourceforge.net/projects/libk8005/

One For All JP1并行端口适配器
-------------------------------------

JP1项目围绕一组遥控器展开，这些遥控器通过电池隔间内的6针跳线将其内部配置EEPROM上的I2C总线暴露出来。更多详细信息可以在以下网址找到：

http://www.hifi-remote.com/jp1/

有关简单的并行端口硬件的详细信息可以在以下网址找到：

http://www.hifi-remote.com/jp1/hardware.shtml
